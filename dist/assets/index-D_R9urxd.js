function Gd(s,o){for(var l=0;l<o.length;l++){const u=o[l];if(typeof u!="string"&&!Array.isArray(u)){for(const c in u)if(c!=="default"&&!(c in s)){const m=Object.getOwnPropertyDescriptor(u,c);m&&Object.defineProperty(s,c,m.get?m:{enumerable:!0,get:()=>u[c]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))u(c);new MutationObserver(c=>{for(const m of c)if(m.type==="childList")for(const h of m.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function l(c){const m={};return c.integrity&&(m.integrity=c.integrity),c.referrerPolicy&&(m.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?m.credentials="include":c.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(c){if(c.ep)return;c.ep=!0;const m=l(c);fetch(c.href,m)}})();function Zd(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ci={exports:{}},Qs={},di={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd;function oh(){if(hd)return Me;hd=1;var s=Symbol.for("react.element"),o=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),b=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,D={};function R(P,I,ye){this.props=P,this.context=I,this.refs=D,this.updater=ye||S}R.prototype.isReactComponent={},R.prototype.setState=function(P,I){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,I,"setState")},R.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function U(){}U.prototype=R.prototype;function T(P,I,ye){this.props=P,this.context=I,this.refs=D,this.updater=ye||S}var O=T.prototype=new U;O.constructor=T,M(O,R.prototype),O.isPureReactComponent=!0;var q=Array.isArray,Q=Object.prototype.hasOwnProperty,te={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function A(P,I,ye){var ke,be={},we=null,B=null;if(I!=null)for(ke in I.ref!==void 0&&(B=I.ref),I.key!==void 0&&(we=""+I.key),I)Q.call(I,ke)&&!E.hasOwnProperty(ke)&&(be[ke]=I[ke]);var ue=arguments.length-2;if(ue===1)be.children=ye;else if(1<ue){for(var Te=Array(ue),ut=0;ut<ue;ut++)Te[ut]=arguments[ut+2];be.children=Te}if(P&&P.defaultProps)for(ke in ue=P.defaultProps,ue)be[ke]===void 0&&(be[ke]=ue[ke]);return{$$typeof:s,type:P,key:we,ref:B,props:be,_owner:te.current}}function K(P,I){return{$$typeof:s,type:P.type,key:I,ref:P.ref,props:P.props,_owner:P._owner}}function Z(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function Ce(P){var I={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ye){return I[ye]})}var je=/\/+/g;function Fe(P,I){return typeof P=="object"&&P!==null&&P.key!=null?Ce(""+P.key):I.toString(36)}function Ne(P,I,ye,ke,be){var we=typeof P;(we==="undefined"||we==="boolean")&&(P=null);var B=!1;if(P===null)B=!0;else switch(we){case"string":case"number":B=!0;break;case"object":switch(P.$$typeof){case s:case o:B=!0}}if(B)return B=P,be=be(B),P=ke===""?"."+Fe(B,0):ke,q(be)?(ye="",P!=null&&(ye=P.replace(je,"$&/")+"/"),Ne(be,I,ye,"",function(ut){return ut})):be!=null&&(Z(be)&&(be=K(be,ye+(!be.key||B&&B.key===be.key?"":(""+be.key).replace(je,"$&/")+"/")+P)),I.push(be)),1;if(B=0,ke=ke===""?".":ke+":",q(P))for(var ue=0;ue<P.length;ue++){we=P[ue];var Te=ke+Fe(we,ue);B+=Ne(we,I,ye,Te,be)}else if(Te=w(P),typeof Te=="function")for(P=Te.call(P),ue=0;!(we=P.next()).done;)we=we.value,Te=ke+Fe(we,ue++),B+=Ne(we,I,ye,Te,be);else if(we==="object")throw I=String(P),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return B}function Ee(P,I,ye){if(P==null)return P;var ke=[],be=0;return Ne(P,ke,"","",function(we){return I.call(ye,we,be++)}),ke}function De(P){if(P._status===-1){var I=P._result;I=I(),I.then(function(ye){(P._status===0||P._status===-1)&&(P._status=1,P._result=ye)},function(ye){(P._status===0||P._status===-1)&&(P._status=2,P._result=ye)}),P._status===-1&&(P._status=0,P._result=I)}if(P._status===1)return P._result.default;throw P._result}var Re={current:null},J={transition:null},me={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:J,ReactCurrentOwner:te};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:Ee,forEach:function(P,I,ye){Ee(P,function(){I.apply(this,arguments)},ye)},count:function(P){var I=0;return Ee(P,function(){I++}),I},toArray:function(P){return Ee(P,function(I){return I})||[]},only:function(P){if(!Z(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Me.Component=R,Me.Fragment=l,Me.Profiler=c,Me.PureComponent=T,Me.StrictMode=u,Me.Suspense=g,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Me.act=ee,Me.cloneElement=function(P,I,ye){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ke=M({},P.props),be=P.key,we=P.ref,B=P._owner;if(I!=null){if(I.ref!==void 0&&(we=I.ref,B=te.current),I.key!==void 0&&(be=""+I.key),P.type&&P.type.defaultProps)var ue=P.type.defaultProps;for(Te in I)Q.call(I,Te)&&!E.hasOwnProperty(Te)&&(ke[Te]=I[Te]===void 0&&ue!==void 0?ue[Te]:I[Te])}var Te=arguments.length-2;if(Te===1)ke.children=ye;else if(1<Te){ue=Array(Te);for(var ut=0;ut<Te;ut++)ue[ut]=arguments[ut+2];ke.children=ue}return{$$typeof:s,type:P.type,key:be,ref:we,props:ke,_owner:B}},Me.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:m,_context:P},P.Consumer=P},Me.createElement=A,Me.createFactory=function(P){var I=A.bind(null,P);return I.type=P,I},Me.createRef=function(){return{current:null}},Me.forwardRef=function(P){return{$$typeof:p,render:P}},Me.isValidElement=Z,Me.lazy=function(P){return{$$typeof:j,_payload:{_status:-1,_result:P},_init:De}},Me.memo=function(P,I){return{$$typeof:y,type:P,compare:I===void 0?null:I}},Me.startTransition=function(P){var I=J.transition;J.transition={};try{P()}finally{J.transition=I}},Me.unstable_act=ee,Me.useCallback=function(P,I){return Re.current.useCallback(P,I)},Me.useContext=function(P){return Re.current.useContext(P)},Me.useDebugValue=function(){},Me.useDeferredValue=function(P){return Re.current.useDeferredValue(P)},Me.useEffect=function(P,I){return Re.current.useEffect(P,I)},Me.useId=function(){return Re.current.useId()},Me.useImperativeHandle=function(P,I,ye){return Re.current.useImperativeHandle(P,I,ye)},Me.useInsertionEffect=function(P,I){return Re.current.useInsertionEffect(P,I)},Me.useLayoutEffect=function(P,I){return Re.current.useLayoutEffect(P,I)},Me.useMemo=function(P,I){return Re.current.useMemo(P,I)},Me.useReducer=function(P,I,ye){return Re.current.useReducer(P,I,ye)},Me.useRef=function(P){return Re.current.useRef(P)},Me.useState=function(P){return Re.current.useState(P)},Me.useSyncExternalStore=function(P,I,ye){return Re.current.useSyncExternalStore(P,I,ye)},Me.useTransition=function(){return Re.current.useTransition()},Me.version="18.3.1",Me}var pd;function Ri(){return pd||(pd=1,di.exports=oh()),di.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gd;function ih(){if(gd)return Qs;gd=1;var s=Ri(),o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,y){var j,b={},w=null,S=null;y!==void 0&&(w=""+y),g.key!==void 0&&(w=""+g.key),g.ref!==void 0&&(S=g.ref);for(j in g)u.call(g,j)&&!m.hasOwnProperty(j)&&(b[j]=g[j]);if(p&&p.defaultProps)for(j in g=p.defaultProps,g)b[j]===void 0&&(b[j]=g[j]);return{$$typeof:o,type:p,key:w,ref:S,props:b,_owner:c.current}}return Qs.Fragment=l,Qs.jsx=h,Qs.jsxs=h,Qs}var xd;function uh(){return xd||(xd=1,ci.exports=ih()),ci.exports}var n=uh(),x=Ri();const ch=Zd(x),dh=Gd({__proto__:null,default:ch},[x]);var ml={},fi={exports:{}},Lt={},mi={exports:{}},hi={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd;function fh(){return yd||(yd=1,function(s){function o(J,me){var ee=J.length;J.push(me);e:for(;0<ee;){var P=ee-1>>>1,I=J[P];if(0<c(I,me))J[P]=me,J[ee]=I,ee=P;else break e}}function l(J){return J.length===0?null:J[0]}function u(J){if(J.length===0)return null;var me=J[0],ee=J.pop();if(ee!==me){J[0]=ee;e:for(var P=0,I=J.length,ye=I>>>1;P<ye;){var ke=2*(P+1)-1,be=J[ke],we=ke+1,B=J[we];if(0>c(be,ee))we<I&&0>c(B,be)?(J[P]=B,J[we]=ee,P=we):(J[P]=be,J[ke]=ee,P=ke);else if(we<I&&0>c(B,ee))J[P]=B,J[we]=ee,P=we;else break e}}return me}function c(J,me){var ee=J.sortIndex-me.sortIndex;return ee!==0?ee:J.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;s.unstable_now=function(){return m.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],j=1,b=null,w=3,S=!1,M=!1,D=!1,R=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(J){for(var me=l(y);me!==null;){if(me.callback===null)u(y);else if(me.startTime<=J)u(y),me.sortIndex=me.expirationTime,o(g,me);else break;me=l(y)}}function q(J){if(D=!1,O(J),!M)if(l(g)!==null)M=!0,De(Q);else{var me=l(y);me!==null&&Re(q,me.startTime-J)}}function Q(J,me){M=!1,D&&(D=!1,U(A),A=-1),S=!0;var ee=w;try{for(O(me),b=l(g);b!==null&&(!(b.expirationTime>me)||J&&!Ce());){var P=b.callback;if(typeof P=="function"){b.callback=null,w=b.priorityLevel;var I=P(b.expirationTime<=me);me=s.unstable_now(),typeof I=="function"?b.callback=I:b===l(g)&&u(g),O(me)}else u(g);b=l(g)}if(b!==null)var ye=!0;else{var ke=l(y);ke!==null&&Re(q,ke.startTime-me),ye=!1}return ye}finally{b=null,w=ee,S=!1}}var te=!1,E=null,A=-1,K=5,Z=-1;function Ce(){return!(s.unstable_now()-Z<K)}function je(){if(E!==null){var J=s.unstable_now();Z=J;var me=!0;try{me=E(!0,J)}finally{me?Fe():(te=!1,E=null)}}else te=!1}var Fe;if(typeof T=="function")Fe=function(){T(je)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Ee=Ne.port2;Ne.port1.onmessage=je,Fe=function(){Ee.postMessage(null)}}else Fe=function(){R(je,0)};function De(J){E=J,te||(te=!0,Fe())}function Re(J,me){A=R(function(){J(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(J){J.callback=null},s.unstable_continueExecution=function(){M||S||(M=!0,De(Q))},s.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<J?Math.floor(1e3/J):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_getFirstCallbackNode=function(){return l(g)},s.unstable_next=function(J){switch(w){case 1:case 2:case 3:var me=3;break;default:me=w}var ee=w;w=me;try{return J()}finally{w=ee}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(J,me){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=w;w=J;try{return me()}finally{w=ee}},s.unstable_scheduleCallback=function(J,me,ee){var P=s.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?P+ee:P):ee=P,J){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=ee+I,J={id:j++,callback:me,priorityLevel:J,startTime:ee,expirationTime:I,sortIndex:-1},ee>P?(J.sortIndex=ee,o(y,J),l(g)===null&&J===l(y)&&(D?(U(A),A=-1):D=!0,Re(q,ee-P))):(J.sortIndex=I,o(g,J),M||S||(M=!0,De(Q))),J},s.unstable_shouldYield=Ce,s.unstable_wrapCallback=function(J){var me=w;return function(){var ee=w;w=me;try{return J.apply(this,arguments)}finally{w=ee}}}}(hi)),hi}var vd;function mh(){return vd||(vd=1,mi.exports=fh()),mi.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd;function hh(){if(wd)return Lt;wd=1;var s=Ri(),o=mh();function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,c={};function m(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(c[e]=t,e=0;e<t.length;e++)u.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j={},b={};function w(e){return g.call(b,e)?!0:g.call(j,e)?!1:y.test(e)?b[e]=!0:(j[e]=!0,!1)}function S(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function M(e,t,r,a){if(t===null||typeof t>"u"||S(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function D(e,t,r,a,i,d,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=f}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){R[e]=new D(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];R[t]=new D(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){R[e]=new D(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){R[e]=new D(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){R[e]=new D(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){R[e]=new D(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){R[e]=new D(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){R[e]=new D(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){R[e]=new D(e,5,!1,e.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(U,T);R[t]=new D(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(U,T);R[t]=new D(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(U,T);R[t]=new D(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){R[e]=new D(e,1,!1,e.toLowerCase(),null,!1,!1)}),R.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){R[e]=new D(e,1,!1,e.toLowerCase(),null,!0,!0)});function O(e,t,r,a){var i=R.hasOwnProperty(t)?R[t]:null;(i!==null?i.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(M(t,r,i,a)&&(r=null),a||i===null?w(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,a=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var q=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),te=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),Ce=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),J=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var ee=Object.assign,P;function I(e){if(P===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return`
`+P+e}var ye=!1;function ke(e,t){if(!e||ye)return"";ye=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(F){var a=F}Reflect.construct(e,[],t)}else{try{t.call()}catch(F){a=F}e.call(t.prototype)}else{try{throw Error()}catch(F){a=F}e()}}catch(F){if(F&&a&&typeof F.stack=="string"){for(var i=F.stack.split(`
`),d=a.stack.split(`
`),f=i.length-1,v=d.length-1;1<=f&&0<=v&&i[f]!==d[v];)v--;for(;1<=f&&0<=v;f--,v--)if(i[f]!==d[v]){if(f!==1||v!==1)do if(f--,v--,0>v||i[f]!==d[v]){var k=`
`+i[f].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=f&&0<=v);break}}}finally{ye=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?I(e):""}function be(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=ke(e.type,!1),e;case 11:return e=ke(e.type.render,!1),e;case 1:return e=ke(e.type,!0),e;default:return""}}function we(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case te:return"Portal";case K:return"Profiler";case A:return"StrictMode";case Fe:return"Suspense";case Ne:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ce:return(e.displayName||"Context")+".Consumer";case Z:return(e._context.displayName||"Context")+".Provider";case je:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ee:return t=e.displayName||null,t!==null?t:we(e.type)||"Memo";case De:t=e._payload,e=e._init;try{return we(e(t))}catch{}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ue(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Te(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ut(e){var t=Te(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(f){a=""+f,d.call(this,f)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nt(e){e._valueTracker||(e._valueTracker=ut(e))}function re(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Te(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function ce(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Le(e,t){var r=t.checked;return ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ge(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=ue(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ze(e,t){t=t.checked,t!=null&&O(e,"checked",t,!1)}function Dt(e,t){Ze(e,t);var r=ue(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nr(e,t.type,r):t.hasOwnProperty("defaultValue")&&nr(e,t.type,ue(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pr(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function nr(e,t,r){(t!=="number"||ce(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var an=Array.isArray;function _r(e,t,r,a){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&a&&(e[r].defaultSelected=!0)}else{for(r=""+ue(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ls(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(l(91));return ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sa(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(l(92));if(an(r)){if(1<r.length)throw Error(l(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ue(r)}}function sr(e,t){var r=ue(t.value),a=ue(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Rr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function os(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ln(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?os(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tt,It=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tt=Tt||document.createElement("div"),Tt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pl=["Webkit","ms","Moz","O"];Object.keys(ar).forEach(function(e){Pl.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ar[t]=ar[e]})});function Yt(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ar.hasOwnProperty(e)&&ar[e]?(""+t).trim():t+"px"}function is(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,i=Yt(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,i):e[r]=i}}var aa=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _n(e,t){if(t){if(aa[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(l(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(l(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(t.style!=null&&typeof t.style!="object")throw Error(l(62))}}function us(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rn=null;function Mr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ln=null,lr=null,or=null;function la(e){if(e=Ls(e)){if(typeof Ln!="function")throw Error(l(280));var t=e.stateNode;t&&(t=Pa(t),Ln(e.stateNode,e.type,t))}}function cs(e){lr?or?or.push(e):or=[e]:lr=e}function oa(){if(lr){var e=lr,t=or;if(or=lr=null,la(e),t)for(e=0;e<t.length;e++)la(t[e])}}function ds(e,t){return e(t)}function on(){}var Dr=!1;function ia(e,t,r){if(Dr)return e(t,r);Dr=!0;try{return ds(e,t,r)}finally{Dr=!1,(lr!==null||or!==null)&&(on(),oa())}}function un(e,t){var r=e.stateNode;if(r===null)return null;var a=Pa(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(l(231,t,typeof r));return r}var N=!1;if(p)try{var _={};Object.defineProperty(_,"passive",{get:function(){N=!0}}),window.addEventListener("test",_,_),window.removeEventListener("test",_,_)}catch{N=!1}function z(e,t,r,a,i,d,f,v,k){var F=Array.prototype.slice.call(arguments,3);try{t.apply(r,F)}catch(H){this.onError(H)}}var V=!1,G=null,pe=!1,ve=null,oe={onError:function(e){V=!0,G=e}};function de(e,t,r,a,i,d,f,v,k){V=!1,G=null,z.apply(oe,arguments)}function se(e,t,r,a,i,d,f,v,k){if(de.apply(this,arguments),V){if(V){var F=G;V=!1,G=null}else throw Error(l(198));pe||(pe=!0,ve=F)}}function le(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Pe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $e(e){if(le(e)!==e)throw Error(l(188))}function ct(e){var t=e.alternate;if(!t){if(t=le(e),t===null)throw Error(l(188));return t!==e?null:e}for(var r=e,a=t;;){var i=r.return;if(i===null)break;var d=i.alternate;if(d===null){if(a=i.return,a!==null){r=a;continue}break}if(i.child===d.child){for(d=i.child;d;){if(d===r)return $e(i),e;if(d===a)return $e(i),t;d=d.sibling}throw Error(l(188))}if(r.return!==a.return)r=i,a=d;else{for(var f=!1,v=i.child;v;){if(v===r){f=!0,r=i,a=d;break}if(v===a){f=!0,a=i,r=d;break}v=v.sibling}if(!f){for(v=d.child;v;){if(v===r){f=!0,r=d,a=i;break}if(v===a){f=!0,a=d,r=i;break}v=v.sibling}if(!f)throw Error(l(189))}}if(r.alternate!==a)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?e:t}function We(e){return e=ct(e),e!==null?Ue(e):null}function Ue(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ue(e);if(t!==null)return t;e=e.sibling}return null}var qe=o.unstable_scheduleCallback,hr=o.unstable_cancelCallback,cn=o.unstable_shouldYield,qt=o.unstable_requestPaint,Ie=o.unstable_now,fs=o.unstable_getCurrentPriorityLevel,pr=o.unstable_ImmediatePriority,ir=o.unstable_UserBlockingPriority,gr=o.unstable_NormalPriority,Mn=o.unstable_LowPriority,Oe=o.unstable_IdlePriority,Je=null,gt=null;function dn(e){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Je,e,void 0,(e.current.flags&128)===128)}catch{}}var Be=Math.clz32?Math.clz32:_l,Tr=Math.log,ua=Math.LN2;function _l(e){return e>>>=0,e===0?32:31-(Tr(e)/ua|0)|0}var ca=64,da=4194304;function ms(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fa(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,i=e.suspendedLanes,d=e.pingedLanes,f=r&268435455;if(f!==0){var v=f&~i;v!==0?a=ms(v):(d&=f,d!==0&&(a=ms(d)))}else f=r&~i,f!==0?a=ms(f):d!==0&&(a=ms(d));if(a===0)return 0;if(t!==0&&t!==a&&(t&i)===0&&(i=a&-a,d=t&-t,i>=d||i===16&&(d&4194240)!==0))return t;if((a&4)!==0&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Be(t),i=1<<r,a|=e[r],t&=~i;return a}function Cf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ef(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-Be(d),v=1<<f,k=i[f];k===-1?((v&r)===0||(v&a)!==0)&&(i[f]=Cf(v,t)):k<=t&&(e.expiredLanes|=v),d&=~v}}function Rl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hi(){var e=ca;return ca<<=1,(ca&4194240)===0&&(ca=64),e}function Ll(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Be(t),e[t]=r}function Pf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Be(r),d=1<<i;t[i]=0,a[i]=-1,e[i]=-1,r&=~d}}function Ml(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Be(r),i=1<<a;i&t|e[a]&t&&(e[a]|=t),r&=~i}}var He=0;function Qi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ji,Dl,Yi,qi,Ki,Tl=!1,ma=[],$r=null,Fr=null,zr=null,ps=new Map,gs=new Map,Or=[],_f="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xi(e,t){switch(e){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(t.pointerId)}}function xs(e,t,r,a,i,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:d,targetContainers:[i]},t!==null&&(t=Ls(t),t!==null&&Dl(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Rf(e,t,r,a,i){switch(t){case"focusin":return $r=xs($r,e,t,r,a,i),!0;case"dragenter":return Fr=xs(Fr,e,t,r,a,i),!0;case"mouseover":return zr=xs(zr,e,t,r,a,i),!0;case"pointerover":var d=i.pointerId;return ps.set(d,xs(ps.get(d)||null,e,t,r,a,i)),!0;case"gotpointercapture":return d=i.pointerId,gs.set(d,xs(gs.get(d)||null,e,t,r,a,i)),!0}return!1}function Gi(e){var t=fn(e.target);if(t!==null){var r=le(t);if(r!==null){if(t=r.tag,t===13){if(t=Pe(r),t!==null){e.blockedOn=t,Ki(e.priority,function(){Yi(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ha(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Rn=a,r.target.dispatchEvent(a),Rn=null}else return t=Ls(r),t!==null&&Dl(t),e.blockedOn=r,!1;t.shift()}return!0}function Zi(e,t,r){ha(e)&&r.delete(t)}function Lf(){Tl=!1,$r!==null&&ha($r)&&($r=null),Fr!==null&&ha(Fr)&&(Fr=null),zr!==null&&ha(zr)&&(zr=null),ps.forEach(Zi),gs.forEach(Zi)}function ys(e,t){e.blockedOn===t&&(e.blockedOn=null,Tl||(Tl=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Lf)))}function vs(e){function t(i){return ys(i,e)}if(0<ma.length){ys(ma[0],e);for(var r=1;r<ma.length;r++){var a=ma[r];a.blockedOn===e&&(a.blockedOn=null)}}for($r!==null&&ys($r,e),Fr!==null&&ys(Fr,e),zr!==null&&ys(zr,e),ps.forEach(t),gs.forEach(t),r=0;r<Or.length;r++)a=Or[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<Or.length&&(r=Or[0],r.blockedOn===null);)Gi(r),r.blockedOn===null&&Or.shift()}var Dn=q.ReactCurrentBatchConfig,pa=!0;function Mf(e,t,r,a){var i=He,d=Dn.transition;Dn.transition=null;try{He=1,$l(e,t,r,a)}finally{He=i,Dn.transition=d}}function Df(e,t,r,a){var i=He,d=Dn.transition;Dn.transition=null;try{He=4,$l(e,t,r,a)}finally{He=i,Dn.transition=d}}function $l(e,t,r,a){if(pa){var i=Fl(e,t,r,a);if(i===null)Zl(e,t,a,ga,r),Xi(e,a);else if(Rf(i,e,t,r,a))a.stopPropagation();else if(Xi(e,a),t&4&&-1<_f.indexOf(e)){for(;i!==null;){var d=Ls(i);if(d!==null&&Ji(d),d=Fl(e,t,r,a),d===null&&Zl(e,t,a,ga,r),d===i)break;i=d}i!==null&&a.stopPropagation()}else Zl(e,t,a,null,r)}}var ga=null;function Fl(e,t,r,a){if(ga=null,e=Mr(a),e=fn(e),e!==null)if(t=le(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Pe(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ga=e,null}function eu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fs()){case pr:return 1;case ir:return 4;case gr:case Mn:return 16;case Oe:return 536870912;default:return 16}default:return 16}}var Ur=null,zl=null,xa=null;function tu(){if(xa)return xa;var e,t=zl,r=t.length,a,i="value"in Ur?Ur.value:Ur.textContent,d=i.length;for(e=0;e<r&&t[e]===i[e];e++);var f=r-e;for(a=1;a<=f&&t[r-a]===i[d-a];a++);return xa=i.slice(e,1<a?1-a:void 0)}function ya(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function va(){return!0}function ru(){return!1}function $t(e){function t(r,a,i,d,f){this._reactName=r,this._targetInst=i,this.type=a,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(r=e[v],this[v]=r?r(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?va:ru,this.isPropagationStopped=ru,this}return ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=va)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=va)},persist:function(){},isPersistent:va}),t}var Tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=$t(Tn),ws=ee({},Tn,{view:0,detail:0}),Tf=$t(ws),Ul,Al,js,wa=ee({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==js&&(js&&e.type==="mousemove"?(Ul=e.screenX-js.screenX,Al=e.screenY-js.screenY):Al=Ul=0,js=e),Ul)},movementY:function(e){return"movementY"in e?e.movementY:Al}}),nu=$t(wa),$f=ee({},wa,{dataTransfer:0}),Ff=$t($f),zf=ee({},ws,{relatedTarget:0}),Il=$t(zf),Of=ee({},Tn,{animationName:0,elapsedTime:0,pseudoElement:0}),Uf=$t(Of),Af=ee({},Tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),If=$t(Af),Bf=ee({},Tn,{data:0}),su=$t(Bf),Vf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hf[e])?!!t[e]:!1}function Bl(){return Qf}var Jf=ee({},ws,{key:function(e){if(e.key){var t=Vf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ya(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bl,charCode:function(e){return e.type==="keypress"?ya(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ya(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yf=$t(Jf),qf=ee({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=$t(qf),Kf=ee({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bl}),Xf=$t(Kf),Gf=ee({},Tn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zf=$t(Gf),em=ee({},wa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tm=$t(em),rm=[9,13,27,32],Vl=p&&"CompositionEvent"in window,bs=null;p&&"documentMode"in document&&(bs=document.documentMode);var nm=p&&"TextEvent"in window&&!bs,lu=p&&(!Vl||bs&&8<bs&&11>=bs),ou=" ",iu=!1;function uu(e,t){switch(e){case"keyup":return rm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $n=!1;function sm(e,t){switch(e){case"compositionend":return cu(t);case"keypress":return t.which!==32?null:(iu=!0,ou);case"textInput":return e=t.data,e===ou&&iu?null:e;default:return null}}function am(e,t){if($n)return e==="compositionend"||!Vl&&uu(e,t)?(e=tu(),xa=zl=Ur=null,$n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lu&&t.locale!=="ko"?null:t.data;default:return null}}var lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lm[e.type]:t==="textarea"}function fu(e,t,r,a){cs(a),t=Sa(t,"onChange"),0<t.length&&(r=new Ol("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Ns=null,ks=null;function om(e){Ru(e,0)}function ja(e){var t=An(e);if(re(t))return e}function im(e,t){if(e==="change")return t}var mu=!1;if(p){var Wl;if(p){var Hl="oninput"in document;if(!Hl){var hu=document.createElement("div");hu.setAttribute("oninput","return;"),Hl=typeof hu.oninput=="function"}Wl=Hl}else Wl=!1;mu=Wl&&(!document.documentMode||9<document.documentMode)}function pu(){Ns&&(Ns.detachEvent("onpropertychange",gu),ks=Ns=null)}function gu(e){if(e.propertyName==="value"&&ja(ks)){var t=[];fu(t,ks,e,Mr(e)),ia(om,t)}}function um(e,t,r){e==="focusin"?(pu(),Ns=t,ks=r,Ns.attachEvent("onpropertychange",gu)):e==="focusout"&&pu()}function cm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ja(ks)}function dm(e,t){if(e==="click")return ja(t)}function fm(e,t){if(e==="input"||e==="change")return ja(t)}function mm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:mm;function Ss(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var i=r[a];if(!g.call(t,i)||!Kt(e[i],t[i]))return!1}return!0}function xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yu(e,t){var r=xu(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xu(r)}}function vu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wu(){for(var e=window,t=ce();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ce(e.document)}return t}function Ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hm(e){var t=wu(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&vu(r.ownerDocument.documentElement,r)){if(a!==null&&Ql(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,d=Math.min(a.start,i);a=a.end===void 0?d:Math.min(a.end,i),!e.extend&&d>a&&(i=a,a=d,d=i),i=yu(r,d);var f=yu(r,a);i&&f&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pm=p&&"documentMode"in document&&11>=document.documentMode,Fn=null,Jl=null,Cs=null,Yl=!1;function ju(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yl||Fn==null||Fn!==ce(a)||(a=Fn,"selectionStart"in a&&Ql(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Cs&&Ss(Cs,a)||(Cs=a,a=Sa(Jl,"onSelect"),0<a.length&&(t=new Ol("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Fn)))}function ba(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zn={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},ql={},bu={};p&&(bu=document.createElement("div").style,"AnimationEvent"in window||(delete zn.animationend.animation,delete zn.animationiteration.animation,delete zn.animationstart.animation),"TransitionEvent"in window||delete zn.transitionend.transition);function Na(e){if(ql[e])return ql[e];if(!zn[e])return e;var t=zn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in bu)return ql[e]=t[r];return e}var Nu=Na("animationend"),ku=Na("animationiteration"),Su=Na("animationstart"),Cu=Na("transitionend"),Eu=new Map,Pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Eu.set(e,t),m(t,[e])}for(var Kl=0;Kl<Pu.length;Kl++){var Xl=Pu[Kl],gm=Xl.toLowerCase(),xm=Xl[0].toUpperCase()+Xl.slice(1);Ar(gm,"on"+xm)}Ar(Nu,"onAnimationEnd"),Ar(ku,"onAnimationIteration"),Ar(Su,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Cu,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ym=new Set("cancel close invalid load scroll toggle".split(" ").concat(Es));function _u(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,se(a,t,void 0,e),e.currentTarget=null}function Ru(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],i=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var f=a.length-1;0<=f;f--){var v=a[f],k=v.instance,F=v.currentTarget;if(v=v.listener,k!==d&&i.isPropagationStopped())break e;_u(i,v,F),d=k}else for(f=0;f<a.length;f++){if(v=a[f],k=v.instance,F=v.currentTarget,v=v.listener,k!==d&&i.isPropagationStopped())break e;_u(i,v,F),d=k}}}if(pe)throw e=ve,pe=!1,ve=null,e}function Ke(e,t){var r=t[ao];r===void 0&&(r=t[ao]=new Set);var a=e+"__bubble";r.has(a)||(Lu(t,e,2,!1),r.add(a))}function Gl(e,t,r){var a=0;t&&(a|=4),Lu(r,e,a,t)}var ka="_reactListening"+Math.random().toString(36).slice(2);function Ps(e){if(!e[ka]){e[ka]=!0,u.forEach(function(r){r!=="selectionchange"&&(ym.has(r)||Gl(r,!1,e),Gl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ka]||(t[ka]=!0,Gl("selectionchange",!1,t))}}function Lu(e,t,r,a){switch(eu(t)){case 1:var i=Mf;break;case 4:i=Df;break;default:i=$l}r=i.bind(null,t,r,e),i=void 0,!N||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Zl(e,t,r,a,i){var d=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var v=a.stateNode.containerInfo;if(v===i||v.nodeType===8&&v.parentNode===i)break;if(f===4)for(f=a.return;f!==null;){var k=f.tag;if((k===3||k===4)&&(k=f.stateNode.containerInfo,k===i||k.nodeType===8&&k.parentNode===i))return;f=f.return}for(;v!==null;){if(f=fn(v),f===null)return;if(k=f.tag,k===5||k===6){a=d=f;continue e}v=v.parentNode}}a=a.return}ia(function(){var F=d,H=Mr(r),Y=[];e:{var W=Eu.get(e);if(W!==void 0){var ne=Ol,ie=e;switch(e){case"keypress":if(ya(r)===0)break e;case"keydown":case"keyup":ne=Yf;break;case"focusin":ie="focus",ne=Il;break;case"focusout":ie="blur",ne=Il;break;case"beforeblur":case"afterblur":ne=Il;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Xf;break;case Nu:case ku:case Su:ne=Uf;break;case Cu:ne=Zf;break;case"scroll":ne=Tf;break;case"wheel":ne=tm;break;case"copy":case"cut":case"paste":ne=If;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=au}var fe=(t&4)!==0,at=!fe&&e==="scroll",L=fe?W!==null?W+"Capture":null:W;fe=[];for(var C=F,$;C!==null;){$=C;var X=$.stateNode;if($.tag===5&&X!==null&&($=X,L!==null&&(X=un(C,L),X!=null&&fe.push(_s(C,X,$)))),at)break;C=C.return}0<fe.length&&(W=new ne(W,ie,null,r,H),Y.push({event:W,listeners:fe}))}}if((t&7)===0){e:{if(W=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",W&&r!==Rn&&(ie=r.relatedTarget||r.fromElement)&&(fn(ie)||ie[xr]))break e;if((ne||W)&&(W=H.window===H?H:(W=H.ownerDocument)?W.defaultView||W.parentWindow:window,ne?(ie=r.relatedTarget||r.toElement,ne=F,ie=ie?fn(ie):null,ie!==null&&(at=le(ie),ie!==at||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(ne=null,ie=F),ne!==ie)){if(fe=nu,X="onMouseLeave",L="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(fe=au,X="onPointerLeave",L="onPointerEnter",C="pointer"),at=ne==null?W:An(ne),$=ie==null?W:An(ie),W=new fe(X,C+"leave",ne,r,H),W.target=at,W.relatedTarget=$,X=null,fn(H)===F&&(fe=new fe(L,C+"enter",ie,r,H),fe.target=$,fe.relatedTarget=at,X=fe),at=X,ne&&ie)t:{for(fe=ne,L=ie,C=0,$=fe;$;$=On($))C++;for($=0,X=L;X;X=On(X))$++;for(;0<C-$;)fe=On(fe),C--;for(;0<$-C;)L=On(L),$--;for(;C--;){if(fe===L||L!==null&&fe===L.alternate)break t;fe=On(fe),L=On(L)}fe=null}else fe=null;ne!==null&&Mu(Y,W,ne,fe,!1),ie!==null&&at!==null&&Mu(Y,at,ie,fe,!0)}}e:{if(W=F?An(F):window,ne=W.nodeName&&W.nodeName.toLowerCase(),ne==="select"||ne==="input"&&W.type==="file")var he=im;else if(du(W))if(mu)he=fm;else{he=cm;var ge=um}else(ne=W.nodeName)&&ne.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(he=dm);if(he&&(he=he(e,F))){fu(Y,he,r,H);break e}ge&&ge(e,W,F),e==="focusout"&&(ge=W._wrapperState)&&ge.controlled&&W.type==="number"&&nr(W,"number",W.value)}switch(ge=F?An(F):window,e){case"focusin":(du(ge)||ge.contentEditable==="true")&&(Fn=ge,Jl=F,Cs=null);break;case"focusout":Cs=Jl=Fn=null;break;case"mousedown":Yl=!0;break;case"contextmenu":case"mouseup":case"dragend":Yl=!1,ju(Y,r,H);break;case"selectionchange":if(pm)break;case"keydown":case"keyup":ju(Y,r,H)}var xe;if(Vl)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else $n?uu(e,r)&&(Se="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Se="onCompositionStart");Se&&(lu&&r.locale!=="ko"&&($n||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&$n&&(xe=tu()):(Ur=H,zl="value"in Ur?Ur.value:Ur.textContent,$n=!0)),ge=Sa(F,Se),0<ge.length&&(Se=new su(Se,e,null,r,H),Y.push({event:Se,listeners:ge}),xe?Se.data=xe:(xe=cu(r),xe!==null&&(Se.data=xe)))),(xe=nm?sm(e,r):am(e,r))&&(F=Sa(F,"onBeforeInput"),0<F.length&&(H=new su("onBeforeInput","beforeinput",null,r,H),Y.push({event:H,listeners:F}),H.data=xe))}Ru(Y,t)})}function _s(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Sa(e,t){for(var r=t+"Capture",a=[];e!==null;){var i=e,d=i.stateNode;i.tag===5&&d!==null&&(i=d,d=un(e,r),d!=null&&a.unshift(_s(e,d,i)),d=un(e,t),d!=null&&a.push(_s(e,d,i))),e=e.return}return a}function On(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mu(e,t,r,a,i){for(var d=t._reactName,f=[];r!==null&&r!==a;){var v=r,k=v.alternate,F=v.stateNode;if(k!==null&&k===a)break;v.tag===5&&F!==null&&(v=F,i?(k=un(r,d),k!=null&&f.unshift(_s(r,k,v))):i||(k=un(r,d),k!=null&&f.push(_s(r,k,v)))),r=r.return}f.length!==0&&e.push({event:t,listeners:f})}var vm=/\r\n?/g,wm=/\u0000|\uFFFD/g;function Du(e){return(typeof e=="string"?e:""+e).replace(vm,`
`).replace(wm,"")}function Ca(e,t,r){if(t=Du(t),Du(e)!==t&&r)throw Error(l(425))}function Ea(){}var eo=null,to=null;function ro(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var no=typeof setTimeout=="function"?setTimeout:void 0,jm=typeof clearTimeout=="function"?clearTimeout:void 0,Tu=typeof Promise=="function"?Promise:void 0,bm=typeof queueMicrotask=="function"?queueMicrotask:typeof Tu<"u"?function(e){return Tu.resolve(null).then(e).catch(Nm)}:no;function Nm(e){setTimeout(function(){throw e})}function so(e,t){var r=t,a=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(a===0){e.removeChild(i),vs(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=i}while(r);vs(t)}function Ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $u(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Un=Math.random().toString(36).slice(2),ur="__reactFiber$"+Un,Rs="__reactProps$"+Un,xr="__reactContainer$"+Un,ao="__reactEvents$"+Un,km="__reactListeners$"+Un,Sm="__reactHandles$"+Un;function fn(e){var t=e[ur];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xr]||r[ur]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$u(e);e!==null;){if(r=e[ur])return r;e=$u(e)}return t}e=r,r=e.parentNode}return null}function Ls(e){return e=e[ur]||e[xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function An(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(l(33))}function Pa(e){return e[Rs]||null}var lo=[],In=-1;function Br(e){return{current:e}}function Xe(e){0>In||(e.current=lo[In],lo[In]=null,In--)}function Ye(e,t){In++,lo[In]=e.current,e.current=t}var Vr={},vt=Br(Vr),Ct=Br(!1),mn=Vr;function Bn(e,t){var r=e.type.contextTypes;if(!r)return Vr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var i={},d;for(d in r)i[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Et(e){return e=e.childContextTypes,e!=null}function _a(){Xe(Ct),Xe(vt)}function Fu(e,t,r){if(vt.current!==Vr)throw Error(l(168));Ye(vt,t),Ye(Ct,r)}function zu(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var i in a)if(!(i in t))throw Error(l(108,B(e)||"Unknown",i));return ee({},r,a)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vr,mn=vt.current,Ye(vt,e),Ye(Ct,Ct.current),!0}function Ou(e,t,r){var a=e.stateNode;if(!a)throw Error(l(169));r?(e=zu(e,t,mn),a.__reactInternalMemoizedMergedChildContext=e,Xe(Ct),Xe(vt),Ye(vt,e)):Xe(Ct),Ye(Ct,r)}var yr=null,La=!1,oo=!1;function Uu(e){yr===null?yr=[e]:yr.push(e)}function Cm(e){La=!0,Uu(e)}function Wr(){if(!oo&&yr!==null){oo=!0;var e=0,t=He;try{var r=yr;for(He=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}yr=null,La=!1}catch(i){throw yr!==null&&(yr=yr.slice(e+1)),qe(pr,Wr),i}finally{He=t,oo=!1}}return null}var Vn=[],Wn=0,Ma=null,Da=0,Bt=[],Vt=0,hn=null,vr=1,wr="";function pn(e,t){Vn[Wn++]=Da,Vn[Wn++]=Ma,Ma=e,Da=t}function Au(e,t,r){Bt[Vt++]=vr,Bt[Vt++]=wr,Bt[Vt++]=hn,hn=e;var a=vr;e=wr;var i=32-Be(a)-1;a&=~(1<<i),r+=1;var d=32-Be(t)+i;if(30<d){var f=i-i%5;d=(a&(1<<f)-1).toString(32),a>>=f,i-=f,vr=1<<32-Be(t)+i|r<<i|a,wr=d+e}else vr=1<<d|r<<i|a,wr=e}function io(e){e.return!==null&&(pn(e,1),Au(e,1,0))}function uo(e){for(;e===Ma;)Ma=Vn[--Wn],Vn[Wn]=null,Da=Vn[--Wn],Vn[Wn]=null;for(;e===hn;)hn=Bt[--Vt],Bt[Vt]=null,wr=Bt[--Vt],Bt[Vt]=null,vr=Bt[--Vt],Bt[Vt]=null}var Ft=null,zt=null,et=!1,Xt=null;function Iu(e,t){var r=Jt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Bu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,zt=Ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hn!==null?{id:vr,overflow:wr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Jt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ft=e,zt=null,!0):!1;default:return!1}}function co(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fo(e){if(et){var t=zt;if(t){var r=t;if(!Bu(e,t)){if(co(e))throw Error(l(418));t=Ir(r.nextSibling);var a=Ft;t&&Bu(e,t)?Iu(a,r):(e.flags=e.flags&-4097|2,et=!1,Ft=e)}}else{if(co(e))throw Error(l(418));e.flags=e.flags&-4097|2,et=!1,Ft=e}}}function Vu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function Ta(e){if(e!==Ft)return!1;if(!et)return Vu(e),et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ro(e.type,e.memoizedProps)),t&&(t=zt)){if(co(e))throw Wu(),Error(l(418));for(;t;)Iu(e,t),t=Ir(t.nextSibling)}if(Vu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){zt=Ir(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=Ft?Ir(e.stateNode.nextSibling):null;return!0}function Wu(){for(var e=zt;e;)e=Ir(e.nextSibling)}function Hn(){zt=Ft=null,et=!1}function mo(e){Xt===null?Xt=[e]:Xt.push(e)}var Em=q.ReactCurrentBatchConfig;function Ms(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(l(309));var a=r.stateNode}if(!a)throw Error(l(147,e));var i=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(f){var v=i.refs;f===null?delete v[d]:v[d]=f},t._stringRef=d,t)}if(typeof e!="string")throw Error(l(284));if(!r._owner)throw Error(l(290,e))}return e}function $a(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hu(e){var t=e._init;return t(e._payload)}function Qu(e){function t(L,C){if(e){var $=L.deletions;$===null?(L.deletions=[C],L.flags|=16):$.push(C)}}function r(L,C){if(!e)return null;for(;C!==null;)t(L,C),C=C.sibling;return null}function a(L,C){for(L=new Map;C!==null;)C.key!==null?L.set(C.key,C):L.set(C.index,C),C=C.sibling;return L}function i(L,C){return L=Gr(L,C),L.index=0,L.sibling=null,L}function d(L,C,$){return L.index=$,e?($=L.alternate,$!==null?($=$.index,$<C?(L.flags|=2,C):$):(L.flags|=2,C)):(L.flags|=1048576,C)}function f(L){return e&&L.alternate===null&&(L.flags|=2),L}function v(L,C,$,X){return C===null||C.tag!==6?(C=si($,L.mode,X),C.return=L,C):(C=i(C,$),C.return=L,C)}function k(L,C,$,X){var he=$.type;return he===E?H(L,C,$.props.children,X,$.key):C!==null&&(C.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===De&&Hu(he)===C.type)?(X=i(C,$.props),X.ref=Ms(L,C,$),X.return=L,X):(X=al($.type,$.key,$.props,null,L.mode,X),X.ref=Ms(L,C,$),X.return=L,X)}function F(L,C,$,X){return C===null||C.tag!==4||C.stateNode.containerInfo!==$.containerInfo||C.stateNode.implementation!==$.implementation?(C=ai($,L.mode,X),C.return=L,C):(C=i(C,$.children||[]),C.return=L,C)}function H(L,C,$,X,he){return C===null||C.tag!==7?(C=Nn($,L.mode,X,he),C.return=L,C):(C=i(C,$),C.return=L,C)}function Y(L,C,$){if(typeof C=="string"&&C!==""||typeof C=="number")return C=si(""+C,L.mode,$),C.return=L,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Q:return $=al(C.type,C.key,C.props,null,L.mode,$),$.ref=Ms(L,null,C),$.return=L,$;case te:return C=ai(C,L.mode,$),C.return=L,C;case De:var X=C._init;return Y(L,X(C._payload),$)}if(an(C)||me(C))return C=Nn(C,L.mode,$,null),C.return=L,C;$a(L,C)}return null}function W(L,C,$,X){var he=C!==null?C.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return he!==null?null:v(L,C,""+$,X);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Q:return $.key===he?k(L,C,$,X):null;case te:return $.key===he?F(L,C,$,X):null;case De:return he=$._init,W(L,C,he($._payload),X)}if(an($)||me($))return he!==null?null:H(L,C,$,X,null);$a(L,$)}return null}function ne(L,C,$,X,he){if(typeof X=="string"&&X!==""||typeof X=="number")return L=L.get($)||null,v(C,L,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Q:return L=L.get(X.key===null?$:X.key)||null,k(C,L,X,he);case te:return L=L.get(X.key===null?$:X.key)||null,F(C,L,X,he);case De:var ge=X._init;return ne(L,C,$,ge(X._payload),he)}if(an(X)||me(X))return L=L.get($)||null,H(C,L,X,he,null);$a(C,X)}return null}function ie(L,C,$,X){for(var he=null,ge=null,xe=C,Se=C=0,pt=null;xe!==null&&Se<$.length;Se++){xe.index>Se?(pt=xe,xe=null):pt=xe.sibling;var Ve=W(L,xe,$[Se],X);if(Ve===null){xe===null&&(xe=pt);break}e&&xe&&Ve.alternate===null&&t(L,xe),C=d(Ve,C,Se),ge===null?he=Ve:ge.sibling=Ve,ge=Ve,xe=pt}if(Se===$.length)return r(L,xe),et&&pn(L,Se),he;if(xe===null){for(;Se<$.length;Se++)xe=Y(L,$[Se],X),xe!==null&&(C=d(xe,C,Se),ge===null?he=xe:ge.sibling=xe,ge=xe);return et&&pn(L,Se),he}for(xe=a(L,xe);Se<$.length;Se++)pt=ne(xe,L,Se,$[Se],X),pt!==null&&(e&&pt.alternate!==null&&xe.delete(pt.key===null?Se:pt.key),C=d(pt,C,Se),ge===null?he=pt:ge.sibling=pt,ge=pt);return e&&xe.forEach(function(Zr){return t(L,Zr)}),et&&pn(L,Se),he}function fe(L,C,$,X){var he=me($);if(typeof he!="function")throw Error(l(150));if($=he.call($),$==null)throw Error(l(151));for(var ge=he=null,xe=C,Se=C=0,pt=null,Ve=$.next();xe!==null&&!Ve.done;Se++,Ve=$.next()){xe.index>Se?(pt=xe,xe=null):pt=xe.sibling;var Zr=W(L,xe,Ve.value,X);if(Zr===null){xe===null&&(xe=pt);break}e&&xe&&Zr.alternate===null&&t(L,xe),C=d(Zr,C,Se),ge===null?he=Zr:ge.sibling=Zr,ge=Zr,xe=pt}if(Ve.done)return r(L,xe),et&&pn(L,Se),he;if(xe===null){for(;!Ve.done;Se++,Ve=$.next())Ve=Y(L,Ve.value,X),Ve!==null&&(C=d(Ve,C,Se),ge===null?he=Ve:ge.sibling=Ve,ge=Ve);return et&&pn(L,Se),he}for(xe=a(L,xe);!Ve.done;Se++,Ve=$.next())Ve=ne(xe,L,Se,Ve.value,X),Ve!==null&&(e&&Ve.alternate!==null&&xe.delete(Ve.key===null?Se:Ve.key),C=d(Ve,C,Se),ge===null?he=Ve:ge.sibling=Ve,ge=Ve);return e&&xe.forEach(function(lh){return t(L,lh)}),et&&pn(L,Se),he}function at(L,C,$,X){if(typeof $=="object"&&$!==null&&$.type===E&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Q:e:{for(var he=$.key,ge=C;ge!==null;){if(ge.key===he){if(he=$.type,he===E){if(ge.tag===7){r(L,ge.sibling),C=i(ge,$.props.children),C.return=L,L=C;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===De&&Hu(he)===ge.type){r(L,ge.sibling),C=i(ge,$.props),C.ref=Ms(L,ge,$),C.return=L,L=C;break e}r(L,ge);break}else t(L,ge);ge=ge.sibling}$.type===E?(C=Nn($.props.children,L.mode,X,$.key),C.return=L,L=C):(X=al($.type,$.key,$.props,null,L.mode,X),X.ref=Ms(L,C,$),X.return=L,L=X)}return f(L);case te:e:{for(ge=$.key;C!==null;){if(C.key===ge)if(C.tag===4&&C.stateNode.containerInfo===$.containerInfo&&C.stateNode.implementation===$.implementation){r(L,C.sibling),C=i(C,$.children||[]),C.return=L,L=C;break e}else{r(L,C);break}else t(L,C);C=C.sibling}C=ai($,L.mode,X),C.return=L,L=C}return f(L);case De:return ge=$._init,at(L,C,ge($._payload),X)}if(an($))return ie(L,C,$,X);if(me($))return fe(L,C,$,X);$a(L,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,C!==null&&C.tag===6?(r(L,C.sibling),C=i(C,$),C.return=L,L=C):(r(L,C),C=si($,L.mode,X),C.return=L,L=C),f(L)):r(L,C)}return at}var Qn=Qu(!0),Ju=Qu(!1),Fa=Br(null),za=null,Jn=null,ho=null;function po(){ho=Jn=za=null}function go(e){var t=Fa.current;Xe(Fa),e._currentValue=t}function xo(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Yn(e,t){za=e,ho=Jn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Pt=!0),e.firstContext=null)}function Wt(e){var t=e._currentValue;if(ho!==e)if(e={context:e,memoizedValue:t,next:null},Jn===null){if(za===null)throw Error(l(308));Jn=e,za.dependencies={lanes:0,firstContext:e}}else Jn=Jn.next=e;return t}var gn=null;function yo(e){gn===null?gn=[e]:gn.push(e)}function Yu(e,t,r,a){var i=t.interleaved;return i===null?(r.next=r,yo(t)):(r.next=i.next,i.next=r),t.interleaved=r,jr(e,a)}function jr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Hr=!1;function vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function br(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qr(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ae&2)!==0){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,jr(e,r)}return i=a.interleaved,i===null?(t.next=t,yo(a)):(t.next=i.next,i.next=t),a.interleaved=t,jr(e,r)}function Oa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Ml(e,r)}}function Ku(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var i=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?i=d=f:d=d.next=f,r=r.next}while(r!==null);d===null?i=d=t:d=d.next=t}else i=d=t;r={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ua(e,t,r,a){var i=e.updateQueue;Hr=!1;var d=i.firstBaseUpdate,f=i.lastBaseUpdate,v=i.shared.pending;if(v!==null){i.shared.pending=null;var k=v,F=k.next;k.next=null,f===null?d=F:f.next=F,f=k;var H=e.alternate;H!==null&&(H=H.updateQueue,v=H.lastBaseUpdate,v!==f&&(v===null?H.firstBaseUpdate=F:v.next=F,H.lastBaseUpdate=k))}if(d!==null){var Y=i.baseState;f=0,H=F=k=null,v=d;do{var W=v.lane,ne=v.eventTime;if((a&W)===W){H!==null&&(H=H.next={eventTime:ne,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var ie=e,fe=v;switch(W=t,ne=r,fe.tag){case 1:if(ie=fe.payload,typeof ie=="function"){Y=ie.call(ne,Y,W);break e}Y=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=fe.payload,W=typeof ie=="function"?ie.call(ne,Y,W):ie,W==null)break e;Y=ee({},Y,W);break e;case 2:Hr=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,W=i.effects,W===null?i.effects=[v]:W.push(v))}else ne={eventTime:ne,lane:W,tag:v.tag,payload:v.payload,callback:v.callback,next:null},H===null?(F=H=ne,k=Y):H=H.next=ne,f|=W;if(v=v.next,v===null){if(v=i.shared.pending,v===null)break;W=v,v=W.next,W.next=null,i.lastBaseUpdate=W,i.shared.pending=null}}while(!0);if(H===null&&(k=Y),i.baseState=k,i.firstBaseUpdate=F,i.lastBaseUpdate=H,t=i.shared.interleaved,t!==null){i=t;do f|=i.lane,i=i.next;while(i!==t)}else d===null&&(i.shared.lanes=0);vn|=f,e.lanes=f,e.memoizedState=Y}}function Xu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],i=a.callback;if(i!==null){if(a.callback=null,a=r,typeof i!="function")throw Error(l(191,i));i.call(a)}}}var Ds={},cr=Br(Ds),Ts=Br(Ds),$s=Br(Ds);function xn(e){if(e===Ds)throw Error(l(174));return e}function wo(e,t){switch(Ye($s,t),Ye(Ts,e),Ye(cr,Ds),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ln(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ln(t,e)}Xe(cr),Ye(cr,t)}function qn(){Xe(cr),Xe(Ts),Xe($s)}function Gu(e){xn($s.current);var t=xn(cr.current),r=ln(t,e.type);t!==r&&(Ye(Ts,e),Ye(cr,r))}function jo(e){Ts.current===e&&(Xe(cr),Xe(Ts))}var rt=Br(0);function Aa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bo=[];function No(){for(var e=0;e<bo.length;e++)bo[e]._workInProgressVersionPrimary=null;bo.length=0}var Ia=q.ReactCurrentDispatcher,ko=q.ReactCurrentBatchConfig,yn=0,nt=null,dt=null,mt=null,Ba=!1,Fs=!1,zs=0,Pm=0;function wt(){throw Error(l(321))}function So(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Kt(e[r],t[r]))return!1;return!0}function Co(e,t,r,a,i,d){if(yn=d,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ia.current=e===null||e.memoizedState===null?Mm:Dm,e=r(a,i),Fs){d=0;do{if(Fs=!1,zs=0,25<=d)throw Error(l(301));d+=1,mt=dt=null,t.updateQueue=null,Ia.current=Tm,e=r(a,i)}while(Fs)}if(Ia.current=Ha,t=dt!==null&&dt.next!==null,yn=0,mt=dt=nt=null,Ba=!1,t)throw Error(l(300));return e}function Eo(){var e=zs!==0;return zs=0,e}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?nt.memoizedState=mt=e:mt=mt.next=e,mt}function Ht(){if(dt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var t=mt===null?nt.memoizedState:mt.next;if(t!==null)mt=t,dt=e;else{if(e===null)throw Error(l(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},mt===null?nt.memoizedState=mt=e:mt=mt.next=e}return mt}function Os(e,t){return typeof t=="function"?t(e):t}function Po(e){var t=Ht(),r=t.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=e;var a=dt,i=a.baseQueue,d=r.pending;if(d!==null){if(i!==null){var f=i.next;i.next=d.next,d.next=f}a.baseQueue=i=d,r.pending=null}if(i!==null){d=i.next,a=a.baseState;var v=f=null,k=null,F=d;do{var H=F.lane;if((yn&H)===H)k!==null&&(k=k.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),a=F.hasEagerState?F.eagerState:e(a,F.action);else{var Y={lane:H,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};k===null?(v=k=Y,f=a):k=k.next=Y,nt.lanes|=H,vn|=H}F=F.next}while(F!==null&&F!==d);k===null?f=a:k.next=v,Kt(a,t.memoizedState)||(Pt=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=k,r.lastRenderedState=a}if(e=r.interleaved,e!==null){i=e;do d=i.lane,nt.lanes|=d,vn|=d,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _o(e){var t=Ht(),r=t.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=e;var a=r.dispatch,i=r.pending,d=t.memoizedState;if(i!==null){r.pending=null;var f=i=i.next;do d=e(d,f.action),f=f.next;while(f!==i);Kt(d,t.memoizedState)||(Pt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,a]}function Zu(){}function ec(e,t){var r=nt,a=Ht(),i=t(),d=!Kt(a.memoizedState,i);if(d&&(a.memoizedState=i,Pt=!0),a=a.queue,Ro(nc.bind(null,r,a,e),[e]),a.getSnapshot!==t||d||mt!==null&&mt.memoizedState.tag&1){if(r.flags|=2048,Us(9,rc.bind(null,r,a,i,t),void 0,null),ht===null)throw Error(l(349));(yn&30)!==0||tc(r,t,i)}return i}function tc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function rc(e,t,r,a){t.value=r,t.getSnapshot=a,sc(t)&&ac(e)}function nc(e,t,r){return r(function(){sc(t)&&ac(e)})}function sc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Kt(e,r)}catch{return!0}}function ac(e){var t=jr(e,1);t!==null&&tr(t,e,1,-1)}function lc(e){var t=dr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:e},t.queue=e,e=e.dispatch=Lm.bind(null,nt,e),[t.memoizedState,e]}function Us(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function oc(){return Ht().memoizedState}function Va(e,t,r,a){var i=dr();nt.flags|=e,i.memoizedState=Us(1|t,r,void 0,a===void 0?null:a)}function Wa(e,t,r,a){var i=Ht();a=a===void 0?null:a;var d=void 0;if(dt!==null){var f=dt.memoizedState;if(d=f.destroy,a!==null&&So(a,f.deps)){i.memoizedState=Us(t,r,d,a);return}}nt.flags|=e,i.memoizedState=Us(1|t,r,d,a)}function ic(e,t){return Va(8390656,8,e,t)}function Ro(e,t){return Wa(2048,8,e,t)}function uc(e,t){return Wa(4,2,e,t)}function cc(e,t){return Wa(4,4,e,t)}function dc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fc(e,t,r){return r=r!=null?r.concat([e]):null,Wa(4,4,dc.bind(null,t,e),r)}function Lo(){}function mc(e,t){var r=Ht();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&So(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function hc(e,t){var r=Ht();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&So(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function pc(e,t,r){return(yn&21)===0?(e.baseState&&(e.baseState=!1,Pt=!0),e.memoizedState=r):(Kt(r,t)||(r=Hi(),nt.lanes|=r,vn|=r,e.baseState=!0),t)}function _m(e,t){var r=He;He=r!==0&&4>r?r:4,e(!0);var a=ko.transition;ko.transition={};try{e(!1),t()}finally{He=r,ko.transition=a}}function gc(){return Ht().memoizedState}function Rm(e,t,r){var a=Kr(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},xc(e))yc(t,r);else if(r=Yu(e,t,r,a),r!==null){var i=St();tr(r,e,a,i),vc(r,t,a)}}function Lm(e,t,r){var a=Kr(e),i={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(xc(e))yc(t,i);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var f=t.lastRenderedState,v=d(f,r);if(i.hasEagerState=!0,i.eagerState=v,Kt(v,f)){var k=t.interleaved;k===null?(i.next=i,yo(t)):(i.next=k.next,k.next=i),t.interleaved=i;return}}catch{}finally{}r=Yu(e,t,i,a),r!==null&&(i=St(),tr(r,e,a,i),vc(r,t,a))}}function xc(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function yc(e,t){Fs=Ba=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function vc(e,t,r){if((r&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Ml(e,r)}}var Ha={readContext:Wt,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},Mm={readContext:Wt,useCallback:function(e,t){return dr().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:ic,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Va(4194308,4,dc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var r=dr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=dr();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Rm.bind(null,nt,e),[a.memoizedState,e]},useRef:function(e){var t=dr();return e={current:e},t.memoizedState=e},useState:lc,useDebugValue:Lo,useDeferredValue:function(e){return dr().memoizedState=e},useTransition:function(){var e=lc(!1),t=e[0];return e=_m.bind(null,e[1]),dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=nt,i=dr();if(et){if(r===void 0)throw Error(l(407));r=r()}else{if(r=t(),ht===null)throw Error(l(349));(yn&30)!==0||tc(a,t,r)}i.memoizedState=r;var d={value:r,getSnapshot:t};return i.queue=d,ic(nc.bind(null,a,d,e),[e]),a.flags|=2048,Us(9,rc.bind(null,a,d,r,t),void 0,null),r},useId:function(){var e=dr(),t=ht.identifierPrefix;if(et){var r=wr,a=vr;r=(a&~(1<<32-Be(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=zs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Pm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Dm={readContext:Wt,useCallback:mc,useContext:Wt,useEffect:Ro,useImperativeHandle:fc,useInsertionEffect:uc,useLayoutEffect:cc,useMemo:hc,useReducer:Po,useRef:oc,useState:function(){return Po(Os)},useDebugValue:Lo,useDeferredValue:function(e){var t=Ht();return pc(t,dt.memoizedState,e)},useTransition:function(){var e=Po(Os)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:ec,useId:gc,unstable_isNewReconciler:!1},Tm={readContext:Wt,useCallback:mc,useContext:Wt,useEffect:Ro,useImperativeHandle:fc,useInsertionEffect:uc,useLayoutEffect:cc,useMemo:hc,useReducer:_o,useRef:oc,useState:function(){return _o(Os)},useDebugValue:Lo,useDeferredValue:function(e){var t=Ht();return dt===null?t.memoizedState=e:pc(t,dt.memoizedState,e)},useTransition:function(){var e=_o(Os)[0],t=Ht().memoizedState;return[e,t]},useMutableSource:Zu,useSyncExternalStore:ec,useId:gc,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=ee({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Mo(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:ee({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Qa={isMounted:function(e){return(e=e._reactInternals)?le(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=St(),i=Kr(e),d=br(a,i);d.payload=t,r!=null&&(d.callback=r),t=Qr(e,d,i),t!==null&&(tr(t,e,i,a),Oa(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=St(),i=Kr(e),d=br(a,i);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Qr(e,d,i),t!==null&&(tr(t,e,i,a),Oa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=St(),a=Kr(e),i=br(r,a);i.tag=2,t!=null&&(i.callback=t),t=Qr(e,i,a),t!==null&&(tr(t,e,a,r),Oa(t,e,a))}};function wc(e,t,r,a,i,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,f):t.prototype&&t.prototype.isPureReactComponent?!Ss(r,a)||!Ss(i,d):!0}function jc(e,t,r){var a=!1,i=Vr,d=t.contextType;return typeof d=="object"&&d!==null?d=Wt(d):(i=Et(t)?mn:vt.current,a=t.contextTypes,d=(a=a!=null)?Bn(e,i):Vr),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qa,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=d),t}function bc(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Qa.enqueueReplaceState(t,t.state,null)}function Do(e,t,r,a){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},vo(e);var d=t.contextType;typeof d=="object"&&d!==null?i.context=Wt(d):(d=Et(t)?mn:vt.current,i.context=Bn(e,d)),i.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Mo(e,t,d,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Qa.enqueueReplaceState(i,i.state,null),Ua(e,r,i,a),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Kn(e,t){try{var r="",a=t;do r+=be(a),a=a.return;while(a);var i=r}catch(d){i=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:i,digest:null}}function To(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function $o(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $m=typeof WeakMap=="function"?WeakMap:Map;function Nc(e,t,r){r=br(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Za||(Za=!0,Ko=a),$o(e,t)},r}function kc(e,t,r){r=br(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var i=t.value;r.payload=function(){return a(i)},r.callback=function(){$o(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){$o(e,t),typeof a!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),r}function Sc(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new $m;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(r)||(i.add(r),e=qm.bind(null,e,t,r),t.then(e,e))}function Cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ec(e,t,r,a,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=br(-1,1),t.tag=2,Qr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Fm=q.ReactCurrentOwner,Pt=!1;function kt(e,t,r,a){t.child=e===null?Ju(t,null,r,a):Qn(t,e.child,r,a)}function Pc(e,t,r,a,i){r=r.render;var d=t.ref;return Yn(t,i),a=Co(e,t,r,a,d,i),r=Eo(),e!==null&&!Pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nr(e,t,i)):(et&&r&&io(t),t.flags|=1,kt(e,t,a,i),t.child)}function _c(e,t,r,a,i){if(e===null){var d=r.type;return typeof d=="function"&&!ni(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,Rc(e,t,d,a,i)):(e=al(r.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&i)===0){var f=d.memoizedProps;if(r=r.compare,r=r!==null?r:Ss,r(f,a)&&e.ref===t.ref)return Nr(e,t,i)}return t.flags|=1,e=Gr(d,a),e.ref=t.ref,e.return=t,t.child=e}function Rc(e,t,r,a,i){if(e!==null){var d=e.memoizedProps;if(Ss(d,a)&&e.ref===t.ref)if(Pt=!1,t.pendingProps=a=d,(e.lanes&i)!==0)(e.flags&131072)!==0&&(Pt=!0);else return t.lanes=e.lanes,Nr(e,t,i)}return Fo(e,t,r,a,i)}function Lc(e,t,r){var a=t.pendingProps,i=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Gn,Ot),Ot|=r;else{if((r&1073741824)===0)return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ye(Gn,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:r,Ye(Gn,Ot),Ot|=a}else d!==null?(a=d.baseLanes|r,t.memoizedState=null):a=r,Ye(Gn,Ot),Ot|=a;return kt(e,t,i,r),t.child}function Mc(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Fo(e,t,r,a,i){var d=Et(r)?mn:vt.current;return d=Bn(t,d),Yn(t,i),r=Co(e,t,r,a,d,i),a=Eo(),e!==null&&!Pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nr(e,t,i)):(et&&a&&io(t),t.flags|=1,kt(e,t,r,i),t.child)}function Dc(e,t,r,a,i){if(Et(r)){var d=!0;Ra(t)}else d=!1;if(Yn(t,i),t.stateNode===null)Ya(e,t),jc(t,r,a),Do(t,r,a,i),a=!0;else if(e===null){var f=t.stateNode,v=t.memoizedProps;f.props=v;var k=f.context,F=r.contextType;typeof F=="object"&&F!==null?F=Wt(F):(F=Et(r)?mn:vt.current,F=Bn(t,F));var H=r.getDerivedStateFromProps,Y=typeof H=="function"||typeof f.getSnapshotBeforeUpdate=="function";Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==a||k!==F)&&bc(t,f,a,F),Hr=!1;var W=t.memoizedState;f.state=W,Ua(t,a,f,i),k=t.memoizedState,v!==a||W!==k||Ct.current||Hr?(typeof H=="function"&&(Mo(t,r,H,a),k=t.memoizedState),(v=Hr||wc(t,r,v,a,W,k,F))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=k),f.props=a,f.state=k,f.context=F,a=v):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,qu(e,t),v=t.memoizedProps,F=t.type===t.elementType?v:Gt(t.type,v),f.props=F,Y=t.pendingProps,W=f.context,k=r.contextType,typeof k=="object"&&k!==null?k=Wt(k):(k=Et(r)?mn:vt.current,k=Bn(t,k));var ne=r.getDerivedStateFromProps;(H=typeof ne=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Y||W!==k)&&bc(t,f,a,k),Hr=!1,W=t.memoizedState,f.state=W,Ua(t,a,f,i);var ie=t.memoizedState;v!==Y||W!==ie||Ct.current||Hr?(typeof ne=="function"&&(Mo(t,r,ne,a),ie=t.memoizedState),(F=Hr||wc(t,r,F,a,W,ie,k)||!1)?(H||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,ie,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,ie,k)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ie),f.props=a,f.state=ie,f.context=k,a=F):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&W===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&W===e.memoizedState||(t.flags|=1024),a=!1)}return zo(e,t,r,a,d,i)}function zo(e,t,r,a,i,d){Mc(e,t);var f=(t.flags&128)!==0;if(!a&&!f)return i&&Ou(t,r,!1),Nr(e,t,d);a=t.stateNode,Fm.current=t;var v=f&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&f?(t.child=Qn(t,e.child,null,d),t.child=Qn(t,null,v,d)):kt(e,t,v,d),t.memoizedState=a.state,i&&Ou(t,r,!0),t.child}function Tc(e){var t=e.stateNode;t.pendingContext?Fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fu(e,t.context,!1),wo(e,t.containerInfo)}function $c(e,t,r,a,i){return Hn(),mo(i),t.flags|=256,kt(e,t,r,a),t.child}var Oo={dehydrated:null,treeContext:null,retryLane:0};function Uo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fc(e,t,r){var a=t.pendingProps,i=rt.current,d=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(i&2)!==0),v?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ye(rt,i&1),e===null)return fo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(f=a.children,e=a.fallback,d?(a=t.mode,d=t.child,f={mode:"hidden",children:f},(a&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=f):d=ll(f,a,0,null),e=Nn(e,a,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Uo(r),t.memoizedState=Oo,e):Ao(t,f));if(i=e.memoizedState,i!==null&&(v=i.dehydrated,v!==null))return zm(e,t,f,a,v,i,r);if(d){d=a.fallback,f=t.mode,i=e.child,v=i.sibling;var k={mode:"hidden",children:a.children};return(f&1)===0&&t.child!==i?(a=t.child,a.childLanes=0,a.pendingProps=k,t.deletions=null):(a=Gr(i,k),a.subtreeFlags=i.subtreeFlags&14680064),v!==null?d=Gr(v,d):(d=Nn(d,f,r,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,f=e.child.memoizedState,f=f===null?Uo(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~r,t.memoizedState=Oo,a}return d=e.child,e=d.sibling,a=Gr(d,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ao(e,t){return t=ll({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ja(e,t,r,a){return a!==null&&mo(a),Qn(t,e.child,null,r),e=Ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zm(e,t,r,a,i,d,f){if(r)return t.flags&256?(t.flags&=-257,a=To(Error(l(422))),Ja(e,t,f,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,i=t.mode,a=ll({mode:"visible",children:a.children},i,0,null),d=Nn(d,i,f,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,(t.mode&1)!==0&&Qn(t,e.child,null,f),t.child.memoizedState=Uo(f),t.memoizedState=Oo,d);if((t.mode&1)===0)return Ja(e,t,f,null);if(i.data==="$!"){if(a=i.nextSibling&&i.nextSibling.dataset,a)var v=a.dgst;return a=v,d=Error(l(419)),a=To(d,a,void 0),Ja(e,t,f,a)}if(v=(f&e.childLanes)!==0,Pt||v){if(a=ht,a!==null){switch(f&-f){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(a.suspendedLanes|f))!==0?0:i,i!==0&&i!==d.retryLane&&(d.retryLane=i,jr(e,i),tr(a,e,i,-1))}return ri(),a=To(Error(l(421))),Ja(e,t,f,a)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Km.bind(null,e),i._reactRetry=t,null):(e=d.treeContext,zt=Ir(i.nextSibling),Ft=t,et=!0,Xt=null,e!==null&&(Bt[Vt++]=vr,Bt[Vt++]=wr,Bt[Vt++]=hn,vr=e.id,wr=e.overflow,hn=t),t=Ao(t,a.children),t.flags|=4096,t)}function zc(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),xo(e.return,t,r)}function Io(e,t,r,a,i){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:i}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=r,d.tailMode=i)}function Oc(e,t,r){var a=t.pendingProps,i=a.revealOrder,d=a.tail;if(kt(e,t,a.children,r),a=rt.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zc(e,r,t);else if(e.tag===19)zc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ye(rt,a),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Aa(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Io(t,!1,i,r,d);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Aa(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Io(t,!0,r,null,d);break;case"together":Io(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ya(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vn|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,r=Gr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Gr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Om(e,t,r){switch(t.tag){case 3:Tc(t),Hn();break;case 5:Gu(t);break;case 1:Et(t.type)&&Ra(t);break;case 4:wo(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,i=t.memoizedProps.value;Ye(Fa,a._currentValue),a._currentValue=i;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Ye(rt,rt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Fc(e,t,r):(Ye(rt,rt.current&1),e=Nr(e,t,r),e!==null?e.sibling:null);Ye(rt,rt.current&1);break;case 19:if(a=(r&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Oc(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(rt,rt.current),a)break;return null;case 22:case 23:return t.lanes=0,Lc(e,t,r)}return Nr(e,t,r)}var Uc,Bo,Ac,Ic;Uc=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Bo=function(){},Ac=function(e,t,r,a){var i=e.memoizedProps;if(i!==a){e=t.stateNode,xn(cr.current);var d=null;switch(r){case"input":i=Le(e,i),a=Le(e,a),d=[];break;case"select":i=ee({},i,{value:void 0}),a=ee({},a,{value:void 0}),d=[];break;case"textarea":i=ls(e,i),a=ls(e,a),d=[];break;default:typeof i.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Ea)}_n(r,a);var f;r=null;for(F in i)if(!a.hasOwnProperty(F)&&i.hasOwnProperty(F)&&i[F]!=null)if(F==="style"){var v=i[F];for(f in v)v.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(c.hasOwnProperty(F)?d||(d=[]):(d=d||[]).push(F,null));for(F in a){var k=a[F];if(v=i!=null?i[F]:void 0,a.hasOwnProperty(F)&&k!==v&&(k!=null||v!=null))if(F==="style")if(v){for(f in v)!v.hasOwnProperty(f)||k&&k.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in k)k.hasOwnProperty(f)&&v[f]!==k[f]&&(r||(r={}),r[f]=k[f])}else r||(d||(d=[]),d.push(F,r)),r=k;else F==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,v=v?v.__html:void 0,k!=null&&v!==k&&(d=d||[]).push(F,k)):F==="children"?typeof k!="string"&&typeof k!="number"||(d=d||[]).push(F,""+k):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(c.hasOwnProperty(F)?(k!=null&&F==="onScroll"&&Ke("scroll",e),d||v===k||(d=[])):(d=d||[]).push(F,k))}r&&(d=d||[]).push("style",r);var F=d;(t.updateQueue=F)&&(t.flags|=4)}},Ic=function(e,t,r,a){r!==a&&(t.flags|=4)};function As(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags&14680064,a|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function Um(e,t,r){var a=t.pendingProps;switch(uo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return Et(t.type)&&_a(),jt(t),null;case 3:return a=t.stateNode,qn(),Xe(Ct),Xe(vt),No(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ta(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Xt!==null&&(Zo(Xt),Xt=null))),Bo(e,t),jt(t),null;case 5:jo(t);var i=xn($s.current);if(r=t.type,e!==null&&t.stateNode!=null)Ac(e,t,r,a,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(l(166));return jt(t),null}if(e=xn(cr.current),Ta(t)){a=t.stateNode,r=t.type;var d=t.memoizedProps;switch(a[ur]=t,a[Rs]=d,e=(t.mode&1)!==0,r){case"dialog":Ke("cancel",a),Ke("close",a);break;case"iframe":case"object":case"embed":Ke("load",a);break;case"video":case"audio":for(i=0;i<Es.length;i++)Ke(Es[i],a);break;case"source":Ke("error",a);break;case"img":case"image":case"link":Ke("error",a),Ke("load",a);break;case"details":Ke("toggle",a);break;case"input":Ge(a,d),Ke("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},Ke("invalid",a);break;case"textarea":sa(a,d),Ke("invalid",a)}_n(r,d),i=null;for(var f in d)if(d.hasOwnProperty(f)){var v=d[f];f==="children"?typeof v=="string"?a.textContent!==v&&(d.suppressHydrationWarning!==!0&&Ca(a.textContent,v,e),i=["children",v]):typeof v=="number"&&a.textContent!==""+v&&(d.suppressHydrationWarning!==!0&&Ca(a.textContent,v,e),i=["children",""+v]):c.hasOwnProperty(f)&&v!=null&&f==="onScroll"&&Ke("scroll",a)}switch(r){case"input":Nt(a),Pr(a,d,!0);break;case"textarea":Nt(a),Rr(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=Ea)}a=i,t.updateQueue=a,a!==null&&(t.flags|=4)}else{f=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=os(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=f.createElement(r,{is:a.is}):(e=f.createElement(r),r==="select"&&(f=e,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):e=f.createElementNS(e,r),e[ur]=t,e[Rs]=a,Uc(e,t,!1,!1),t.stateNode=e;e:{switch(f=us(r,a),r){case"dialog":Ke("cancel",e),Ke("close",e),i=a;break;case"iframe":case"object":case"embed":Ke("load",e),i=a;break;case"video":case"audio":for(i=0;i<Es.length;i++)Ke(Es[i],e);i=a;break;case"source":Ke("error",e),i=a;break;case"img":case"image":case"link":Ke("error",e),Ke("load",e),i=a;break;case"details":Ke("toggle",e),i=a;break;case"input":Ge(e,a),i=Le(e,a),Ke("invalid",e);break;case"option":i=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},i=ee({},a,{value:void 0}),Ke("invalid",e);break;case"textarea":sa(e,a),i=ls(e,a),Ke("invalid",e);break;default:i=a}_n(r,i),v=i;for(d in v)if(v.hasOwnProperty(d)){var k=v[d];d==="style"?is(e,k):d==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&It(e,k)):d==="children"?typeof k=="string"?(r!=="textarea"||k!=="")&&Lr(e,k):typeof k=="number"&&Lr(e,""+k):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(c.hasOwnProperty(d)?k!=null&&d==="onScroll"&&Ke("scroll",e):k!=null&&O(e,d,k,f))}switch(r){case"input":Nt(e),Pr(e,a,!1);break;case"textarea":Nt(e),Rr(e);break;case"option":a.value!=null&&e.setAttribute("value",""+ue(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?_r(e,!!a.multiple,d,!1):a.defaultValue!=null&&_r(e,!!a.multiple,a.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ea)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)Ic(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(l(166));if(r=xn($s.current),xn(cr.current),Ta(t)){if(a=t.stateNode,r=t.memoizedProps,a[ur]=t,(d=a.nodeValue!==r)&&(e=Ft,e!==null))switch(e.tag){case 3:Ca(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ca(a.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[ur]=t,t.stateNode=a}return jt(t),null;case 13:if(Xe(rt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(et&&zt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Wu(),Hn(),t.flags|=98560,d=!1;else if(d=Ta(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(l(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[ur]=t}else Hn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;jt(t),d=!1}else Xt!==null&&(Zo(Xt),Xt=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(rt.current&1)!==0?ft===0&&(ft=3):ri())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return qn(),Bo(e,t),e===null&&Ps(t.stateNode.containerInfo),jt(t),null;case 10:return go(t.type._context),jt(t),null;case 17:return Et(t.type)&&_a(),jt(t),null;case 19:if(Xe(rt),d=t.memoizedState,d===null)return jt(t),null;if(a=(t.flags&128)!==0,f=d.rendering,f===null)if(a)As(d,!1);else{if(ft!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=Aa(e),f!==null){for(t.flags|=128,As(d,!1),a=f.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)d=r,e=a,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ye(rt,rt.current&1|2),t.child}e=e.sibling}d.tail!==null&&Ie()>Zn&&(t.flags|=128,a=!0,As(d,!1),t.lanes=4194304)}else{if(!a)if(e=Aa(f),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),As(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!et)return jt(t),null}else 2*Ie()-d.renderingStartTime>Zn&&r!==1073741824&&(t.flags|=128,a=!0,As(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(r=d.last,r!==null?r.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Ie(),t.sibling=null,r=rt.current,Ye(rt,a?r&1|2:r&1),t):(jt(t),null);case 22:case 23:return ti(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(Ot&1073741824)!==0&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(l(156,t.tag))}function Am(e,t){switch(uo(t),t.tag){case 1:return Et(t.type)&&_a(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qn(),Xe(Ct),Xe(vt),No(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return jo(t),null;case 13:if(Xe(rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Hn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xe(rt),null;case 4:return qn(),null;case 10:return go(t.type._context),null;case 22:case 23:return ti(),null;case 24:return null;default:return null}}var qa=!1,bt=!1,Im=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Xn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){st(e,t,a)}else r.current=null}function Vo(e,t,r){try{r()}catch(a){st(e,t,a)}}var Bc=!1;function Bm(e,t){if(eo=pa,e=wu(),Ql(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var i=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var f=0,v=-1,k=-1,F=0,H=0,Y=e,W=null;t:for(;;){for(var ne;Y!==r||i!==0&&Y.nodeType!==3||(v=f+i),Y!==d||a!==0&&Y.nodeType!==3||(k=f+a),Y.nodeType===3&&(f+=Y.nodeValue.length),(ne=Y.firstChild)!==null;)W=Y,Y=ne;for(;;){if(Y===e)break t;if(W===r&&++F===i&&(v=f),W===d&&++H===a&&(k=f),(ne=Y.nextSibling)!==null)break;Y=W,W=Y.parentNode}Y=ne}r=v===-1||k===-1?null:{start:v,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(to={focusedElem:e,selectionRange:r},pa=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var ie=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var fe=ie.memoizedProps,at=ie.memoizedState,L=t.stateNode,C=L.getSnapshotBeforeUpdate(t.elementType===t.type?fe:Gt(t.type,fe),at);L.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(X){st(t,t.return,X)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return ie=Bc,Bc=!1,ie}function Is(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&e)===e){var d=i.destroy;i.destroy=void 0,d!==void 0&&Vo(t,r,d)}i=i.next}while(i!==a)}}function Ka(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Wo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Vc(e){var t=e.alternate;t!==null&&(e.alternate=null,Vc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ur],delete t[Rs],delete t[ao],delete t[km],delete t[Sm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Wc(e){return e.tag===5||e.tag===3||e.tag===4}function Hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ho(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ea));else if(a!==4&&(e=e.child,e!==null))for(Ho(e,t,r),e=e.sibling;e!==null;)Ho(e,t,r),e=e.sibling}function Qo(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Qo(e,t,r),e=e.sibling;e!==null;)Qo(e,t,r),e=e.sibling}var xt=null,Zt=!1;function Jr(e,t,r){for(r=r.child;r!==null;)Qc(e,t,r),r=r.sibling}function Qc(e,t,r){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Je,r)}catch{}switch(r.tag){case 5:bt||Xn(r,t);case 6:var a=xt,i=Zt;xt=null,Jr(e,t,r),xt=a,Zt=i,xt!==null&&(Zt?(e=xt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):xt.removeChild(r.stateNode));break;case 18:xt!==null&&(Zt?(e=xt,r=r.stateNode,e.nodeType===8?so(e.parentNode,r):e.nodeType===1&&so(e,r),vs(e)):so(xt,r.stateNode));break;case 4:a=xt,i=Zt,xt=r.stateNode.containerInfo,Zt=!0,Jr(e,t,r),xt=a,Zt=i;break;case 0:case 11:case 14:case 15:if(!bt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){i=a=a.next;do{var d=i,f=d.destroy;d=d.tag,f!==void 0&&((d&2)!==0||(d&4)!==0)&&Vo(r,t,f),i=i.next}while(i!==a)}Jr(e,t,r);break;case 1:if(!bt&&(Xn(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(v){st(r,t,v)}Jr(e,t,r);break;case 21:Jr(e,t,r);break;case 22:r.mode&1?(bt=(a=bt)||r.memoizedState!==null,Jr(e,t,r),bt=a):Jr(e,t,r);break;default:Jr(e,t,r)}}function Jc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Im),t.forEach(function(a){var i=Xm.bind(null,e,a);r.has(a)||(r.add(a),a.then(i,i))})}}function er(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var i=r[a];try{var d=e,f=t,v=f;e:for(;v!==null;){switch(v.tag){case 5:xt=v.stateNode,Zt=!1;break e;case 3:xt=v.stateNode.containerInfo,Zt=!0;break e;case 4:xt=v.stateNode.containerInfo,Zt=!0;break e}v=v.return}if(xt===null)throw Error(l(160));Qc(d,f,i),xt=null,Zt=!1;var k=i.alternate;k!==null&&(k.return=null),i.return=null}catch(F){st(i,t,F)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Yc(t,e),t=t.sibling}function Yc(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(er(t,e),fr(e),a&4){try{Is(3,e,e.return),Ka(3,e)}catch(fe){st(e,e.return,fe)}try{Is(5,e,e.return)}catch(fe){st(e,e.return,fe)}}break;case 1:er(t,e),fr(e),a&512&&r!==null&&Xn(r,r.return);break;case 5:if(er(t,e),fr(e),a&512&&r!==null&&Xn(r,r.return),e.flags&32){var i=e.stateNode;try{Lr(i,"")}catch(fe){st(e,e.return,fe)}}if(a&4&&(i=e.stateNode,i!=null)){var d=e.memoizedProps,f=r!==null?r.memoizedProps:d,v=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{v==="input"&&d.type==="radio"&&d.name!=null&&Ze(i,d),us(v,f);var F=us(v,d);for(f=0;f<k.length;f+=2){var H=k[f],Y=k[f+1];H==="style"?is(i,Y):H==="dangerouslySetInnerHTML"?It(i,Y):H==="children"?Lr(i,Y):O(i,H,Y,F)}switch(v){case"input":Dt(i,d);break;case"textarea":sr(i,d);break;case"select":var W=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!d.multiple;var ne=d.value;ne!=null?_r(i,!!d.multiple,ne,!1):W!==!!d.multiple&&(d.defaultValue!=null?_r(i,!!d.multiple,d.defaultValue,!0):_r(i,!!d.multiple,d.multiple?[]:"",!1))}i[Rs]=d}catch(fe){st(e,e.return,fe)}}break;case 6:if(er(t,e),fr(e),a&4){if(e.stateNode===null)throw Error(l(162));i=e.stateNode,d=e.memoizedProps;try{i.nodeValue=d}catch(fe){st(e,e.return,fe)}}break;case 3:if(er(t,e),fr(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{vs(t.containerInfo)}catch(fe){st(e,e.return,fe)}break;case 4:er(t,e),fr(e);break;case 13:er(t,e),fr(e),i=e.child,i.flags&8192&&(d=i.memoizedState!==null,i.stateNode.isHidden=d,!d||i.alternate!==null&&i.alternate.memoizedState!==null||(qo=Ie())),a&4&&Jc(e);break;case 22:if(H=r!==null&&r.memoizedState!==null,e.mode&1?(bt=(F=bt)||H,er(t,e),bt=F):er(t,e),fr(e),a&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!H&&(e.mode&1)!==0)for(ae=e,H=e.child;H!==null;){for(Y=ae=H;ae!==null;){switch(W=ae,ne=W.child,W.tag){case 0:case 11:case 14:case 15:Is(4,W,W.return);break;case 1:Xn(W,W.return);var ie=W.stateNode;if(typeof ie.componentWillUnmount=="function"){a=W,r=W.return;try{t=a,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(fe){st(a,r,fe)}}break;case 5:Xn(W,W.return);break;case 22:if(W.memoizedState!==null){Xc(Y);continue}}ne!==null?(ne.return=W,ae=ne):Xc(Y)}H=H.sibling}e:for(H=null,Y=e;;){if(Y.tag===5){if(H===null){H=Y;try{i=Y.stateNode,F?(d=i.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(v=Y.stateNode,k=Y.memoizedProps.style,f=k!=null&&k.hasOwnProperty("display")?k.display:null,v.style.display=Yt("display",f))}catch(fe){st(e,e.return,fe)}}}else if(Y.tag===6){if(H===null)try{Y.stateNode.nodeValue=F?"":Y.memoizedProps}catch(fe){st(e,e.return,fe)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===e)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===e)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===e)break e;H===Y&&(H=null),Y=Y.return}H===Y&&(H=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:er(t,e),fr(e),a&4&&Jc(e);break;case 21:break;default:er(t,e),fr(e)}}function fr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Wc(r)){var a=r;break e}r=r.return}throw Error(l(160))}switch(a.tag){case 5:var i=a.stateNode;a.flags&32&&(Lr(i,""),a.flags&=-33);var d=Hc(e);Qo(e,d,i);break;case 3:case 4:var f=a.stateNode.containerInfo,v=Hc(e);Ho(e,v,f);break;default:throw Error(l(161))}}catch(k){st(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vm(e,t,r){ae=e,qc(e)}function qc(e,t,r){for(var a=(e.mode&1)!==0;ae!==null;){var i=ae,d=i.child;if(i.tag===22&&a){var f=i.memoizedState!==null||qa;if(!f){var v=i.alternate,k=v!==null&&v.memoizedState!==null||bt;v=qa;var F=bt;if(qa=f,(bt=k)&&!F)for(ae=i;ae!==null;)f=ae,k=f.child,f.tag===22&&f.memoizedState!==null?Gc(i):k!==null?(k.return=f,ae=k):Gc(i);for(;d!==null;)ae=d,qc(d),d=d.sibling;ae=i,qa=v,bt=F}Kc(e)}else(i.subtreeFlags&8772)!==0&&d!==null?(d.return=i,ae=d):Kc(e)}}function Kc(e){for(;ae!==null;){var t=ae;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:bt||Ka(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!bt)if(r===null)a.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Gt(t.type,r.memoizedProps);a.componentDidUpdate(i,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Xu(t,d,a);break;case 3:var f=t.updateQueue;if(f!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Xu(t,f,r)}break;case 5:var v=t.stateNode;if(r===null&&t.flags&4){r=v;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&r.focus();break;case"img":k.src&&(r.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var F=t.alternate;if(F!==null){var H=F.memoizedState;if(H!==null){var Y=H.dehydrated;Y!==null&&vs(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(l(163))}bt||t.flags&512&&Wo(t)}catch(W){st(t,t.return,W)}}if(t===e){ae=null;break}if(r=t.sibling,r!==null){r.return=t.return,ae=r;break}ae=t.return}}function Xc(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ae=r;break}ae=t.return}}function Gc(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ka(4,t)}catch(k){st(t,r,k)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var i=t.return;try{a.componentDidMount()}catch(k){st(t,i,k)}}var d=t.return;try{Wo(t)}catch(k){st(t,d,k)}break;case 5:var f=t.return;try{Wo(t)}catch(k){st(t,f,k)}}}catch(k){st(t,t.return,k)}if(t===e){ae=null;break}var v=t.sibling;if(v!==null){v.return=t.return,ae=v;break}ae=t.return}}var Wm=Math.ceil,Xa=q.ReactCurrentDispatcher,Jo=q.ReactCurrentOwner,Qt=q.ReactCurrentBatchConfig,Ae=0,ht=null,ot=null,yt=0,Ot=0,Gn=Br(0),ft=0,Bs=null,vn=0,Ga=0,Yo=0,Vs=null,_t=null,qo=0,Zn=1/0,kr=null,Za=!1,Ko=null,Yr=null,el=!1,qr=null,tl=0,Ws=0,Xo=null,rl=-1,nl=0;function St(){return(Ae&6)!==0?Ie():rl!==-1?rl:rl=Ie()}function Kr(e){return(e.mode&1)===0?1:(Ae&2)!==0&&yt!==0?yt&-yt:Em.transition!==null?(nl===0&&(nl=Hi()),nl):(e=He,e!==0||(e=window.event,e=e===void 0?16:eu(e.type)),e)}function tr(e,t,r,a){if(50<Ws)throw Ws=0,Xo=null,Error(l(185));hs(e,r,a),((Ae&2)===0||e!==ht)&&(e===ht&&((Ae&2)===0&&(Ga|=r),ft===4&&Xr(e,yt)),Rt(e,a),r===1&&Ae===0&&(t.mode&1)===0&&(Zn=Ie()+500,La&&Wr()))}function Rt(e,t){var r=e.callbackNode;Ef(e,t);var a=fa(e,e===ht?yt:0);if(a===0)r!==null&&hr(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&hr(r),t===1)e.tag===0?Cm(ed.bind(null,e)):Uu(ed.bind(null,e)),bm(function(){(Ae&6)===0&&Wr()}),r=null;else{switch(Qi(a)){case 1:r=pr;break;case 4:r=ir;break;case 16:r=gr;break;case 536870912:r=Oe;break;default:r=gr}r=id(r,Zc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Zc(e,t){if(rl=-1,nl=0,(Ae&6)!==0)throw Error(l(327));var r=e.callbackNode;if(es()&&e.callbackNode!==r)return null;var a=fa(e,e===ht?yt:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=sl(e,a);else{t=a;var i=Ae;Ae|=2;var d=rd();(ht!==e||yt!==t)&&(kr=null,Zn=Ie()+500,jn(e,t));do try{Jm();break}catch(v){td(e,v)}while(!0);po(),Xa.current=d,Ae=i,ot!==null?t=0:(ht=null,yt=0,t=ft)}if(t!==0){if(t===2&&(i=Rl(e),i!==0&&(a=i,t=Go(e,i))),t===1)throw r=Bs,jn(e,0),Xr(e,a),Rt(e,Ie()),r;if(t===6)Xr(e,a);else{if(i=e.current.alternate,(a&30)===0&&!Hm(i)&&(t=sl(e,a),t===2&&(d=Rl(e),d!==0&&(a=d,t=Go(e,d))),t===1))throw r=Bs,jn(e,0),Xr(e,a),Rt(e,Ie()),r;switch(e.finishedWork=i,e.finishedLanes=a,t){case 0:case 1:throw Error(l(345));case 2:bn(e,_t,kr);break;case 3:if(Xr(e,a),(a&130023424)===a&&(t=qo+500-Ie(),10<t)){if(fa(e,0)!==0)break;if(i=e.suspendedLanes,(i&a)!==a){St(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=no(bn.bind(null,e,_t,kr),t);break}bn(e,_t,kr);break;case 4:if(Xr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,i=-1;0<a;){var f=31-Be(a);d=1<<f,f=t[f],f>i&&(i=f),a&=~d}if(a=i,a=Ie()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Wm(a/1960))-a,10<a){e.timeoutHandle=no(bn.bind(null,e,_t,kr),a);break}bn(e,_t,kr);break;case 5:bn(e,_t,kr);break;default:throw Error(l(329))}}}return Rt(e,Ie()),e.callbackNode===r?Zc.bind(null,e):null}function Go(e,t){var r=Vs;return e.current.memoizedState.isDehydrated&&(jn(e,t).flags|=256),e=sl(e,t),e!==2&&(t=_t,_t=r,t!==null&&Zo(t)),e}function Zo(e){_t===null?_t=e:_t.push.apply(_t,e)}function Hm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var i=r[a],d=i.getSnapshot;i=i.value;try{if(!Kt(d(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xr(e,t){for(t&=~Yo,t&=~Ga,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Be(t),a=1<<r;e[r]=-1,t&=~a}}function ed(e){if((Ae&6)!==0)throw Error(l(327));es();var t=fa(e,0);if((t&1)===0)return Rt(e,Ie()),null;var r=sl(e,t);if(e.tag!==0&&r===2){var a=Rl(e);a!==0&&(t=a,r=Go(e,a))}if(r===1)throw r=Bs,jn(e,0),Xr(e,t),Rt(e,Ie()),r;if(r===6)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bn(e,_t,kr),Rt(e,Ie()),null}function ei(e,t){var r=Ae;Ae|=1;try{return e(t)}finally{Ae=r,Ae===0&&(Zn=Ie()+500,La&&Wr())}}function wn(e){qr!==null&&qr.tag===0&&(Ae&6)===0&&es();var t=Ae;Ae|=1;var r=Qt.transition,a=He;try{if(Qt.transition=null,He=1,e)return e()}finally{He=a,Qt.transition=r,Ae=t,(Ae&6)===0&&Wr()}}function ti(){Ot=Gn.current,Xe(Gn)}function jn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,jm(r)),ot!==null)for(r=ot.return;r!==null;){var a=r;switch(uo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&_a();break;case 3:qn(),Xe(Ct),Xe(vt),No();break;case 5:jo(a);break;case 4:qn();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:go(a.type._context);break;case 22:case 23:ti()}r=r.return}if(ht=e,ot=e=Gr(e.current,null),yt=Ot=t,ft=0,Bs=null,Yo=Ga=vn=0,_t=Vs=null,gn!==null){for(t=0;t<gn.length;t++)if(r=gn[t],a=r.interleaved,a!==null){r.interleaved=null;var i=a.next,d=r.pending;if(d!==null){var f=d.next;d.next=i,a.next=f}r.pending=a}gn=null}return e}function td(e,t){do{var r=ot;try{if(po(),Ia.current=Ha,Ba){for(var a=nt.memoizedState;a!==null;){var i=a.queue;i!==null&&(i.pending=null),a=a.next}Ba=!1}if(yn=0,mt=dt=nt=null,Fs=!1,zs=0,Jo.current=null,r===null||r.return===null){ft=1,Bs=t,ot=null;break}e:{var d=e,f=r.return,v=r,k=t;if(t=yt,v.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var F=k,H=v,Y=H.tag;if((H.mode&1)===0&&(Y===0||Y===11||Y===15)){var W=H.alternate;W?(H.updateQueue=W.updateQueue,H.memoizedState=W.memoizedState,H.lanes=W.lanes):(H.updateQueue=null,H.memoizedState=null)}var ne=Cc(f);if(ne!==null){ne.flags&=-257,Ec(ne,f,v,d,t),ne.mode&1&&Sc(d,F,t),t=ne,k=F;var ie=t.updateQueue;if(ie===null){var fe=new Set;fe.add(k),t.updateQueue=fe}else ie.add(k);break e}else{if((t&1)===0){Sc(d,F,t),ri();break e}k=Error(l(426))}}else if(et&&v.mode&1){var at=Cc(f);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),Ec(at,f,v,d,t),mo(Kn(k,v));break e}}d=k=Kn(k,v),ft!==4&&(ft=2),Vs===null?Vs=[d]:Vs.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var L=Nc(d,k,t);Ku(d,L);break e;case 1:v=k;var C=d.type,$=d.stateNode;if((d.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Yr===null||!Yr.has($)))){d.flags|=65536,t&=-t,d.lanes|=t;var X=kc(d,v,t);Ku(d,X);break e}}d=d.return}while(d!==null)}sd(r)}catch(he){t=he,ot===r&&r!==null&&(ot=r=r.return);continue}break}while(!0)}function rd(){var e=Xa.current;return Xa.current=Ha,e===null?Ha:e}function ri(){(ft===0||ft===3||ft===2)&&(ft=4),ht===null||(vn&268435455)===0&&(Ga&268435455)===0||Xr(ht,yt)}function sl(e,t){var r=Ae;Ae|=2;var a=rd();(ht!==e||yt!==t)&&(kr=null,jn(e,t));do try{Qm();break}catch(i){td(e,i)}while(!0);if(po(),Ae=r,Xa.current=a,ot!==null)throw Error(l(261));return ht=null,yt=0,ft}function Qm(){for(;ot!==null;)nd(ot)}function Jm(){for(;ot!==null&&!cn();)nd(ot)}function nd(e){var t=od(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?sd(e):ot=t,Jo.current=null}function sd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Um(r,t,Ot),r!==null){ot=r;return}}else{if(r=Am(r,t),r!==null){r.flags&=32767,ot=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ft=6,ot=null;return}}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);ft===0&&(ft=5)}function bn(e,t,r){var a=He,i=Qt.transition;try{Qt.transition=null,He=1,Ym(e,t,r,a)}finally{Qt.transition=i,He=a}return null}function Ym(e,t,r,a){do es();while(qr!==null);if((Ae&6)!==0)throw Error(l(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(Pf(e,d),e===ht&&(ot=ht=null,yt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||el||(el=!0,id(gr,function(){return es(),null})),d=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||d){d=Qt.transition,Qt.transition=null;var f=He;He=1;var v=Ae;Ae|=4,Jo.current=null,Bm(e,r),Yc(r,e),hm(to),pa=!!eo,to=eo=null,e.current=r,Vm(r),qt(),Ae=v,He=f,Qt.transition=d}else e.current=r;if(el&&(el=!1,qr=e,tl=i),d=e.pendingLanes,d===0&&(Yr=null),dn(r.stateNode),Rt(e,Ie()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],a(i.value,{componentStack:i.stack,digest:i.digest});if(Za)throw Za=!1,e=Ko,Ko=null,e;return(tl&1)!==0&&e.tag!==0&&es(),d=e.pendingLanes,(d&1)!==0?e===Xo?Ws++:(Ws=0,Xo=e):Ws=0,Wr(),null}function es(){if(qr!==null){var e=Qi(tl),t=Qt.transition,r=He;try{if(Qt.transition=null,He=16>e?16:e,qr===null)var a=!1;else{if(e=qr,qr=null,tl=0,(Ae&6)!==0)throw Error(l(331));var i=Ae;for(Ae|=4,ae=e.current;ae!==null;){var d=ae,f=d.child;if((ae.flags&16)!==0){var v=d.deletions;if(v!==null){for(var k=0;k<v.length;k++){var F=v[k];for(ae=F;ae!==null;){var H=ae;switch(H.tag){case 0:case 11:case 15:Is(8,H,d)}var Y=H.child;if(Y!==null)Y.return=H,ae=Y;else for(;ae!==null;){H=ae;var W=H.sibling,ne=H.return;if(Vc(H),H===F){ae=null;break}if(W!==null){W.return=ne,ae=W;break}ae=ne}}}var ie=d.alternate;if(ie!==null){var fe=ie.child;if(fe!==null){ie.child=null;do{var at=fe.sibling;fe.sibling=null,fe=at}while(fe!==null)}}ae=d}}if((d.subtreeFlags&2064)!==0&&f!==null)f.return=d,ae=f;else e:for(;ae!==null;){if(d=ae,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:Is(9,d,d.return)}var L=d.sibling;if(L!==null){L.return=d.return,ae=L;break e}ae=d.return}}var C=e.current;for(ae=C;ae!==null;){f=ae;var $=f.child;if((f.subtreeFlags&2064)!==0&&$!==null)$.return=f,ae=$;else e:for(f=C;ae!==null;){if(v=ae,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:Ka(9,v)}}catch(he){st(v,v.return,he)}if(v===f){ae=null;break e}var X=v.sibling;if(X!==null){X.return=v.return,ae=X;break e}ae=v.return}}if(Ae=i,Wr(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Je,e)}catch{}a=!0}return a}finally{He=r,Qt.transition=t}}return!1}function ad(e,t,r){t=Kn(r,t),t=Nc(e,t,1),e=Qr(e,t,1),t=St(),e!==null&&(hs(e,1,t),Rt(e,t))}function st(e,t,r){if(e.tag===3)ad(e,e,r);else for(;t!==null;){if(t.tag===3){ad(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Yr===null||!Yr.has(a))){e=Kn(r,e),e=kc(t,e,1),t=Qr(t,e,1),e=St(),t!==null&&(hs(t,1,e),Rt(t,e));break}}t=t.return}}function qm(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&r,ht===e&&(yt&r)===r&&(ft===4||ft===3&&(yt&130023424)===yt&&500>Ie()-qo?jn(e,0):Yo|=r),Rt(e,t)}function ld(e,t){t===0&&((e.mode&1)===0?t=1:(t=da,da<<=1,(da&130023424)===0&&(da=4194304)));var r=St();e=jr(e,t),e!==null&&(hs(e,t,r),Rt(e,r))}function Km(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ld(e,r)}function Xm(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(l(314))}a!==null&&a.delete(t),ld(e,r)}var od;od=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)Pt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Pt=!1,Om(e,t,r);Pt=(e.flags&131072)!==0}else Pt=!1,et&&(t.flags&1048576)!==0&&Au(t,Da,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ya(e,t),e=t.pendingProps;var i=Bn(t,vt.current);Yn(t,r),i=Co(null,t,a,e,i,r);var d=Eo();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(a)?(d=!0,Ra(t)):d=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vo(t),i.updater=Qa,t.stateNode=i,i._reactInternals=t,Do(t,a,e,r),t=zo(null,t,a,!0,d,r)):(t.tag=0,et&&d&&io(t),kt(null,t,i,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Ya(e,t),e=t.pendingProps,i=a._init,a=i(a._payload),t.type=a,i=t.tag=Zm(a),e=Gt(a,e),i){case 0:t=Fo(null,t,a,e,r);break e;case 1:t=Dc(null,t,a,e,r);break e;case 11:t=Pc(null,t,a,e,r);break e;case 14:t=_c(null,t,a,Gt(a.type,e),r);break e}throw Error(l(306,a,""))}return t;case 0:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Gt(a,i),Fo(e,t,a,i,r);case 1:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Gt(a,i),Dc(e,t,a,i,r);case 3:e:{if(Tc(t),e===null)throw Error(l(387));a=t.pendingProps,d=t.memoizedState,i=d.element,qu(e,t),Ua(t,a,null,r);var f=t.memoizedState;if(a=f.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){i=Kn(Error(l(423)),t),t=$c(e,t,a,r,i);break e}else if(a!==i){i=Kn(Error(l(424)),t),t=$c(e,t,a,r,i);break e}else for(zt=Ir(t.stateNode.containerInfo.firstChild),Ft=t,et=!0,Xt=null,r=Ju(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hn(),a===i){t=Nr(e,t,r);break e}kt(e,t,a,r)}t=t.child}return t;case 5:return Gu(t),e===null&&fo(t),a=t.type,i=t.pendingProps,d=e!==null?e.memoizedProps:null,f=i.children,ro(a,i)?f=null:d!==null&&ro(a,d)&&(t.flags|=32),Mc(e,t),kt(e,t,f,r),t.child;case 6:return e===null&&fo(t),null;case 13:return Fc(e,t,r);case 4:return wo(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Qn(t,null,a,r):kt(e,t,a,r),t.child;case 11:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Gt(a,i),Pc(e,t,a,i,r);case 7:return kt(e,t,t.pendingProps,r),t.child;case 8:return kt(e,t,t.pendingProps.children,r),t.child;case 12:return kt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,i=t.pendingProps,d=t.memoizedProps,f=i.value,Ye(Fa,a._currentValue),a._currentValue=f,d!==null)if(Kt(d.value,f)){if(d.children===i.children&&!Ct.current){t=Nr(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var v=d.dependencies;if(v!==null){f=d.child;for(var k=v.firstContext;k!==null;){if(k.context===a){if(d.tag===1){k=br(-1,r&-r),k.tag=2;var F=d.updateQueue;if(F!==null){F=F.shared;var H=F.pending;H===null?k.next=k:(k.next=H.next,H.next=k),F.pending=k}}d.lanes|=r,k=d.alternate,k!==null&&(k.lanes|=r),xo(d.return,r,t),v.lanes|=r;break}k=k.next}}else if(d.tag===10)f=d.type===t.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(l(341));f.lanes|=r,v=f.alternate,v!==null&&(v.lanes|=r),xo(f,r,t),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===t){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}kt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps.children,Yn(t,r),i=Wt(i),a=a(i),t.flags|=1,kt(e,t,a,r),t.child;case 14:return a=t.type,i=Gt(a,t.pendingProps),i=Gt(a.type,i),_c(e,t,a,i,r);case 15:return Rc(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,i=t.pendingProps,i=t.elementType===a?i:Gt(a,i),Ya(e,t),t.tag=1,Et(a)?(e=!0,Ra(t)):e=!1,Yn(t,r),jc(t,a,i),Do(t,a,i,r),zo(null,t,a,!0,e,r);case 19:return Oc(e,t,r);case 22:return Lc(e,t,r)}throw Error(l(156,t.tag))};function id(e,t){return qe(e,t)}function Gm(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,t,r,a){return new Gm(e,t,r,a)}function ni(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zm(e){if(typeof e=="function")return ni(e)?1:0;if(e!=null){if(e=e.$$typeof,e===je)return 11;if(e===Ee)return 14}return 2}function Gr(e,t){var r=e.alternate;return r===null?(r=Jt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function al(e,t,r,a,i,d){var f=2;if(a=e,typeof e=="function")ni(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case E:return Nn(r.children,i,d,t);case A:f=8,i|=8;break;case K:return e=Jt(12,r,t,i|2),e.elementType=K,e.lanes=d,e;case Fe:return e=Jt(13,r,t,i),e.elementType=Fe,e.lanes=d,e;case Ne:return e=Jt(19,r,t,i),e.elementType=Ne,e.lanes=d,e;case Re:return ll(r,i,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:f=10;break e;case Ce:f=9;break e;case je:f=11;break e;case Ee:f=14;break e;case De:f=16,a=null;break e}throw Error(l(130,e==null?e:typeof e,""))}return t=Jt(f,r,t,i),t.elementType=e,t.type=a,t.lanes=d,t}function Nn(e,t,r,a){return e=Jt(7,e,a,t),e.lanes=r,e}function ll(e,t,r,a){return e=Jt(22,e,a,t),e.elementType=Re,e.lanes=r,e.stateNode={isHidden:!1},e}function si(e,t,r){return e=Jt(6,e,null,t),e.lanes=r,e}function ai(e,t,r){return t=Jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eh(e,t,r,a,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=a,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function li(e,t,r,a,i,d,f,v,k){return e=new eh(e,t,r,v,k),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Jt(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vo(d),e}function th(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function ud(e){if(!e)return Vr;e=e._reactInternals;e:{if(le(e)!==e||e.tag!==1)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(l(171))}if(e.tag===1){var r=e.type;if(Et(r))return zu(e,r,t)}return t}function cd(e,t,r,a,i,d,f,v,k){return e=li(r,a,!0,e,i,d,f,v,k),e.context=ud(null),r=e.current,a=St(),i=Kr(r),d=br(a,i),d.callback=t??null,Qr(r,d,i),e.current.lanes=i,hs(e,i,a),Rt(e,a),e}function ol(e,t,r,a){var i=t.current,d=St(),f=Kr(i);return r=ud(r),t.context===null?t.context=r:t.pendingContext=r,t=br(d,f),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Qr(i,t,f),e!==null&&(tr(e,i,f,d),Oa(e,i,f)),f}function il(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function oi(e,t){dd(e,t),(e=e.alternate)&&dd(e,t)}function rh(){return null}var fd=typeof reportError=="function"?reportError:function(e){console.error(e)};function ii(e){this._internalRoot=e}ul.prototype.render=ii.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));ol(e,t,null,null)},ul.prototype.unmount=ii.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wn(function(){ol(null,e,null,null)}),t[xr]=null}};function ul(e){this._internalRoot=e}ul.prototype.unstable_scheduleHydration=function(e){if(e){var t=qi();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Or.length&&t!==0&&t<Or[r].priority;r++);Or.splice(r,0,e),r===0&&Gi(e)}};function ui(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function md(){}function nh(e,t,r,a,i){if(i){if(typeof a=="function"){var d=a;a=function(){var F=il(f);d.call(F)}}var f=cd(t,a,e,0,null,!1,!1,"",md);return e._reactRootContainer=f,e[xr]=f.current,Ps(e.nodeType===8?e.parentNode:e),wn(),f}for(;i=e.lastChild;)e.removeChild(i);if(typeof a=="function"){var v=a;a=function(){var F=il(k);v.call(F)}}var k=li(e,0,!1,null,null,!1,!1,"",md);return e._reactRootContainer=k,e[xr]=k.current,Ps(e.nodeType===8?e.parentNode:e),wn(function(){ol(t,k,r,a)}),k}function dl(e,t,r,a,i){var d=r._reactRootContainer;if(d){var f=d;if(typeof i=="function"){var v=i;i=function(){var k=il(f);v.call(k)}}ol(t,f,e,i)}else f=nh(r,t,e,i,a);return il(f)}Ji=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ms(t.pendingLanes);r!==0&&(Ml(t,r|1),Rt(t,Ie()),(Ae&6)===0&&(Zn=Ie()+500,Wr()))}break;case 13:wn(function(){var a=jr(e,1);if(a!==null){var i=St();tr(a,e,1,i)}}),oi(e,1)}},Dl=function(e){if(e.tag===13){var t=jr(e,134217728);if(t!==null){var r=St();tr(t,e,134217728,r)}oi(e,134217728)}},Yi=function(e){if(e.tag===13){var t=Kr(e),r=jr(e,t);if(r!==null){var a=St();tr(r,e,t,a)}oi(e,t)}},qi=function(){return He},Ki=function(e,t){var r=He;try{return He=e,t()}finally{He=r}},Ln=function(e,t,r){switch(t){case"input":if(Dt(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var i=Pa(a);if(!i)throw Error(l(90));re(a),Dt(a,i)}}}break;case"textarea":sr(e,r);break;case"select":t=r.value,t!=null&&_r(e,!!r.multiple,t,!1)}},ds=ei,on=wn;var sh={usingClientEntryPoint:!1,Events:[Ls,An,Pa,cs,oa,ei]},Hs={findFiberByHostInstance:fn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ah={bundleType:Hs.bundleType,version:Hs.version,rendererPackageName:Hs.rendererPackageName,rendererConfig:Hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=We(e),e===null?null:e.stateNode},findFiberByHostInstance:Hs.findFiberByHostInstance||rh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{Je=fl.inject(ah),gt=fl}catch{}}return Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sh,Lt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ui(t))throw Error(l(200));return th(e,t,null,r)},Lt.createRoot=function(e,t){if(!ui(e))throw Error(l(299));var r=!1,a="",i=fd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=li(e,1,!1,null,null,r,!1,a,i),e[xr]=t.current,Ps(e.nodeType===8?e.parentNode:e),new ii(t)},Lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=We(t),e=e===null?null:e.stateNode,e},Lt.flushSync=function(e){return wn(e)},Lt.hydrate=function(e,t,r){if(!cl(t))throw Error(l(200));return dl(null,e,t,!0,r)},Lt.hydrateRoot=function(e,t,r){if(!ui(e))throw Error(l(405));var a=r!=null&&r.hydratedSources||null,i=!1,d="",f=fd;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),t=cd(t,null,e,1,r??null,i,!1,d,f),e[xr]=t.current,Ps(e),a)for(e=0;e<a.length;e++)r=a[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new ul(t)},Lt.render=function(e,t,r){if(!cl(t))throw Error(l(200));return dl(null,e,t,!1,r)},Lt.unmountComponentAtNode=function(e){if(!cl(e))throw Error(l(40));return e._reactRootContainer?(wn(function(){dl(null,null,e,!1,function(){e._reactRootContainer=null,e[xr]=null})}),!0):!1},Lt.unstable_batchedUpdates=ei,Lt.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!cl(r))throw Error(l(200));if(e==null||e._reactInternals===void 0)throw Error(l(38));return dl(e,t,r,!1,a)},Lt.version="18.3.1-next-f1338f8080-20240426",Lt}var jd;function ef(){if(jd)return fi.exports;jd=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(o){console.error(o)}}return s(),fi.exports=hh(),fi.exports}var bd;function ph(){if(bd)return ml;bd=1;var s=ef();return ml.createRoot=s.createRoot,ml.hydrateRoot=s.hydrateRoot,ml}var gh=ph(),tf=ef();const xh=Zd(tf),yh=Gd({__proto__:null,default:xh},[tf]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tt(){return tt=Object.assign?Object.assign.bind():function(s){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])}return s},tt.apply(this,arguments)}var it;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(it||(it={}));const Nd="popstate";function vh(s){s===void 0&&(s={});function o(u,c){let{pathname:m,search:h,hash:p}=u.location;return Zs("",{pathname:m,search:h,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function l(u,c){return typeof c=="string"?c:En(c)}return jh(o,l,null,s)}function ze(s,o){if(s===!1||s===null||typeof s>"u")throw new Error(o)}function rs(s,o){if(!s){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function wh(){return Math.random().toString(36).substr(2,8)}function kd(s,o){return{usr:s.state,key:s.key,idx:o}}function Zs(s,o,l,u){return l===void 0&&(l=null),tt({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof o=="string"?nn(o):o,{state:l,key:o&&o.key||u||wh()})}function En(s){let{pathname:o="/",search:l="",hash:u=""}=s;return l&&l!=="?"&&(o+=l.charAt(0)==="?"?l:"?"+l),u&&u!=="#"&&(o+=u.charAt(0)==="#"?u:"#"+u),o}function nn(s){let o={};if(s){let l=s.indexOf("#");l>=0&&(o.hash=s.substr(l),s=s.substr(0,l));let u=s.indexOf("?");u>=0&&(o.search=s.substr(u),s=s.substr(0,u)),s&&(o.pathname=s)}return o}function jh(s,o,l,u){u===void 0&&(u={});let{window:c=document.defaultView,v5Compat:m=!1}=u,h=c.history,p=it.Pop,g=null,y=j();y==null&&(y=0,h.replaceState(tt({},h.state,{idx:y}),""));function j(){return(h.state||{idx:null}).idx}function b(){p=it.Pop;let R=j(),U=R==null?null:R-y;y=R,g&&g({action:p,location:D.location,delta:U})}function w(R,U){p=it.Push;let T=Zs(D.location,R,U);y=j()+1;let O=kd(T,y),q=D.createHref(T);try{h.pushState(O,"",q)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;c.location.assign(q)}m&&g&&g({action:p,location:D.location,delta:1})}function S(R,U){p=it.Replace;let T=Zs(D.location,R,U);y=j();let O=kd(T,y),q=D.createHref(T);h.replaceState(O,"",q),m&&g&&g({action:p,location:D.location,delta:0})}function M(R){let U=c.location.origin!=="null"?c.location.origin:c.location.href,T=typeof R=="string"?R:En(R);return T=T.replace(/ $/,"%20"),ze(U,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,U)}let D={get action(){return p},get location(){return s(c,h)},listen(R){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(Nd,b),g=R,()=>{c.removeEventListener(Nd,b),g=null}},createHref(R){return o(c,R)},createURL:M,encodeLocation(R){let U=M(R);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:w,replace:S,go(R){return h.go(R)}};return D}var Qe;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Qe||(Qe={}));const bh=new Set(["lazy","caseSensitive","path","id","index","children"]);function Nh(s){return s.index===!0}function yl(s,o,l,u){return l===void 0&&(l=[]),u===void 0&&(u={}),s.map((c,m)=>{let h=[...l,String(m)],p=typeof c.id=="string"?c.id:h.join("-");if(ze(c.index!==!0||!c.children,"Cannot specify children on an index route"),ze(!u[p],'Found a route id collision on id "'+p+`".  Route id's must be globally unique within Data Router usages`),Nh(c)){let g=tt({},c,o(c),{id:p});return u[p]=g,g}else{let g=tt({},c,o(c),{id:p,children:void 0});return u[p]=g,c.children&&(g.children=yl(c.children,o,h,u)),g}})}function kn(s,o,l){return l===void 0&&(l="/"),gl(s,o,l,!1)}function gl(s,o,l,u){let c=typeof o=="string"?nn(o):o,m=as(c.pathname||"/",l);if(m==null)return null;let h=rf(s);Sh(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=Fh(m);p=Th(h[g],y,u)}return p}function kh(s,o){let{route:l,pathname:u,params:c}=s;return{id:l.id,pathname:u,params:c,data:o[l.id],handle:l.handle}}function rf(s,o,l,u){o===void 0&&(o=[]),l===void 0&&(l=[]),u===void 0&&(u="");let c=(m,h,p)=>{let g={relativePath:p===void 0?m.path||"":p,caseSensitive:m.caseSensitive===!0,childrenIndex:h,route:m};g.relativePath.startsWith("/")&&(ze(g.relativePath.startsWith(u),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+u+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(u.length));let y=Sr([u,g.relativePath]),j=l.concat(g);m.children&&m.children.length>0&&(ze(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),rf(m.children,o,j,y)),!(m.path==null&&!m.index)&&o.push({path:y,score:Mh(y,m.index),routesMeta:j})};return s.forEach((m,h)=>{var p;if(m.path===""||!((p=m.path)!=null&&p.includes("?")))c(m,h);else for(let g of nf(m.path))c(m,h,g)}),o}function nf(s){let o=s.split("/");if(o.length===0)return[];let[l,...u]=o,c=l.endsWith("?"),m=l.replace(/\?$/,"");if(u.length===0)return c?[m,""]:[m];let h=nf(u.join("/")),p=[];return p.push(...h.map(g=>g===""?m:[m,g].join("/"))),c&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function Sh(s){s.sort((o,l)=>o.score!==l.score?l.score-o.score:Dh(o.routesMeta.map(u=>u.childrenIndex),l.routesMeta.map(u=>u.childrenIndex)))}const Ch=/^:[\w-]+$/,Eh=3,Ph=2,_h=1,Rh=10,Lh=-2,Sd=s=>s==="*";function Mh(s,o){let l=s.split("/"),u=l.length;return l.some(Sd)&&(u+=Lh),o&&(u+=Ph),l.filter(c=>!Sd(c)).reduce((c,m)=>c+(Ch.test(m)?Eh:m===""?_h:Rh),u)}function Dh(s,o){return s.length===o.length&&s.slice(0,-1).every((u,c)=>u===o[c])?s[s.length-1]-o[o.length-1]:0}function Th(s,o,l){l===void 0&&(l=!1);let{routesMeta:u}=s,c={},m="/",h=[];for(let p=0;p<u.length;++p){let g=u[p],y=p===u.length-1,j=m==="/"?o:o.slice(m.length)||"/",b=Cd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},j),w=g.route;if(!b&&y&&l&&!u[u.length-1].route.index&&(b=Cd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},j)),!b)return null;Object.assign(c,b.params),h.push({params:c,pathname:Sr([m,b.pathname]),pathnameBase:Uh(Sr([m,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(m=Sr([m,b.pathnameBase]))}return h}function Cd(s,o){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[l,u]=$h(s.path,s.caseSensitive,s.end),c=o.match(l);if(!c)return null;let m=c[0],h=m.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:u.reduce((y,j,b)=>{let{paramName:w,isOptional:S}=j;if(w==="*"){let D=p[b]||"";h=m.slice(0,m.length-D.length).replace(/(.)\/+$/,"$1")}const M=p[b];return S&&!M?y[w]=void 0:y[w]=(M||"").replace(/%2F/g,"/"),y},{}),pathname:m,pathnameBase:h,pattern:s}}function $h(s,o,l){o===void 0&&(o=!1),l===void 0&&(l=!0),rs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let u=[],c="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(u.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(u.push({paramName:"*"}),c+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?c+="\\/*$":s!==""&&s!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,o?void 0:"i"),u]}function Fh(s){try{return s.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return rs(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),s}}function as(s,o){if(o==="/")return s;if(!s.toLowerCase().startsWith(o.toLowerCase()))return null;let l=o.endsWith("/")?o.length-1:o.length,u=s.charAt(l);return u&&u!=="/"?null:s.slice(l)||"/"}function zh(s,o){o===void 0&&(o="/");let{pathname:l,search:u="",hash:c=""}=typeof s=="string"?nn(s):s;return{pathname:l?l.startsWith("/")?l:Oh(l,o):o,search:Ah(u),hash:Ih(c)}}function Oh(s,o){let l=o.replace(/\/+$/,"").split("/");return s.split("/").forEach(c=>{c===".."?l.length>1&&l.pop():c!=="."&&l.push(c)}),l.length>1?l.join("/"):"/"}function pi(s,o,l,u){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(u)+"].  Please separate it out to the ")+("`to."+l+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sf(s){return s.filter((o,l)=>l===0||o.route.path&&o.route.path.length>0)}function Li(s,o){let l=sf(s);return o?l.map((u,c)=>c===l.length-1?u.pathname:u.pathnameBase):l.map(u=>u.pathnameBase)}function Mi(s,o,l,u){u===void 0&&(u=!1);let c;typeof s=="string"?c=nn(s):(c=tt({},s),ze(!c.pathname||!c.pathname.includes("?"),pi("?","pathname","search",c)),ze(!c.pathname||!c.pathname.includes("#"),pi("#","pathname","hash",c)),ze(!c.search||!c.search.includes("#"),pi("#","search","hash",c)));let m=s===""||c.pathname==="",h=m?"/":c.pathname,p;if(h==null)p=l;else{let b=o.length-1;if(!u&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),b-=1;c.pathname=w.join("/")}p=b>=0?o[b]:"/"}let g=zh(c,p),y=h&&h!=="/"&&h.endsWith("/"),j=(m||h===".")&&l.endsWith("/");return!g.pathname.endsWith("/")&&(y||j)&&(g.pathname+="/"),g}const Sr=s=>s.join("/").replace(/\/\/+/g,"/"),Uh=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Ah=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Ih=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;class vl{constructor(o,l,u,c){c===void 0&&(c=!1),this.status=o,this.statusText=l||"",this.internal=c,u instanceof Error?(this.data=u.toString(),this.error=u):this.data=u}}function ea(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const af=["post","put","patch","delete"],Bh=new Set(af),Vh=["get",...af],Wh=new Set(Vh),Hh=new Set([301,302,303,307,308]),Qh=new Set([307,308]),gi={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Jh={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Js={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Di=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yh=s=>({hasErrorBoundary:!!s.hasErrorBoundary}),lf="remix-router-transitions";function qh(s){const o=s.window?s.window:typeof window<"u"?window:void 0,l=typeof o<"u"&&typeof o.document<"u"&&typeof o.document.createElement<"u",u=!l;ze(s.routes.length>0,"You must provide a non-empty routes array to createRouter");let c;if(s.mapRouteProperties)c=s.mapRouteProperties;else if(s.detectErrorBoundary){let N=s.detectErrorBoundary;c=_=>({hasErrorBoundary:N(_)})}else c=Yh;let m={},h=yl(s.routes,c,void 0,m),p,g=s.basename||"/",y=s.dataStrategy||Zh,j=s.patchRoutesOnNavigation,b=tt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},s.future),w=null,S=new Set,M=null,D=null,R=null,U=s.hydrationData!=null,T=kn(h,s.history.location,g),O=!1,q=null;if(T==null&&!j){let N=Mt(404,{pathname:s.history.location.pathname}),{matches:_,route:z}=zd(h);T=_,q={[z.id]:N}}T&&!s.hydrationData&&on(T,h,s.history.location.pathname).active&&(T=null);let Q;if(T)if(T.some(N=>N.route.lazy))Q=!1;else if(!T.some(N=>N.route.loader))Q=!0;else if(b.v7_partialHydration){let N=s.hydrationData?s.hydrationData.loaderData:null,_=s.hydrationData?s.hydrationData.errors:null;if(_){let z=T.findIndex(V=>_[V.route.id]!==void 0);Q=T.slice(0,z+1).every(V=>!ki(V.route,N,_))}else Q=T.every(z=>!ki(z.route,N,_))}else Q=s.hydrationData!=null;else if(Q=!1,T=[],b.v7_partialHydration){let N=on(null,h,s.history.location.pathname);N.active&&N.matches&&(O=!0,T=N.matches)}let te,E={historyAction:s.history.action,location:s.history.location,matches:T,initialized:Q,navigation:gi,restoreScrollPosition:s.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:s.hydrationData&&s.hydrationData.loaderData||{},actionData:s.hydrationData&&s.hydrationData.actionData||null,errors:s.hydrationData&&s.hydrationData.errors||q,fetchers:new Map,blockers:new Map},A=it.Pop,K=!1,Z,Ce=!1,je=new Map,Fe=null,Ne=!1,Ee=!1,De=[],Re=new Set,J=new Map,me=0,ee=-1,P=new Map,I=new Set,ye=new Map,ke=new Map,be=new Set,we=new Map,B=new Map,ue;function Te(){if(w=s.history.listen(N=>{let{action:_,location:z,delta:V}=N;if(ue){ue(),ue=void 0;return}rs(B.size===0||V!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let G=Ln({currentLocation:E.location,nextLocation:z,historyAction:_});if(G&&V!=null){let pe=new Promise(ve=>{ue=ve});s.history.go(V*-1),Mr(G,{state:"blocked",location:z,proceed(){Mr(G,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),pe.then(()=>s.history.go(V))},reset(){let ve=new Map(E.blockers);ve.set(G,Js),re({blockers:ve})}});return}return Ze(_,z)}),l){mp(o,je);let N=()=>hp(o,je);o.addEventListener("pagehide",N),Fe=()=>o.removeEventListener("pagehide",N)}return E.initialized||Ze(it.Pop,E.location,{initialHydration:!0}),te}function ut(){w&&w(),Fe&&Fe(),S.clear(),Z&&Z.abort(),E.fetchers.forEach((N,_)=>ar(_)),E.blockers.forEach((N,_)=>Rn(_))}function Nt(N){return S.add(N),()=>S.delete(N)}function re(N,_){_===void 0&&(_={}),E=tt({},E,N);let z=[],V=[];b.v7_fetcherPersist&&E.fetchers.forEach((G,pe)=>{G.state==="idle"&&(be.has(pe)?V.push(pe):z.push(pe))}),be.forEach(G=>{!E.fetchers.has(G)&&!J.has(G)&&V.push(G)}),[...S].forEach(G=>G(E,{deletedFetchers:V,viewTransitionOpts:_.viewTransitionOpts,flushSync:_.flushSync===!0})),b.v7_fetcherPersist?(z.forEach(G=>E.fetchers.delete(G)),V.forEach(G=>ar(G))):V.forEach(G=>be.delete(G))}function ce(N,_,z){var V,G;let{flushSync:pe}=z===void 0?{}:z,ve=E.actionData!=null&&E.navigation.formMethod!=null&&rr(E.navigation.formMethod)&&E.navigation.state==="loading"&&((V=N.state)==null?void 0:V._isRedirect)!==!0,oe;_.actionData?Object.keys(_.actionData).length>0?oe=_.actionData:oe=null:ve?oe=E.actionData:oe=null;let de=_.loaderData?$d(E.loaderData,_.loaderData,_.matches||[],_.errors):E.loaderData,se=E.blockers;se.size>0&&(se=new Map(se),se.forEach(($e,ct)=>se.set(ct,Js)));let le=K===!0||E.navigation.formMethod!=null&&rr(E.navigation.formMethod)&&((G=N.state)==null?void 0:G._isRedirect)!==!0;p&&(h=p,p=void 0),Ne||A===it.Pop||(A===it.Push?s.history.push(N,N.state):A===it.Replace&&s.history.replace(N,N.state));let Pe;if(A===it.Pop){let $e=je.get(E.location.pathname);$e&&$e.has(N.pathname)?Pe={currentLocation:E.location,nextLocation:N}:je.has(N.pathname)&&(Pe={currentLocation:N,nextLocation:E.location})}else if(Ce){let $e=je.get(E.location.pathname);$e?$e.add(N.pathname):($e=new Set([N.pathname]),je.set(E.location.pathname,$e)),Pe={currentLocation:E.location,nextLocation:N}}re(tt({},_,{actionData:oe,loaderData:de,historyAction:A,location:N,initialized:!0,navigation:gi,revalidation:"idle",restoreScrollPosition:ds(N,_.matches||E.matches),preventScrollReset:le,blockers:se}),{viewTransitionOpts:Pe,flushSync:pe===!0}),A=it.Pop,K=!1,Ce=!1,Ne=!1,Ee=!1,De=[]}async function Le(N,_){if(typeof N=="number"){s.history.go(N);return}let z=Ni(E.location,E.matches,g,b.v7_prependBasename,N,b.v7_relativeSplatPath,_==null?void 0:_.fromRouteId,_==null?void 0:_.relative),{path:V,submission:G,error:pe}=Ed(b.v7_normalizeFormMethod,!1,z,_),ve=E.location,oe=Zs(E.location,V,_&&_.state);oe=tt({},oe,s.history.encodeLocation(oe));let de=_&&_.replace!=null?_.replace:void 0,se=it.Push;de===!0?se=it.Replace:de===!1||G!=null&&rr(G.formMethod)&&G.formAction===E.location.pathname+E.location.search&&(se=it.Replace);let le=_&&"preventScrollReset"in _?_.preventScrollReset===!0:void 0,Pe=(_&&_.flushSync)===!0,$e=Ln({currentLocation:ve,nextLocation:oe,historyAction:se});if($e){Mr($e,{state:"blocked",location:oe,proceed(){Mr($e,{state:"proceeding",proceed:void 0,reset:void 0,location:oe}),Le(N,_)},reset(){let ct=new Map(E.blockers);ct.set($e,Js),re({blockers:ct})}});return}return await Ze(se,oe,{submission:G,pendingError:pe,preventScrollReset:le,replace:_&&_.replace,enableViewTransition:_&&_.viewTransition,flushSync:Pe})}function Ge(){if(ln(),re({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){Ze(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}Ze(A||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation,enableViewTransition:Ce===!0})}}async function Ze(N,_,z){Z&&Z.abort(),Z=null,A=N,Ne=(z&&z.startUninterruptedRevalidation)===!0,oa(E.location,E.matches),K=(z&&z.preventScrollReset)===!0,Ce=(z&&z.enableViewTransition)===!0;let V=p||h,G=z&&z.overrideNavigation,pe=z!=null&&z.initialHydration&&E.matches&&E.matches.length>0&&!O?E.matches:kn(V,_,g),ve=(z&&z.flushSync)===!0;if(pe&&E.initialized&&!Ee&&ap(E.location,_)&&!(z&&z.submission&&rr(z.submission.formMethod))){ce(_,{matches:pe},{flushSync:ve});return}let oe=on(pe,V,_.pathname);if(oe.active&&oe.matches&&(pe=oe.matches),!pe){let{error:We,notFoundMatches:Ue,route:qe}=lr(_.pathname);ce(_,{matches:Ue,loaderData:{},errors:{[qe.id]:We}},{flushSync:ve});return}Z=new AbortController;let de=ts(s.history,_,Z.signal,z&&z.submission),se;if(z&&z.pendingError)se=[Sn(pe).route.id,{type:Qe.error,error:z.pendingError}];else if(z&&z.submission&&rr(z.submission.formMethod)){let We=await Dt(de,_,z.submission,pe,oe.active,{replace:z.replace,flushSync:ve});if(We.shortCircuited)return;if(We.pendingActionResult){let[Ue,qe]=We.pendingActionResult;if(Ut(qe)&&ea(qe.error)&&qe.error.status===404){Z=null,ce(_,{matches:We.matches,loaderData:{},errors:{[Ue]:qe.error}});return}}pe=We.matches||pe,se=We.pendingActionResult,G=xi(_,z.submission),ve=!1,oe.active=!1,de=ts(s.history,de.url,de.signal)}let{shortCircuited:le,matches:Pe,loaderData:$e,errors:ct}=await Pr(de,_,pe,oe.active,G,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,ve,se);le||(Z=null,ce(_,tt({matches:Pe||pe},Fd(se),{loaderData:$e,errors:ct})))}async function Dt(N,_,z,V,G,pe){pe===void 0&&(pe={}),ln();let ve=dp(_,z);if(re({navigation:ve},{flushSync:pe.flushSync===!0}),G){let se=await Dr(V,_.pathname,N.signal);if(se.type==="aborted")return{shortCircuited:!0};if(se.type==="error"){let le=Sn(se.partialMatches).route.id;return{matches:se.partialMatches,pendingActionResult:[le,{type:Qe.error,error:se.error}]}}else if(se.matches)V=se.matches;else{let{notFoundMatches:le,error:Pe,route:$e}=lr(_.pathname);return{matches:le,pendingActionResult:[$e.id,{type:Qe.error,error:Pe}]}}}let oe,de=Gs(V,_);if(!de.route.action&&!de.route.lazy)oe={type:Qe.error,error:Mt(405,{method:N.method,pathname:_.pathname,routeId:de.route.id})};else if(oe=(await Rr("action",E,N,[de],V,null))[de.route.id],N.signal.aborted)return{shortCircuited:!0};if(Cn(oe)){let se;return pe&&pe.replace!=null?se=pe.replace:se=Md(oe.response.headers.get("Location"),new URL(N.url),g)===E.location.pathname+E.location.search,await sr(N,oe,!0,{submission:z,replace:se}),{shortCircuited:!0}}if(tn(oe))throw Mt(400,{type:"defer-action"});if(Ut(oe)){let se=Sn(V,de.route.id);return(pe&&pe.replace)!==!0&&(A=it.Push),{matches:V,pendingActionResult:[se.route.id,oe]}}return{matches:V,pendingActionResult:[de.route.id,oe]}}async function Pr(N,_,z,V,G,pe,ve,oe,de,se,le){let Pe=G||xi(_,pe),$e=pe||ve||Ud(Pe),ct=!Ne&&(!b.v7_partialHydration||!de);if(V){if(ct){let Je=nr(le);re(tt({navigation:Pe},Je!==void 0?{actionData:Je}:{}),{flushSync:se})}let Oe=await Dr(z,_.pathname,N.signal);if(Oe.type==="aborted")return{shortCircuited:!0};if(Oe.type==="error"){let Je=Sn(Oe.partialMatches).route.id;return{matches:Oe.partialMatches,loaderData:{},errors:{[Je]:Oe.error}}}else if(Oe.matches)z=Oe.matches;else{let{error:Je,notFoundMatches:gt,route:dn}=lr(_.pathname);return{matches:gt,loaderData:{},errors:{[dn.id]:Je}}}}let We=p||h,[Ue,qe]=_d(s.history,E,z,$e,_,b.v7_partialHydration&&de===!0,b.v7_skipActionErrorRevalidation,Ee,De,Re,be,ye,I,We,g,le);if(or(Oe=>!(z&&z.some(Je=>Je.route.id===Oe))||Ue&&Ue.some(Je=>Je.route.id===Oe)),ee=++me,Ue.length===0&&qe.length===0){let Oe=aa();return ce(_,tt({matches:z,loaderData:{},errors:le&&Ut(le[1])?{[le[0]]:le[1].error}:null},Fd(le),Oe?{fetchers:new Map(E.fetchers)}:{}),{flushSync:se}),{shortCircuited:!0}}if(ct){let Oe={};if(!V){Oe.navigation=Pe;let Je=nr(le);Je!==void 0&&(Oe.actionData=Je)}qe.length>0&&(Oe.fetchers=an(qe)),re(Oe,{flushSync:se})}qe.forEach(Oe=>{Yt(Oe.key),Oe.controller&&J.set(Oe.key,Oe.controller)});let hr=()=>qe.forEach(Oe=>Yt(Oe.key));Z&&Z.signal.addEventListener("abort",hr);let{loaderResults:cn,fetcherResults:qt}=await os(E,z,Ue,qe,N);if(N.signal.aborted)return{shortCircuited:!0};Z&&Z.signal.removeEventListener("abort",hr),qe.forEach(Oe=>J.delete(Oe.key));let Ie=hl(cn);if(Ie)return await sr(N,Ie.result,!0,{replace:oe}),{shortCircuited:!0};if(Ie=hl(qt),Ie)return I.add(Ie.key),await sr(N,Ie.result,!0,{replace:oe}),{shortCircuited:!0};let{loaderData:fs,errors:pr}=Td(E,z,cn,le,qe,qt,we);we.forEach((Oe,Je)=>{Oe.subscribe(gt=>{(gt||Oe.done)&&we.delete(Je)})}),b.v7_partialHydration&&de&&E.errors&&(pr=tt({},E.errors,pr));let ir=aa(),gr=_n(ee),Mn=ir||gr||qe.length>0;return tt({matches:z,loaderData:fs,errors:pr},Mn?{fetchers:new Map(E.fetchers)}:{})}function nr(N){if(N&&!Ut(N[1]))return{[N[0]]:N[1].data};if(E.actionData)return Object.keys(E.actionData).length===0?null:E.actionData}function an(N){return N.forEach(_=>{let z=E.fetchers.get(_.key),V=Ys(void 0,z?z.data:void 0);E.fetchers.set(_.key,V)}),new Map(E.fetchers)}function _r(N,_,z,V){if(u)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Yt(N);let G=(V&&V.flushSync)===!0,pe=p||h,ve=Ni(E.location,E.matches,g,b.v7_prependBasename,z,b.v7_relativeSplatPath,_,V==null?void 0:V.relative),oe=kn(pe,ve,g),de=on(oe,pe,ve);if(de.active&&de.matches&&(oe=de.matches),!oe){It(N,_,Mt(404,{pathname:ve}),{flushSync:G});return}let{path:se,submission:le,error:Pe}=Ed(b.v7_normalizeFormMethod,!0,ve,V);if(Pe){It(N,_,Pe,{flushSync:G});return}let $e=Gs(oe,se),ct=(V&&V.preventScrollReset)===!0;if(le&&rr(le.formMethod)){ls(N,_,se,$e,oe,de.active,G,ct,le);return}ye.set(N,{routeId:_,path:se}),sa(N,_,se,$e,oe,de.active,G,ct,le)}async function ls(N,_,z,V,G,pe,ve,oe,de){ln(),ye.delete(N);function se(Be){if(!Be.route.action&&!Be.route.lazy){let Tr=Mt(405,{method:de.formMethod,pathname:z,routeId:_});return It(N,_,Tr,{flushSync:ve}),!0}return!1}if(!pe&&se(V))return;let le=E.fetchers.get(N);Tt(N,fp(de,le),{flushSync:ve});let Pe=new AbortController,$e=ts(s.history,z,Pe.signal,de);if(pe){let Be=await Dr(G,new URL($e.url).pathname,$e.signal,N);if(Be.type==="aborted")return;if(Be.type==="error"){It(N,_,Be.error,{flushSync:ve});return}else if(Be.matches){if(G=Be.matches,V=Gs(G,z),se(V))return}else{It(N,_,Mt(404,{pathname:z}),{flushSync:ve});return}}J.set(N,Pe);let ct=me,Ue=(await Rr("action",E,$e,[V],G,N))[V.route.id];if($e.signal.aborted){J.get(N)===Pe&&J.delete(N);return}if(b.v7_fetcherPersist&&be.has(N)){if(Cn(Ue)||Ut(Ue)){Tt(N,en(void 0));return}}else{if(Cn(Ue))if(J.delete(N),ee>ct){Tt(N,en(void 0));return}else return I.add(N),Tt(N,Ys(de)),sr($e,Ue,!1,{fetcherSubmission:de,preventScrollReset:oe});if(Ut(Ue)){It(N,_,Ue.error);return}}if(tn(Ue))throw Mt(400,{type:"defer-action"});let qe=E.navigation.location||E.location,hr=ts(s.history,qe,Pe.signal),cn=p||h,qt=E.navigation.state!=="idle"?kn(cn,E.navigation.location,g):E.matches;ze(qt,"Didn't find any matches after fetcher action");let Ie=++me;P.set(N,Ie);let fs=Ys(de,Ue.data);E.fetchers.set(N,fs);let[pr,ir]=_d(s.history,E,qt,de,qe,!1,b.v7_skipActionErrorRevalidation,Ee,De,Re,be,ye,I,cn,g,[V.route.id,Ue]);ir.filter(Be=>Be.key!==N).forEach(Be=>{let Tr=Be.key,ua=E.fetchers.get(Tr),_l=Ys(void 0,ua?ua.data:void 0);E.fetchers.set(Tr,_l),Yt(Tr),Be.controller&&J.set(Tr,Be.controller)}),re({fetchers:new Map(E.fetchers)});let gr=()=>ir.forEach(Be=>Yt(Be.key));Pe.signal.addEventListener("abort",gr);let{loaderResults:Mn,fetcherResults:Oe}=await os(E,qt,pr,ir,hr);if(Pe.signal.aborted)return;Pe.signal.removeEventListener("abort",gr),P.delete(N),J.delete(N),ir.forEach(Be=>J.delete(Be.key));let Je=hl(Mn);if(Je)return sr(hr,Je.result,!1,{preventScrollReset:oe});if(Je=hl(Oe),Je)return I.add(Je.key),sr(hr,Je.result,!1,{preventScrollReset:oe});let{loaderData:gt,errors:dn}=Td(E,qt,Mn,void 0,ir,Oe,we);if(E.fetchers.has(N)){let Be=en(Ue.data);E.fetchers.set(N,Be)}_n(Ie),E.navigation.state==="loading"&&Ie>ee?(ze(A,"Expected pending action"),Z&&Z.abort(),ce(E.navigation.location,{matches:qt,loaderData:gt,errors:dn,fetchers:new Map(E.fetchers)})):(re({errors:dn,loaderData:$d(E.loaderData,gt,qt,dn),fetchers:new Map(E.fetchers)}),Ee=!1)}async function sa(N,_,z,V,G,pe,ve,oe,de){let se=E.fetchers.get(N);Tt(N,Ys(de,se?se.data:void 0),{flushSync:ve});let le=new AbortController,Pe=ts(s.history,z,le.signal);if(pe){let Ue=await Dr(G,new URL(Pe.url).pathname,Pe.signal,N);if(Ue.type==="aborted")return;if(Ue.type==="error"){It(N,_,Ue.error,{flushSync:ve});return}else if(Ue.matches)G=Ue.matches,V=Gs(G,z);else{It(N,_,Mt(404,{pathname:z}),{flushSync:ve});return}}J.set(N,le);let $e=me,We=(await Rr("loader",E,Pe,[V],G,N))[V.route.id];if(tn(We)&&(We=await Ti(We,Pe.signal,!0)||We),J.get(N)===le&&J.delete(N),!Pe.signal.aborted){if(be.has(N)){Tt(N,en(void 0));return}if(Cn(We))if(ee>$e){Tt(N,en(void 0));return}else{I.add(N),await sr(Pe,We,!1,{preventScrollReset:oe});return}if(Ut(We)){It(N,_,We.error);return}ze(!tn(We),"Unhandled fetcher deferred data"),Tt(N,en(We.data))}}async function sr(N,_,z,V){let{submission:G,fetcherSubmission:pe,preventScrollReset:ve,replace:oe}=V===void 0?{}:V;_.response.headers.has("X-Remix-Revalidate")&&(Ee=!0);let de=_.response.headers.get("Location");ze(de,"Expected a Location header on the redirect Response"),de=Md(de,new URL(N.url),g);let se=Zs(E.location,de,{_isRedirect:!0});if(l){let Ue=!1;if(_.response.headers.has("X-Remix-Reload-Document"))Ue=!0;else if(Di.test(de)){const qe=s.history.createURL(de);Ue=qe.origin!==o.location.origin||as(qe.pathname,g)==null}if(Ue){oe?o.location.replace(de):o.location.assign(de);return}}Z=null;let le=oe===!0||_.response.headers.has("X-Remix-Replace")?it.Replace:it.Push,{formMethod:Pe,formAction:$e,formEncType:ct}=E.navigation;!G&&!pe&&Pe&&$e&&ct&&(G=Ud(E.navigation));let We=G||pe;if(Qh.has(_.response.status)&&We&&rr(We.formMethod))await Ze(le,se,{submission:tt({},We,{formAction:de}),preventScrollReset:ve||K,enableViewTransition:z?Ce:void 0});else{let Ue=xi(se,G);await Ze(le,se,{overrideNavigation:Ue,fetcherSubmission:pe,preventScrollReset:ve||K,enableViewTransition:z?Ce:void 0})}}async function Rr(N,_,z,V,G,pe){let ve,oe={};try{ve=await ep(y,N,_,z,V,G,pe,m,c)}catch(de){return V.forEach(se=>{oe[se.route.id]={type:Qe.error,error:de}}),oe}for(let[de,se]of Object.entries(ve))if(lp(se)){let le=se.result;oe[de]={type:Qe.redirect,response:np(le,z,de,G,g,b.v7_relativeSplatPath)}}else oe[de]=await rp(se);return oe}async function os(N,_,z,V,G){let pe=N.matches,ve=Rr("loader",N,G,z,_,null),oe=Promise.all(V.map(async le=>{if(le.matches&&le.match&&le.controller){let $e=(await Rr("loader",N,ts(s.history,le.path,le.controller.signal),[le.match],le.matches,le.key))[le.match.route.id];return{[le.key]:$e}}else return Promise.resolve({[le.key]:{type:Qe.error,error:Mt(404,{pathname:le.path})}})})),de=await ve,se=(await oe).reduce((le,Pe)=>Object.assign(le,Pe),{});return await Promise.all([up(_,de,G.signal,pe,N.loaderData),cp(_,se,V)]),{loaderResults:de,fetcherResults:se}}function ln(){Ee=!0,De.push(...or()),ye.forEach((N,_)=>{J.has(_)&&Re.add(_),Yt(_)})}function Tt(N,_,z){z===void 0&&(z={}),E.fetchers.set(N,_),re({fetchers:new Map(E.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function It(N,_,z,V){V===void 0&&(V={});let G=Sn(E.matches,_);ar(N),re({errors:{[G.route.id]:z},fetchers:new Map(E.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function Lr(N){return ke.set(N,(ke.get(N)||0)+1),be.has(N)&&be.delete(N),E.fetchers.get(N)||Jh}function ar(N){let _=E.fetchers.get(N);J.has(N)&&!(_&&_.state==="loading"&&P.has(N))&&Yt(N),ye.delete(N),P.delete(N),I.delete(N),b.v7_fetcherPersist&&be.delete(N),Re.delete(N),E.fetchers.delete(N)}function Pl(N){let _=(ke.get(N)||0)-1;_<=0?(ke.delete(N),be.add(N),b.v7_fetcherPersist||ar(N)):ke.set(N,_),re({fetchers:new Map(E.fetchers)})}function Yt(N){let _=J.get(N);_&&(_.abort(),J.delete(N))}function is(N){for(let _ of N){let z=Lr(_),V=en(z.data);E.fetchers.set(_,V)}}function aa(){let N=[],_=!1;for(let z of I){let V=E.fetchers.get(z);ze(V,"Expected fetcher: "+z),V.state==="loading"&&(I.delete(z),N.push(z),_=!0)}return is(N),_}function _n(N){let _=[];for(let[z,V]of P)if(V<N){let G=E.fetchers.get(z);ze(G,"Expected fetcher: "+z),G.state==="loading"&&(Yt(z),P.delete(z),_.push(z))}return is(_),_.length>0}function us(N,_){let z=E.blockers.get(N)||Js;return B.get(N)!==_&&B.set(N,_),z}function Rn(N){E.blockers.delete(N),B.delete(N)}function Mr(N,_){let z=E.blockers.get(N)||Js;ze(z.state==="unblocked"&&_.state==="blocked"||z.state==="blocked"&&_.state==="blocked"||z.state==="blocked"&&_.state==="proceeding"||z.state==="blocked"&&_.state==="unblocked"||z.state==="proceeding"&&_.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+_.state);let V=new Map(E.blockers);V.set(N,_),re({blockers:V})}function Ln(N){let{currentLocation:_,nextLocation:z,historyAction:V}=N;if(B.size===0)return;B.size>1&&rs(!1,"A router only supports one blocker at a time");let G=Array.from(B.entries()),[pe,ve]=G[G.length-1],oe=E.blockers.get(pe);if(!(oe&&oe.state==="proceeding")&&ve({currentLocation:_,nextLocation:z,historyAction:V}))return pe}function lr(N){let _=Mt(404,{pathname:N}),z=p||h,{matches:V,route:G}=zd(z);return or(),{notFoundMatches:V,route:G,error:_}}function or(N){let _=[];return we.forEach((z,V)=>{(!N||N(V))&&(z.cancel(),_.push(V),we.delete(V))}),_}function la(N,_,z){if(M=N,R=_,D=z||null,!U&&E.navigation===gi){U=!0;let V=ds(E.location,E.matches);V!=null&&re({restoreScrollPosition:V})}return()=>{M=null,R=null,D=null}}function cs(N,_){return D&&D(N,_.map(V=>kh(V,E.loaderData)))||N.key}function oa(N,_){if(M&&R){let z=cs(N,_);M[z]=R()}}function ds(N,_){if(M){let z=cs(N,_),V=M[z];if(typeof V=="number")return V}return null}function on(N,_,z){if(j)if(N){if(Object.keys(N[0].params).length>0)return{active:!0,matches:gl(_,z,g,!0)}}else return{active:!0,matches:gl(_,z,g,!0)||[]};return{active:!1,matches:null}}async function Dr(N,_,z,V){if(!j)return{type:"success",matches:N};let G=N;for(;;){let pe=p==null,ve=p||h,oe=m;try{await j({signal:z,path:_,matches:G,fetcherKey:V,patch:(le,Pe)=>{z.aborted||Ld(le,Pe,ve,oe,c)}})}catch(le){return{type:"error",error:le,partialMatches:G}}finally{pe&&!z.aborted&&(h=[...h])}if(z.aborted)return{type:"aborted"};let de=kn(ve,_,g);if(de)return{type:"success",matches:de};let se=gl(ve,_,g,!0);if(!se||G.length===se.length&&G.every((le,Pe)=>le.route.id===se[Pe].route.id))return{type:"success",matches:null};G=se}}function ia(N){m={},p=yl(N,c,void 0,m)}function un(N,_){let z=p==null;Ld(N,_,p||h,m,c),z&&(h=[...h],re({}))}return te={get basename(){return g},get future(){return b},get state(){return E},get routes(){return h},get window(){return o},initialize:Te,subscribe:Nt,enableScrollRestoration:la,navigate:Le,fetch:_r,revalidate:Ge,createHref:N=>s.history.createHref(N),encodeLocation:N=>s.history.encodeLocation(N),getFetcher:Lr,deleteFetcher:Pl,dispose:ut,getBlocker:us,deleteBlocker:Rn,patchRoutes:un,_internalFetchControllers:J,_internalActiveDeferreds:we,_internalSetRoutes:ia},te}function Kh(s){return s!=null&&("formData"in s&&s.formData!=null||"body"in s&&s.body!==void 0)}function Ni(s,o,l,u,c,m,h,p){let g,y;if(h){g=[];for(let b of o)if(g.push(b),b.route.id===h){y=b;break}}else g=o,y=o[o.length-1];let j=Mi(c||".",Li(g,m),as(s.pathname,l)||s.pathname,p==="path");if(c==null&&(j.search=s.search,j.hash=s.hash),(c==null||c===""||c===".")&&y){let b=$i(j.search);if(y.route.index&&!b)j.search=j.search?j.search.replace(/^\?/,"?index&"):"?index";else if(!y.route.index&&b){let w=new URLSearchParams(j.search),S=w.getAll("index");w.delete("index"),S.filter(D=>D).forEach(D=>w.append("index",D));let M=w.toString();j.search=M?"?"+M:""}}return u&&l!=="/"&&(j.pathname=j.pathname==="/"?l:Sr([l,j.pathname])),En(j)}function Ed(s,o,l,u){if(!u||!Kh(u))return{path:l};if(u.formMethod&&!ip(u.formMethod))return{path:l,error:Mt(405,{method:u.formMethod})};let c=()=>({path:l,error:Mt(400,{type:"invalid-body"})}),m=u.formMethod||"get",h=s?m.toUpperCase():m.toLowerCase(),p=cf(l);if(u.body!==void 0){if(u.formEncType==="text/plain"){if(!rr(h))return c();let w=typeof u.body=="string"?u.body:u.body instanceof FormData||u.body instanceof URLSearchParams?Array.from(u.body.entries()).reduce((S,M)=>{let[D,R]=M;return""+S+D+"="+R+`
`},""):String(u.body);return{path:l,submission:{formMethod:h,formAction:p,formEncType:u.formEncType,formData:void 0,json:void 0,text:w}}}else if(u.formEncType==="application/json"){if(!rr(h))return c();try{let w=typeof u.body=="string"?JSON.parse(u.body):u.body;return{path:l,submission:{formMethod:h,formAction:p,formEncType:u.formEncType,formData:void 0,json:w,text:void 0}}}catch{return c()}}}ze(typeof FormData=="function","FormData is not available in this environment");let g,y;if(u.formData)g=Si(u.formData),y=u.formData;else if(u.body instanceof FormData)g=Si(u.body),y=u.body;else if(u.body instanceof URLSearchParams)g=u.body,y=Dd(g);else if(u.body==null)g=new URLSearchParams,y=new FormData;else try{g=new URLSearchParams(u.body),y=Dd(g)}catch{return c()}let j={formMethod:h,formAction:p,formEncType:u&&u.formEncType||"application/x-www-form-urlencoded",formData:y,json:void 0,text:void 0};if(rr(j.formMethod))return{path:l,submission:j};let b=nn(l);return o&&b.search&&$i(b.search)&&g.append("index",""),b.search="?"+g,{path:En(b),submission:j}}function Pd(s,o,l){l===void 0&&(l=!1);let u=s.findIndex(c=>c.route.id===o);return u>=0?s.slice(0,l?u+1:u):s}function _d(s,o,l,u,c,m,h,p,g,y,j,b,w,S,M,D){let R=D?Ut(D[1])?D[1].error:D[1].data:void 0,U=s.createURL(o.location),T=s.createURL(c),O=l;m&&o.errors?O=Pd(l,Object.keys(o.errors)[0],!0):D&&Ut(D[1])&&(O=Pd(l,D[0]));let q=D?D[1].statusCode:void 0,Q=h&&q&&q>=400,te=O.filter((A,K)=>{let{route:Z}=A;if(Z.lazy)return!0;if(Z.loader==null)return!1;if(m)return ki(Z,o.loaderData,o.errors);if(Xh(o.loaderData,o.matches[K],A)||g.some(Fe=>Fe===A.route.id))return!0;let Ce=o.matches[K],je=A;return Rd(A,tt({currentUrl:U,currentParams:Ce.params,nextUrl:T,nextParams:je.params},u,{actionResult:R,actionStatus:q,defaultShouldRevalidate:Q?!1:p||U.pathname+U.search===T.pathname+T.search||U.search!==T.search||of(Ce,je)}))}),E=[];return b.forEach((A,K)=>{if(m||!l.some(Ne=>Ne.route.id===A.routeId)||j.has(K))return;let Z=kn(S,A.path,M);if(!Z){E.push({key:K,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let Ce=o.fetchers.get(K),je=Gs(Z,A.path),Fe=!1;w.has(K)?Fe=!1:y.has(K)?(y.delete(K),Fe=!0):Ce&&Ce.state!=="idle"&&Ce.data===void 0?Fe=p:Fe=Rd(je,tt({currentUrl:U,currentParams:o.matches[o.matches.length-1].params,nextUrl:T,nextParams:l[l.length-1].params},u,{actionResult:R,actionStatus:q,defaultShouldRevalidate:Q?!1:p})),Fe&&E.push({key:K,routeId:A.routeId,path:A.path,matches:Z,match:je,controller:new AbortController})}),[te,E]}function ki(s,o,l){if(s.lazy)return!0;if(!s.loader)return!1;let u=o!=null&&o[s.id]!==void 0,c=l!=null&&l[s.id]!==void 0;return!u&&c?!1:typeof s.loader=="function"&&s.loader.hydrate===!0?!0:!u&&!c}function Xh(s,o,l){let u=!o||l.route.id!==o.route.id,c=s[l.route.id]===void 0;return u||c}function of(s,o){let l=s.route.path;return s.pathname!==o.pathname||l!=null&&l.endsWith("*")&&s.params["*"]!==o.params["*"]}function Rd(s,o){if(s.route.shouldRevalidate){let l=s.route.shouldRevalidate(o);if(typeof l=="boolean")return l}return o.defaultShouldRevalidate}function Ld(s,o,l,u,c){var m;let h;if(s){let y=u[s];ze(y,"No route found to patch children into: routeId = "+s),y.children||(y.children=[]),h=y.children}else h=l;let p=o.filter(y=>!h.some(j=>uf(y,j))),g=yl(p,c,[s||"_","patch",String(((m=h)==null?void 0:m.length)||"0")],u);h.push(...g)}function uf(s,o){return"id"in s&&"id"in o&&s.id===o.id?!0:s.index===o.index&&s.path===o.path&&s.caseSensitive===o.caseSensitive?(!s.children||s.children.length===0)&&(!o.children||o.children.length===0)?!0:s.children.every((l,u)=>{var c;return(c=o.children)==null?void 0:c.some(m=>uf(l,m))}):!1}async function Gh(s,o,l){if(!s.lazy)return;let u=await s.lazy();if(!s.lazy)return;let c=l[s.id];ze(c,"No route found in manifest");let m={};for(let h in u){let g=c[h]!==void 0&&h!=="hasErrorBoundary";rs(!g,'Route "'+c.id+'" has a static property "'+h+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+h+'" will be ignored.')),!g&&!bh.has(h)&&(m[h]=u[h])}Object.assign(c,m),Object.assign(c,tt({},o(c),{lazy:void 0}))}async function Zh(s){let{matches:o}=s,l=o.filter(c=>c.shouldLoad);return(await Promise.all(l.map(c=>c.resolve()))).reduce((c,m,h)=>Object.assign(c,{[l[h].route.id]:m}),{})}async function ep(s,o,l,u,c,m,h,p,g,y){let j=m.map(S=>S.route.lazy?Gh(S.route,g,p):void 0),b=m.map((S,M)=>{let D=j[M],R=c.some(T=>T.route.id===S.route.id);return tt({},S,{shouldLoad:R,resolve:async T=>(T&&u.method==="GET"&&(S.route.lazy||S.route.loader)&&(R=!0),R?tp(o,u,S,D,T,y):Promise.resolve({type:Qe.data,result:void 0}))})}),w=await s({matches:b,request:u,params:m[0].params,fetcherKey:h,context:y});try{await Promise.all(j)}catch{}return w}async function tp(s,o,l,u,c,m){let h,p,g=y=>{let j,b=new Promise((M,D)=>j=D);p=()=>j(),o.signal.addEventListener("abort",p);let w=M=>typeof y!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+s+'" [routeId: '+l.route.id+"]"))):y({request:o,params:l.params,context:m},...M!==void 0?[M]:[]),S=(async()=>{try{return{type:"data",result:await(c?c(D=>w(D)):w())}}catch(M){return{type:"error",result:M}}})();return Promise.race([S,b])};try{let y=l.route[s];if(u)if(y){let j,[b]=await Promise.all([g(y).catch(w=>{j=w}),u]);if(j!==void 0)throw j;h=b}else if(await u,y=l.route[s],y)h=await g(y);else if(s==="action"){let j=new URL(o.url),b=j.pathname+j.search;throw Mt(405,{method:o.method,pathname:b,routeId:l.route.id})}else return{type:Qe.data,result:void 0};else if(y)h=await g(y);else{let j=new URL(o.url),b=j.pathname+j.search;throw Mt(404,{pathname:b})}ze(h.result!==void 0,"You defined "+(s==="action"?"an action":"a loader")+" for route "+('"'+l.route.id+"\" but didn't return anything from your `"+s+"` ")+"function. Please return a value or `null`.")}catch(y){return{type:Qe.error,result:y}}finally{p&&o.signal.removeEventListener("abort",p)}return h}async function rp(s){let{result:o,type:l}=s;if(df(o)){let b;try{let w=o.headers.get("Content-Type");w&&/\bapplication\/json\b/.test(w)?o.body==null?b=null:b=await o.json():b=await o.text()}catch(w){return{type:Qe.error,error:w}}return l===Qe.error?{type:Qe.error,error:new vl(o.status,o.statusText,b),statusCode:o.status,headers:o.headers}:{type:Qe.data,data:b,statusCode:o.status,headers:o.headers}}if(l===Qe.error){if(Od(o)){var u,c;if(o.data instanceof Error){var m,h;return{type:Qe.error,error:o.data,statusCode:(m=o.init)==null?void 0:m.status,headers:(h=o.init)!=null&&h.headers?new Headers(o.init.headers):void 0}}return{type:Qe.error,error:new vl(((u=o.init)==null?void 0:u.status)||500,void 0,o.data),statusCode:ea(o)?o.status:void 0,headers:(c=o.init)!=null&&c.headers?new Headers(o.init.headers):void 0}}return{type:Qe.error,error:o,statusCode:ea(o)?o.status:void 0}}if(op(o)){var p,g;return{type:Qe.deferred,deferredData:o,statusCode:(p=o.init)==null?void 0:p.status,headers:((g=o.init)==null?void 0:g.headers)&&new Headers(o.init.headers)}}if(Od(o)){var y,j;return{type:Qe.data,data:o.data,statusCode:(y=o.init)==null?void 0:y.status,headers:(j=o.init)!=null&&j.headers?new Headers(o.init.headers):void 0}}return{type:Qe.data,data:o}}function np(s,o,l,u,c,m){let h=s.headers.get("Location");if(ze(h,"Redirects returned/thrown from loaders/actions must have a Location header"),!Di.test(h)){let p=u.slice(0,u.findIndex(g=>g.route.id===l)+1);h=Ni(new URL(o.url),p,c,!0,h,m),s.headers.set("Location",h)}return s}function Md(s,o,l){if(Di.test(s)){let u=s,c=u.startsWith("//")?new URL(o.protocol+u):new URL(u),m=as(c.pathname,l)!=null;if(c.origin===o.origin&&m)return c.pathname+c.search+c.hash}return s}function ts(s,o,l,u){let c=s.createURL(cf(o)).toString(),m={signal:l};if(u&&rr(u.formMethod)){let{formMethod:h,formEncType:p}=u;m.method=h.toUpperCase(),p==="application/json"?(m.headers=new Headers({"Content-Type":p}),m.body=JSON.stringify(u.json)):p==="text/plain"?m.body=u.text:p==="application/x-www-form-urlencoded"&&u.formData?m.body=Si(u.formData):m.body=u.formData}return new Request(c,m)}function Si(s){let o=new URLSearchParams;for(let[l,u]of s.entries())o.append(l,typeof u=="string"?u:u.name);return o}function Dd(s){let o=new FormData;for(let[l,u]of s.entries())o.append(l,u);return o}function sp(s,o,l,u,c){let m={},h=null,p,g=!1,y={},j=l&&Ut(l[1])?l[1].error:void 0;return s.forEach(b=>{if(!(b.route.id in o))return;let w=b.route.id,S=o[w];if(ze(!Cn(S),"Cannot handle redirect results in processLoaderData"),Ut(S)){let M=S.error;j!==void 0&&(M=j,j=void 0),h=h||{};{let D=Sn(s,w);h[D.route.id]==null&&(h[D.route.id]=M)}m[w]=void 0,g||(g=!0,p=ea(S.error)?S.error.status:500),S.headers&&(y[w]=S.headers)}else tn(S)?(u.set(w,S.deferredData),m[w]=S.deferredData.data,S.statusCode!=null&&S.statusCode!==200&&!g&&(p=S.statusCode),S.headers&&(y[w]=S.headers)):(m[w]=S.data,S.statusCode&&S.statusCode!==200&&!g&&(p=S.statusCode),S.headers&&(y[w]=S.headers))}),j!==void 0&&l&&(h={[l[0]]:j},m[l[0]]=void 0),{loaderData:m,errors:h,statusCode:p||200,loaderHeaders:y}}function Td(s,o,l,u,c,m,h){let{loaderData:p,errors:g}=sp(o,l,u,h);return c.forEach(y=>{let{key:j,match:b,controller:w}=y,S=m[j];if(ze(S,"Did not find corresponding fetcher result"),!(w&&w.signal.aborted))if(Ut(S)){let M=Sn(s.matches,b==null?void 0:b.route.id);g&&g[M.route.id]||(g=tt({},g,{[M.route.id]:S.error})),s.fetchers.delete(j)}else if(Cn(S))ze(!1,"Unhandled fetcher revalidation redirect");else if(tn(S))ze(!1,"Unhandled fetcher deferred data");else{let M=en(S.data);s.fetchers.set(j,M)}}),{loaderData:p,errors:g}}function $d(s,o,l,u){let c=tt({},o);for(let m of l){let h=m.route.id;if(o.hasOwnProperty(h)?o[h]!==void 0&&(c[h]=o[h]):s[h]!==void 0&&m.route.loader&&(c[h]=s[h]),u&&u.hasOwnProperty(h))break}return c}function Fd(s){return s?Ut(s[1])?{actionData:{}}:{actionData:{[s[0]]:s[1].data}}:{}}function Sn(s,o){return(o?s.slice(0,s.findIndex(u=>u.route.id===o)+1):[...s]).reverse().find(u=>u.route.hasErrorBoundary===!0)||s[0]}function zd(s){let o=s.length===1?s[0]:s.find(l=>l.index||!l.path||l.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:o}],route:o}}function Mt(s,o){let{pathname:l,routeId:u,method:c,type:m,message:h}=o===void 0?{}:o,p="Unknown Server Error",g="Unknown @remix-run/router error";return s===400?(p="Bad Request",c&&l&&u?g="You made a "+c+' request to "'+l+'" but '+('did not provide a `loader` for route "'+u+'", ')+"so there is no way to handle the request.":m==="defer-action"?g="defer() is not supported in actions":m==="invalid-body"&&(g="Unable to encode submission body")):s===403?(p="Forbidden",g='Route "'+u+'" does not match URL "'+l+'"'):s===404?(p="Not Found",g='No route matches URL "'+l+'"'):s===405&&(p="Method Not Allowed",c&&l&&u?g="You made a "+c.toUpperCase()+' request to "'+l+'" but '+('did not provide an `action` for route "'+u+'", ')+"so there is no way to handle the request.":c&&(g='Invalid request method "'+c.toUpperCase()+'"')),new vl(s||500,p,new Error(g),!0)}function hl(s){let o=Object.entries(s);for(let l=o.length-1;l>=0;l--){let[u,c]=o[l];if(Cn(c))return{key:u,result:c}}}function cf(s){let o=typeof s=="string"?nn(s):s;return En(tt({},o,{hash:""}))}function ap(s,o){return s.pathname!==o.pathname||s.search!==o.search?!1:s.hash===""?o.hash!=="":s.hash===o.hash?!0:o.hash!==""}function lp(s){return df(s.result)&&Hh.has(s.result.status)}function tn(s){return s.type===Qe.deferred}function Ut(s){return s.type===Qe.error}function Cn(s){return(s&&s.type)===Qe.redirect}function Od(s){return typeof s=="object"&&s!=null&&"type"in s&&"data"in s&&"init"in s&&s.type==="DataWithResponseInit"}function op(s){let o=s;return o&&typeof o=="object"&&typeof o.data=="object"&&typeof o.subscribe=="function"&&typeof o.cancel=="function"&&typeof o.resolveData=="function"}function df(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.headers=="object"&&typeof s.body<"u"}function ip(s){return Wh.has(s.toLowerCase())}function rr(s){return Bh.has(s.toLowerCase())}async function up(s,o,l,u,c){let m=Object.entries(o);for(let h=0;h<m.length;h++){let[p,g]=m[h],y=s.find(w=>(w==null?void 0:w.route.id)===p);if(!y)continue;let j=u.find(w=>w.route.id===y.route.id),b=j!=null&&!of(j,y)&&(c&&c[y.route.id])!==void 0;tn(g)&&b&&await Ti(g,l,!1).then(w=>{w&&(o[p]=w)})}}async function cp(s,o,l){for(let u=0;u<l.length;u++){let{key:c,routeId:m,controller:h}=l[u],p=o[c];s.find(y=>(y==null?void 0:y.route.id)===m)&&tn(p)&&(ze(h,"Expected an AbortController for revalidating fetcher deferred result"),await Ti(p,h.signal,!0).then(y=>{y&&(o[c]=y)}))}}async function Ti(s,o,l){if(l===void 0&&(l=!1),!await s.deferredData.resolveData(o)){if(l)try{return{type:Qe.data,data:s.deferredData.unwrappedData}}catch(c){return{type:Qe.error,error:c}}return{type:Qe.data,data:s.deferredData.data}}}function $i(s){return new URLSearchParams(s).getAll("index").some(o=>o==="")}function Gs(s,o){let l=typeof o=="string"?nn(o).search:o.search;if(s[s.length-1].route.index&&$i(l||""))return s[s.length-1];let u=sf(s);return u[u.length-1]}function Ud(s){let{formMethod:o,formAction:l,formEncType:u,text:c,formData:m,json:h}=s;if(!(!o||!l||!u)){if(c!=null)return{formMethod:o,formAction:l,formEncType:u,formData:void 0,json:void 0,text:c};if(m!=null)return{formMethod:o,formAction:l,formEncType:u,formData:m,json:void 0,text:void 0};if(h!==void 0)return{formMethod:o,formAction:l,formEncType:u,formData:void 0,json:h,text:void 0}}}function xi(s,o){return o?{state:"loading",location:s,formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text}:{state:"loading",location:s,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function dp(s,o){return{state:"submitting",location:s,formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text}}function Ys(s,o){return s?{state:"loading",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:o}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:o}}function fp(s,o){return{state:"submitting",formMethod:s.formMethod,formAction:s.formAction,formEncType:s.formEncType,formData:s.formData,json:s.json,text:s.text,data:o?o.data:void 0}}function en(s){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:s}}function mp(s,o){try{let l=s.sessionStorage.getItem(lf);if(l){let u=JSON.parse(l);for(let[c,m]of Object.entries(u||{}))m&&Array.isArray(m)&&o.set(c,new Set(m||[]))}}catch{}}function hp(s,o){if(o.size>0){let l={};for(let[u,c]of o)l[u]=[...c];try{s.sessionStorage.setItem(lf,JSON.stringify(l))}catch(u){rs(!1,"Failed to save applied view transitions in sessionStorage ("+u+").")}}}/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(s){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])}return s},wl.apply(this,arguments)}const kl=x.createContext(null),ff=x.createContext(null),Pn=x.createContext(null),Fi=x.createContext(null),Cr=x.createContext({outlet:null,matches:[],isDataRoute:!1}),mf=x.createContext(null);function pp(s,o){let{relative:l}=o===void 0?{}:o;ra()||ze(!1);let{basename:u,navigator:c}=x.useContext(Pn),{hash:m,pathname:h,search:p}=pf(s,{relative:l}),g=h;return u!=="/"&&(g=h==="/"?u:Sr([u,h])),c.createHref({pathname:g,search:p,hash:m})}function ra(){return x.useContext(Fi)!=null}function na(){return ra()||ze(!1),x.useContext(Fi).location}function hf(s){x.useContext(Pn).static||x.useLayoutEffect(s)}function mr(){let{isDataRoute:s}=x.useContext(Cr);return s?_p():gp()}function gp(){ra()||ze(!1);let s=x.useContext(kl),{basename:o,future:l,navigator:u}=x.useContext(Pn),{matches:c}=x.useContext(Cr),{pathname:m}=na(),h=JSON.stringify(Li(c,l.v7_relativeSplatPath)),p=x.useRef(!1);return hf(()=>{p.current=!0}),x.useCallback(function(y,j){if(j===void 0&&(j={}),!p.current)return;if(typeof y=="number"){u.go(y);return}let b=Mi(y,JSON.parse(h),m,j.relative==="path");s==null&&o!=="/"&&(b.pathname=b.pathname==="/"?o:Sr([o,b.pathname])),(j.replace?u.replace:u.push)(b,j.state,j)},[o,u,h,m,s])}const xp=x.createContext(null);function yp(s){let o=x.useContext(Cr).outlet;return o&&x.createElement(xp.Provider,{value:s},o)}function Sl(){let{matches:s}=x.useContext(Cr),o=s[s.length-1];return o?o.params:{}}function pf(s,o){let{relative:l}=o===void 0?{}:o,{future:u}=x.useContext(Pn),{matches:c}=x.useContext(Cr),{pathname:m}=na(),h=JSON.stringify(Li(c,u.v7_relativeSplatPath));return x.useMemo(()=>Mi(s,JSON.parse(h),m,l==="path"),[s,h,m,l])}function vp(s,o,l,u){ra()||ze(!1);let{navigator:c,static:m}=x.useContext(Pn),{matches:h}=x.useContext(Cr),p=h[h.length-1],g=p?p.params:{};p&&p.pathname;let y=p?p.pathnameBase:"/";p&&p.route;let j=na(),b;b=j;let w=b.pathname||"/",S=w;if(y!=="/"){let R=y.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let M=!m&&l&&l.matches&&l.matches.length>0?l.matches:kn(s,{pathname:S});return kp(M&&M.map(R=>Object.assign({},R,{params:Object.assign({},g,R.params),pathname:Sr([y,c.encodeLocation?c.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?y:Sr([y,c.encodeLocation?c.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),h,l,u)}function wp(){let s=Pp(),o=ea(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),l=s instanceof Error?s.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},o),l?x.createElement("pre",{style:c},l):null,null)}const jp=x.createElement(wp,null);class bp extends x.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,l){return l.location!==o.location||l.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:l.error,location:l.location,revalidation:o.revalidation||l.revalidation}}componentDidCatch(o,l){console.error("React Router caught the following error during render",o,l)}render(){return this.state.error!==void 0?x.createElement(Cr.Provider,{value:this.props.routeContext},x.createElement(mf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Np(s){let{routeContext:o,match:l,children:u}=s,c=x.useContext(kl);return c&&c.static&&c.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=l.route.id),x.createElement(Cr.Provider,{value:o},u)}function kp(s,o,l,u){var c;if(o===void 0&&(o=[]),l===void 0&&(l=null),u===void 0&&(u=null),s==null){var m;if(!l)return null;if(l.errors)s=l.matches;else if((m=u)!=null&&m.v7_partialHydration&&o.length===0&&!l.initialized&&l.matches.length>0)s=l.matches;else return null}let h=s,p=(c=l)==null?void 0:c.errors;if(p!=null){let j=h.findIndex(b=>b.route.id&&(p==null?void 0:p[b.route.id])!==void 0);j>=0||ze(!1),h=h.slice(0,Math.min(h.length,j+1))}let g=!1,y=-1;if(l&&u&&u.v7_partialHydration)for(let j=0;j<h.length;j++){let b=h[j];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(y=j),b.route.id){let{loaderData:w,errors:S}=l,M=b.route.loader&&w[b.route.id]===void 0&&(!S||S[b.route.id]===void 0);if(b.route.lazy||M){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((j,b,w)=>{let S,M=!1,D=null,R=null;l&&(S=p&&b.route.id?p[b.route.id]:void 0,D=b.route.errorElement||jp,g&&(y<0&&w===0?(Rp("route-fallback"),M=!0,R=null):y===w&&(M=!0,R=b.route.hydrateFallbackElement||null)));let U=o.concat(h.slice(0,w+1)),T=()=>{let O;return S?O=D:M?O=R:b.route.Component?O=x.createElement(b.route.Component,null):b.route.element?O=b.route.element:O=j,x.createElement(Np,{match:b,routeContext:{outlet:j,matches:U,isDataRoute:l!=null},children:O})};return l&&(b.route.ErrorBoundary||b.route.errorElement||w===0)?x.createElement(bp,{location:l.location,revalidation:l.revalidation,component:D,error:S,children:T(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):T()},null)}var gf=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(gf||{}),xf=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(xf||{});function Sp(s){let o=x.useContext(kl);return o||ze(!1),o}function Cp(s){let o=x.useContext(ff);return o||ze(!1),o}function Ep(s){let o=x.useContext(Cr);return o||ze(!1),o}function yf(s){let o=Ep(),l=o.matches[o.matches.length-1];return l.route.id||ze(!1),l.route.id}function Pp(){var s;let o=x.useContext(mf),l=Cp(xf.UseRouteError),u=yf();return o!==void 0?o:(s=l.errors)==null?void 0:s[u]}function _p(){let{router:s}=Sp(gf.UseNavigateStable),o=yf(),l=x.useRef(!1);return hf(()=>{l.current=!0}),x.useCallback(function(c,m){m===void 0&&(m={}),l.current&&(typeof c=="number"?s.navigate(c):s.navigate(c,wl({fromRouteId:o},m)))},[s,o])}const Ad={};function Rp(s,o,l){Ad[s]||(Ad[s]=!0)}function Lp(s,o){s==null||s.v7_startTransition,(s==null?void 0:s.v7_relativeSplatPath)===void 0&&(!o||o.v7_relativeSplatPath),o&&(o.v7_fetcherPersist,o.v7_normalizeFormMethod,o.v7_partialHydration,o.v7_skipActionErrorRevalidation)}function Mp(s){return yp(s.context)}function Dp(s){let{basename:o="/",children:l=null,location:u,navigationType:c=it.Pop,navigator:m,static:h=!1,future:p}=s;ra()&&ze(!1);let g=o.replace(/^\/*/,"/"),y=x.useMemo(()=>({basename:g,navigator:m,static:h,future:wl({v7_relativeSplatPath:!1},p)}),[g,p,m,h]);typeof u=="string"&&(u=nn(u));let{pathname:j="/",search:b="",hash:w="",state:S=null,key:M="default"}=u,D=x.useMemo(()=>{let R=as(j,g);return R==null?null:{location:{pathname:R,search:b,hash:w,state:S,key:M},navigationType:c}},[g,j,b,w,S,M,c]);return D==null?null:x.createElement(Pn.Provider,{value:y},x.createElement(Fi.Provider,{children:l,value:D}))}new Promise(()=>{});function Tp(s){let o={hasErrorBoundary:s.ErrorBoundary!=null||s.errorElement!=null};return s.Component&&Object.assign(o,{element:x.createElement(s.Component),Component:void 0}),s.HydrateFallback&&Object.assign(o,{hydrateFallbackElement:x.createElement(s.HydrateFallback),HydrateFallback:void 0}),s.ErrorBoundary&&Object.assign(o,{errorElement:x.createElement(s.ErrorBoundary),ErrorBoundary:void 0}),o}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(s){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])}return s},ta.apply(this,arguments)}function $p(s,o){if(s==null)return{};var l={},u=Object.keys(s),c,m;for(m=0;m<u.length;m++)c=u[m],!(o.indexOf(c)>=0)&&(l[c]=s[c]);return l}function Fp(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function zp(s,o){return s.button===0&&(!o||o==="_self")&&!Fp(s)}function Ci(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((o,l)=>{let u=s[l];return o.concat(Array.isArray(u)?u.map(c=>[l,c]):[[l,u]])},[]))}function Op(s,o){let l=Ci(s);return o&&o.forEach((u,c)=>{l.has(c)||o.getAll(c).forEach(m=>{l.append(c,m)})}),l}const Up=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ap="6";try{window.__reactRouterVersion=Ap}catch{}function Ip(s,o){return qh({basename:void 0,future:ta({},void 0,{v7_prependBasename:!0}),history:vh({window:void 0}),hydrationData:Bp(),routes:s,mapRouteProperties:Tp,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Bp(){var s;let o=(s=window)==null?void 0:s.__staticRouterHydrationData;return o&&o.errors&&(o=ta({},o,{errors:Vp(o.errors)})),o}function Vp(s){if(!s)return null;let o=Object.entries(s),l={};for(let[u,c]of o)if(c&&c.__type==="RouteErrorResponse")l[u]=new vl(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){if(c.__subType){let m=window[c.__subType];if(typeof m=="function")try{let h=new m(c.message);h.stack="",l[u]=h}catch{}}if(l[u]==null){let m=new Error(c.message);m.stack="",l[u]=m}}else l[u]=c;return l}const Wp=x.createContext({isTransitioning:!1}),Hp=x.createContext(new Map),Qp="startTransition",Id=dh[Qp],Jp="flushSync",Bd=yh[Jp];function Yp(s){Id?Id(s):s()}function qs(s){Bd?Bd(s):s()}class qp{constructor(){this.status="pending",this.promise=new Promise((o,l)=>{this.resolve=u=>{this.status==="pending"&&(this.status="resolved",o(u))},this.reject=u=>{this.status==="pending"&&(this.status="rejected",l(u))}})}}function Kp(s){let{fallbackElement:o,router:l,future:u}=s,[c,m]=x.useState(l.state),[h,p]=x.useState(),[g,y]=x.useState({isTransitioning:!1}),[j,b]=x.useState(),[w,S]=x.useState(),[M,D]=x.useState(),R=x.useRef(new Map),{v7_startTransition:U}=u||{},T=x.useCallback(A=>{U?Yp(A):A()},[U]),O=x.useCallback((A,K)=>{let{deletedFetchers:Z,flushSync:Ce,viewTransitionOpts:je}=K;A.fetchers.forEach((Ne,Ee)=>{Ne.data!==void 0&&R.current.set(Ee,Ne.data)}),Z.forEach(Ne=>R.current.delete(Ne));let Fe=l.window==null||l.window.document==null||typeof l.window.document.startViewTransition!="function";if(!je||Fe){Ce?qs(()=>m(A)):T(()=>m(A));return}if(Ce){qs(()=>{w&&(j&&j.resolve(),w.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:je.currentLocation,nextLocation:je.nextLocation})});let Ne=l.window.document.startViewTransition(()=>{qs(()=>m(A))});Ne.finished.finally(()=>{qs(()=>{b(void 0),S(void 0),p(void 0),y({isTransitioning:!1})})}),qs(()=>S(Ne));return}w?(j&&j.resolve(),w.skipTransition(),D({state:A,currentLocation:je.currentLocation,nextLocation:je.nextLocation})):(p(A),y({isTransitioning:!0,flushSync:!1,currentLocation:je.currentLocation,nextLocation:je.nextLocation}))},[l.window,w,j,R,T]);x.useLayoutEffect(()=>l.subscribe(O),[l,O]),x.useEffect(()=>{g.isTransitioning&&!g.flushSync&&b(new qp)},[g]),x.useEffect(()=>{if(j&&h&&l.window){let A=h,K=j.promise,Z=l.window.document.startViewTransition(async()=>{T(()=>m(A)),await K});Z.finished.finally(()=>{b(void 0),S(void 0),p(void 0),y({isTransitioning:!1})}),S(Z)}},[T,h,j,l.window]),x.useEffect(()=>{j&&h&&c.location.key===h.location.key&&j.resolve()},[j,w,c.location,h]),x.useEffect(()=>{!g.isTransitioning&&M&&(p(M.state),y({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}),D(void 0))},[g.isTransitioning,M]),x.useEffect(()=>{},[]);let q=x.useMemo(()=>({createHref:l.createHref,encodeLocation:l.encodeLocation,go:A=>l.navigate(A),push:(A,K,Z)=>l.navigate(A,{state:K,preventScrollReset:Z==null?void 0:Z.preventScrollReset}),replace:(A,K,Z)=>l.navigate(A,{replace:!0,state:K,preventScrollReset:Z==null?void 0:Z.preventScrollReset})}),[l]),Q=l.basename||"/",te=x.useMemo(()=>({router:l,navigator:q,static:!1,basename:Q}),[l,q,Q]),E=x.useMemo(()=>({v7_relativeSplatPath:l.future.v7_relativeSplatPath}),[l.future.v7_relativeSplatPath]);return x.useEffect(()=>Lp(u,l.future),[u,l.future]),x.createElement(x.Fragment,null,x.createElement(kl.Provider,{value:te},x.createElement(ff.Provider,{value:c},x.createElement(Hp.Provider,{value:R.current},x.createElement(Wp.Provider,{value:g},x.createElement(Dp,{basename:Q,location:c.location,navigationType:c.historyAction,navigator:q,future:E},c.initialized||l.future.v7_partialHydration?x.createElement(Xp,{routes:l.routes,future:l.future,state:c}):o))))),null)}const Xp=x.memo(Gp);function Gp(s){let{routes:o,future:l,state:u}=s;return vp(o,void 0,u,l)}const Zp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=x.forwardRef(function(o,l){let{onClick:u,relative:c,reloadDocument:m,replace:h,state:p,target:g,to:y,preventScrollReset:j,viewTransition:b}=o,w=$p(o,Up),{basename:S}=x.useContext(Pn),M,D=!1;if(typeof y=="string"&&e0.test(y)&&(M=y,Zp))try{let O=new URL(window.location.href),q=y.startsWith("//")?new URL(O.protocol+y):new URL(y),Q=as(q.pathname,S);q.origin===O.origin&&Q!=null?y=Q+q.search+q.hash:D=!0}catch{}let R=pp(y,{relative:c}),U=t0(y,{replace:h,state:p,target:g,preventScrollReset:j,relative:c,viewTransition:b});function T(O){u&&u(O),O.defaultPrevented||U(O)}return x.createElement("a",ta({},w,{href:M||R,onClick:D||m?u:T,ref:l,target:g}))});var Vd;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Vd||(Vd={}));var Wd;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Wd||(Wd={}));function t0(s,o){let{target:l,replace:u,state:c,preventScrollReset:m,relative:h,viewTransition:p}=o===void 0?{}:o,g=mr(),y=na(),j=pf(s,{relative:h});return x.useCallback(b=>{if(zp(b,l)){b.preventDefault();let w=u!==void 0?u:En(y)===En(j);g(s,{replace:w,state:c,preventScrollReset:m,relative:h,viewTransition:p})}},[y,g,j,u,c,l,s,m,h,p])}function r0(s){let o=x.useRef(Ci(s)),l=x.useRef(!1),u=na(),c=x.useMemo(()=>Op(u.search,l.current?null:o.current),[u.search]),m=mr(),h=x.useCallback((p,g)=>{const y=Ci(typeof p=="function"?p(c):p);l.current=!0,m("?"+y,g)},[m,c]);return[c,h]}const Cl=x.createContext({user:null,token:null,isAuthenticated:!1,login:async()=>{},register:async()=>{},logout:()=>{},loading:!1,error:null}),yi="http://localhost:3001",n0=({children:s})=>{const[o,l]=x.useState(null),[u,c]=x.useState(localStorage.getItem("token")),[m,h]=x.useState(!1),[p,g]=x.useState(null),[y,j]=x.useState(!0),b=!!u&&!!o;x.useEffect(()=>{(async()=>{if(!u){j(!1);return}try{const U=await fetch(`${yi}/api/auth/me`,{headers:{Authorization:`Bearer ${u}`}});if(U.ok){const T=await U.json();l(T)}else localStorage.removeItem("token"),c(null)}catch(U){console.error("Failed to load user:",U)}finally{j(!1)}})()},[u]);const w=async(R,U)=>{h(!0),g(null);try{const T=await fetch(`${yi}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:R,password:U})});if(!T.ok){const q=await T.json();throw new Error(q.error||"Login failed")}const O=await T.json();localStorage.setItem("token",O.token),c(O.token),l(O.user)}catch(T){throw g(T.message),T}finally{h(!1)}},D={user:o,token:u,isAuthenticated:b,login:w,register:async(R,U,T)=>{h(!0),g(null);try{const O=await fetch(`${yi}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:R,email:U,password:T})});if(!O.ok){const q=await O.json();throw new Error(q.error||"Registration failed")}await w(R,T)}catch(O){throw g(O.message),O}finally{h(!1)}},logout:()=>{localStorage.removeItem("token"),c(null),l(null)},loading:m,error:p};return n.jsx(Cl.Provider,{value:D,children:!y&&s})},lt=()=>x.useContext(Cl);function s0(){const{user:s,isAuthenticated:o,logout:l}=lt(),[u,c]=x.useState(!1),m=()=>{l(),c(!1)};return n.jsxs("nav",{className:"bg-black text-white font-mono relative z-10 mb-0",children:["                         │ │",n.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-8",children:[n.jsxs(_e,{to:"/",className:"text-3xl font-bold tracking-tighter text-white relative group",children:[n.jsx("span",{className:"relative z-10",children:"RUMFOR"}),n.jsx("span",{className:"absolute -bottom-1 left-0 w-full h-2 bg-teal-400 transform -skew-x-12 group-hover:skew-x-12 transition-transform"})]}),n.jsxs("div",{className:"flex space-x-6",children:[n.jsx(_e,{to:"/communities",className:"text-white uppercase tracking-wide hover:text-teal-300 transition-colors",children:"Communities"}),o&&n.jsx(_e,{to:"/profile",className:"text-white uppercase tracking-wide hover:text-pink-300 transition-colors",children:"Profile"})]})]}),n.jsx("div",{className:"flex items-center space-x-6",children:o?n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>c(!u),className:"flex items-center space-x-2 text-white bg-gray-800 px-4 py-2 uppercase tracking-wide",children:[n.jsx("span",{children:s==null?void 0:s.username}),n.jsx("svg",{className:`w-4 h-4 transition-transform ${u?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),u&&n.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-gray-800 shadow-lg py-2 z-10",children:[n.jsx(_e,{to:"/profile",className:"block px-4 py-3 text-sm text-white hover:bg-gray-700 uppercase",onClick:()=>c(!1),children:"Your Profile"}),(s==null?void 0:s.role)==="admin"&&n.jsx(_e,{to:"/admin",className:"block px-4 py-3 text-sm text-white hover:bg-gray-700 uppercase",onClick:()=>c(!1),children:"Admin Dashboard"}),n.jsx("button",{onClick:m,className:"block w-full text-left px-4 py-3 text-sm text-white hover:bg-gray-700 uppercase",children:"Logout"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{to:"/login",className:"text-white uppercase tracking-wide hover:text-teal-300 transition-colors",children:"Login"}),n.jsxs(_e,{to:"/register",className:"px-4 py-2 bg-gray-800 text-white uppercase tracking-wide hover:bg-gray-700 transition-colors relative group",children:[n.jsx("span",{className:"relative z-10",children:"Sign Up"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-1 bg-pink-400 group-hover:w-full transition-all duration-300"})]})]})})]}),n.jsx("div",{className:"h-1 w-full bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500"})]})}function a0(){return n.jsx(n0,{children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(s0,{}),n.jsx("main",{className:"max-w-[1800px] mx-auto px-4 py-0",children:n.jsx(Mp,{})})]})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Er=(s,o)=>{const l=x.forwardRef(({color:u="currentColor",size:c=24,strokeWidth:m=2,absoluteStrokeWidth:h,className:p="",children:g,...y},j)=>x.createElement("svg",{ref:j,...l0,width:c,height:c,stroke:u,strokeWidth:h?Number(m)*24/Number(c):m,className:["lucide",`lucide-${o0(s)}`,p].join(" "),...y},[...o.map(([b,w])=>x.createElement(b,w)),...Array.isArray(g)?g:[g]]));return l.displayName=`${s}`,l};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Er("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=Er("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=Er("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=Er("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=Er("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=Er("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=Er("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=Er("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=Er("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),El="http://localhost:3001";async function wf(s,o,l){const u={"Content-Type":"application/json"};l&&(u.Authorization=`Bearer ${l}`);const c=await fetch(`${El}/api/votes/posts/${s}`,{method:"POST",headers:u,body:JSON.stringify({value:o})});if(!c.ok){const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to vote on post")}return await c.json()}async function p0(s,o,l){const u={"Content-Type":"application/json"};l&&(u.Authorization=`Bearer ${l}`);const c=await fetch(`${El}/api/votes/comments/${s}`,{method:"POST",headers:u,body:JSON.stringify({value:o})});if(!c.ok){const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to vote on comment")}return await c.json()}async function g0(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${El}/api/votes/posts/${s}/user`,{headers:l});if(!u.ok){if(u.status===401)return{value:0};const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to get user post vote")}return await u.json()}async function x0(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${El}/api/votes/comments/${s}/user`,{headers:l});if(!u.ok){if(u.status===401)return{value:0};const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to get user comment vote")}return await u.json()}const pl=43200,Hd=1440,Qd=Symbol.for("constructDateFrom");function zi(s,o){return typeof s=="function"?s(o):s&&typeof s=="object"&&Qd in s?s[Qd](o):s instanceof Date?new s.constructor(o):new Date(o)}function rn(s,o){return zi(s,s)}let y0={};function v0(){return y0}function Jd(s){const o=rn(s),l=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return l.setUTCFullYear(o.getFullYear()),+s-+l}function Oi(s,...o){const l=zi.bind(null,s||o.find(u=>typeof u=="object"));return o.map(l)}function xl(s,o){const l=+rn(s)-+rn(o);return l<0?-1:l>0?1:l}function w0(s){return zi(s,Date.now())}function j0(s,o,l){const[u,c]=Oi(l==null?void 0:l.in,s,o),m=u.getFullYear()-c.getFullYear(),h=u.getMonth()-c.getMonth();return m*12+h}function b0(s){return o=>{const u=(s?Math[s]:Math.trunc)(o);return u===0?0:u}}function N0(s,o){return+rn(s)-+rn(o)}function k0(s,o){const l=rn(s);return l.setHours(23,59,59,999),l}function S0(s,o){const l=rn(s),u=l.getMonth();return l.setFullYear(l.getFullYear(),u+1,0),l.setHours(23,59,59,999),l}function C0(s,o){const l=rn(s);return+k0(l)==+S0(l)}function E0(s,o,l){const[u,c,m]=Oi(l==null?void 0:l.in,s,s,o),h=xl(c,m),p=Math.abs(j0(c,m));if(p<1)return 0;c.getMonth()===1&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-h*p);let g=xl(c,m)===-h;C0(u)&&p===1&&xl(u,m)===1&&(g=!1);const y=h*(p-+g);return y===0?0:y}function P0(s,o,l){const u=N0(s,o)/1e3;return b0(l==null?void 0:l.roundingMethod)(u)}const _0={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},R0=(s,o,l)=>{let u;const c=_0[s];return typeof c=="string"?u=c:o===1?u=c.one:u=c.other.replace("{{count}}",o.toString()),l!=null&&l.addSuffix?l.comparison&&l.comparison>0?"in "+u:u+" ago":u};function vi(s){return(o={})=>{const l=o.width?String(o.width):s.defaultWidth;return s.formats[l]||s.formats[s.defaultWidth]}}const L0={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},M0={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},D0={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},T0={date:vi({formats:L0,defaultWidth:"full"}),time:vi({formats:M0,defaultWidth:"full"}),dateTime:vi({formats:D0,defaultWidth:"full"})},$0={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},F0=(s,o,l,u)=>$0[s];function Ks(s){return(o,l)=>{const u=l!=null&&l.context?String(l.context):"standalone";let c;if(u==="formatting"&&s.formattingValues){const h=s.defaultFormattingWidth||s.defaultWidth,p=l!=null&&l.width?String(l.width):h;c=s.formattingValues[p]||s.formattingValues[h]}else{const h=s.defaultWidth,p=l!=null&&l.width?String(l.width):s.defaultWidth;c=s.values[p]||s.values[h]}const m=s.argumentCallback?s.argumentCallback(o):o;return c[m]}}const z0={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},O0={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},U0={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},A0={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},I0={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},B0={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},V0=(s,o)=>{const l=Number(s),u=l%100;if(u>20||u<10)switch(u%10){case 1:return l+"st";case 2:return l+"nd";case 3:return l+"rd"}return l+"th"},W0={ordinalNumber:V0,era:Ks({values:z0,defaultWidth:"wide"}),quarter:Ks({values:O0,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ks({values:U0,defaultWidth:"wide"}),day:Ks({values:A0,defaultWidth:"wide"}),dayPeriod:Ks({values:I0,defaultWidth:"wide",formattingValues:B0,defaultFormattingWidth:"wide"})};function Xs(s){return(o,l={})=>{const u=l.width,c=u&&s.matchPatterns[u]||s.matchPatterns[s.defaultMatchWidth],m=o.match(c);if(!m)return null;const h=m[0],p=u&&s.parsePatterns[u]||s.parsePatterns[s.defaultParseWidth],g=Array.isArray(p)?Q0(p,b=>b.test(h)):H0(p,b=>b.test(h));let y;y=s.valueCallback?s.valueCallback(g):g,y=l.valueCallback?l.valueCallback(y):y;const j=o.slice(h.length);return{value:y,rest:j}}}function H0(s,o){for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)&&o(s[l]))return l}function Q0(s,o){for(let l=0;l<s.length;l++)if(o(s[l]))return l}function J0(s){return(o,l={})=>{const u=o.match(s.matchPattern);if(!u)return null;const c=u[0],m=o.match(s.parsePattern);if(!m)return null;let h=s.valueCallback?s.valueCallback(m[0]):m[0];h=l.valueCallback?l.valueCallback(h):h;const p=o.slice(c.length);return{value:h,rest:p}}}const Y0=/^(\d+)(th|st|nd|rd)?/i,q0=/\d+/i,K0={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},X0={any:[/^b/i,/^(a|c)/i]},G0={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Z0={any:[/1/i,/2/i,/3/i,/4/i]},eg={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tg={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rg={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ng={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sg={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ag={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lg={ordinalNumber:J0({matchPattern:Y0,parsePattern:q0,valueCallback:s=>parseInt(s,10)}),era:Xs({matchPatterns:K0,defaultMatchWidth:"wide",parsePatterns:X0,defaultParseWidth:"any"}),quarter:Xs({matchPatterns:G0,defaultMatchWidth:"wide",parsePatterns:Z0,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Xs({matchPatterns:eg,defaultMatchWidth:"wide",parsePatterns:tg,defaultParseWidth:"any"}),day:Xs({matchPatterns:rg,defaultMatchWidth:"wide",parsePatterns:ng,defaultParseWidth:"any"}),dayPeriod:Xs({matchPatterns:sg,defaultMatchWidth:"any",parsePatterns:ag,defaultParseWidth:"any"})},og={code:"en-US",formatDistance:R0,formatLong:T0,formatRelative:F0,localize:W0,match:lg,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ig(s,o,l){const u=v0(),c=(l==null?void 0:l.locale)??u.locale??og,m=2520,h=xl(s,o);if(isNaN(h))throw new RangeError("Invalid time value");const p=Object.assign({},l,{addSuffix:l==null?void 0:l.addSuffix,comparison:h}),[g,y]=Oi(l==null?void 0:l.in,...h>0?[o,s]:[s,o]),j=P0(y,g),b=(Jd(y)-Jd(g))/1e3,w=Math.round((j-b)/60);let S;if(w<2)return l!=null&&l.includeSeconds?j<5?c.formatDistance("lessThanXSeconds",5,p):j<10?c.formatDistance("lessThanXSeconds",10,p):j<20?c.formatDistance("lessThanXSeconds",20,p):j<40?c.formatDistance("halfAMinute",0,p):j<60?c.formatDistance("lessThanXMinutes",1,p):c.formatDistance("xMinutes",1,p):w===0?c.formatDistance("lessThanXMinutes",1,p):c.formatDistance("xMinutes",w,p);if(w<45)return c.formatDistance("xMinutes",w,p);if(w<90)return c.formatDistance("aboutXHours",1,p);if(w<Hd){const M=Math.round(w/60);return c.formatDistance("aboutXHours",M,p)}else{if(w<m)return c.formatDistance("xDays",1,p);if(w<pl){const M=Math.round(w/Hd);return c.formatDistance("xDays",M,p)}else if(w<pl*2)return S=Math.round(w/pl),c.formatDistance("aboutXMonths",S,p)}if(S=E0(y,g),S<12){const M=Math.round(w/pl);return c.formatDistance("xMonths",M,p)}else{const M=S%12,D=Math.trunc(S/12);return M<3?c.formatDistance("aboutXYears",D,p):M<9?c.formatDistance("overXYears",D,p):c.formatDistance("almostXYears",D+1,p)}}function Ui(s,o){return ig(s,w0(s),o)}function ug({post:s,communityId:o,compact:l=!1}){const{user:u,token:c}=lt(),[m,h]=x.useState(s.votes||0),[p,g]=x.useState(0),[y,j]=x.useState(!1),b=s.timestamp?Ui(new Date(s.timestamp),{addSuffix:!0}):"unknown time",w=async S=>{if(!u||!c){alert("Please log in to vote");return}if(!y)try{j(!0);let M=S;p===S&&(M=0);const D=M-p;g(M),h(R=>R+D),await wf(s.id,M,c)}catch(M){console.error("Error voting:",M),g(p),h(s.votes),alert("Failed to vote. Please try again.")}finally{j(!1)}};return l?n.jsxs("div",{className:"bg-white p-2 shadow-sm rounded-sm border-l-2 border-purple-400 hover:border-l-4 transition-all",children:[n.jsx(_e,{to:`/post/${s.id}`,className:"block hover:text-purple-600 transition-colors",children:n.jsx("h3",{className:"font-medium text-sm text-gray-900 truncate",children:s.title})}),n.jsxs("div",{className:"text-xs text-gray-500 flex items-center mt-1",children:[n.jsxs("span",{children:[m," votes"]}),n.jsx("span",{className:"mx-1",children:"•"}),n.jsxs("span",{children:[s.comments," comments"]})]})]}):n.jsx("div",{className:"bg-white p-4 shadow-sm rounded-sm transform hover:scale-[1.01] transition-transform border-l-4 border-teal-400",children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("button",{className:`p-1 rounded-sm transition-colors ${p===1?"text-teal-600":"text-gray-400 hover:text-teal-600"}`,onClick:()=>w(1),disabled:y,children:n.jsx(ns,{className:"w-5 h-5"})}),n.jsx("span",{className:`text-sm font-medium ${m>0?"text-teal-600":m<0?"text-pink-600":"text-gray-600"}`,children:m}),n.jsx("button",{className:`p-1 rounded-sm transition-colors transform rotate-180 ${p===-1?"text-pink-600":"text-gray-400 hover:text-pink-600"}`,onClick:()=>w(-1),disabled:y,children:n.jsx(ns,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"mb-1 text-xs text-gray-500 flex items-center",children:[s.community_name&&!o&&n.jsxs(n.Fragment,{children:[n.jsxs(_e,{to:`/community/${s.community_id}`,className:"font-medium text-teal-600 hover:underline",children:["r/",s.community_name]}),n.jsx("span",{className:"mx-1",children:"•"})]}),n.jsxs("span",{children:["Posted by ",s.username]}),n.jsx("span",{className:"mx-1",children:"•"}),n.jsx("span",{children:b})]}),n.jsx(_e,{to:`/post/${s.id}`,className:"block hover:text-teal-600 transition-colors",children:n.jsx("h3",{className:"font-bold text-gray-900",children:s.title})}),n.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:s.content}),n.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[n.jsxs(_e,{to:`/post/${s.id}`,className:"flex items-center space-x-1 hover:text-teal-600 transition-colors",children:[n.jsx(u0,{className:"w-4 h-4"}),n.jsxs("span",{children:[s.comments," comment",s.comments!==1?"s":""]})]}),n.jsxs("button",{className:"flex items-center space-x-1 hover:text-pink-600 transition-colors",children:[n.jsx(vf,{className:"w-4 h-4"}),n.jsx("span",{children:"Share"})]})]})]})]})})}const Ai="http://localhost:3001";async function jf(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);try{const u=await fetch(s,{headers:l});return u.ok?await u.json():(console.warn(`API call to ${s} failed with status ${u.status}`),[])}catch(u){return console.warn(`API call to ${s} failed with error`,u),[]}}async function cg(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);try{const u=await fetch(s,{headers:l});return u.ok?await u.json():(console.warn(`API call to ${s} failed with status ${u.status}`),null)}catch(u){return console.warn(`API call to ${s} failed with error`,u),null}}async function dg(s,o){return jf(`${Ai}/api/communities/${s}/rules`,o)}async function fg(s,o){return jf(`${Ai}/api/posts?communityId=${s}`,o)}async function mg(s,o){return cg(`${Ai}/api/communities/${s}`,o)}async function wi(s,o,l){return[]}const Ii="http://localhost:3001";async function Ei(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);let u=`${Ii}/api/posts`;s&&(u+=`?communityId=${encodeURIComponent(s)}`);const c=await fetch(u,{headers:l});if(!c.ok){const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to fetch posts")}return await c.json()}async function bf(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${Ii}/api/posts/${s}`,{headers:l});if(!u.ok){if(u.status===404)return null;const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to fetch post")}return await u.json()}async function hg(s,o){const l={"Content-Type":"application/json"};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${Ii}/api/posts`,{method:"POST",headers:l,body:JSON.stringify(s)});if(!u.ok){const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to create post")}return await u.json()}const pg="http://localhost:3001";async function gg(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);let u=`${pg}/api/posts`;try{console.log(`Fetching posts${s?` for community ${s}`:""}...`);const c=await fetch(u,{headers:l});if(!c.ok){if(console.error(`Failed to fetch posts with status ${c.status}`),c.status>=500)return console.warn("Server error when fetching posts, returning empty array"),[];const h=await c.json().catch(()=>({}));throw new Error(h.error||"Failed to fetch posts")}const m=await c.json();return console.log(`Successfully fetched ${m.length} posts`),m}catch(c){return console.error("Error in getPosts:",c),[]}}const ss="http://localhost:3001";async function xg(s,o=!1){try{const l=`${ss}/api/posts/${s}/comments${o?"?threaded=true":""}`;console.log(`Fetching comments from: ${l}`);const u=await fetch(l);return console.log(`Comments API response status: ${u.status}`),u.ok?await u.json():(console.warn(`Failed to fetch comments: ${u.status}`),[])}catch(l){return console.error("Error in getPostComments:",l),[]}}async function Yd(s,o,l){try{console.log(`Creating comment for post ${s}:`,o),l||console.warn("No authentication token provided for creating comment");const u={"Content-Type":"application/json"};l&&(u.Authorization=`Bearer ${l}`);const c={...o,post_id:s};console.log(`Sending comment request to ${ss}/api/posts/${s}/comments`),console.log("Request payload:",c),console.log("Headers:",u);const m=await fetch(`${ss}/api/posts/${s}/comments`,{method:"POST",headers:u,body:JSON.stringify(c)});if(console.log(`Comment API response status: ${m.status}`),!m.ok){const p=await m.text();console.error("Error response from comment API:",p);try{const g=JSON.parse(p);throw new Error(g.error||`Failed to create comment: ${m.status}`)}catch{throw new Error(`Failed to create comment: ${m.status} - ${p.substring(0,100)}`)}}const h=await m.json();return console.log("Comment created successfully:",h),h}catch(u){throw console.error("Error in createComment:",u),u}}async function yg(s,o,l){const u={"Content-Type":"application/json"};l&&(u.Authorization=`Bearer ${l}`);const c=await fetch(`${ss}/api/comments/${s}`,{method:"PUT",headers:u,body:JSON.stringify({content:o})});if(!c.ok){if(c.status===404)return null;const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to update comment")}return await c.json()}async function vg(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${ss}/api/comments/${s}`,{method:"DELETE",headers:l});if(!u.ok){if(u.status===404)return!1;const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to delete comment")}return!0}async function wg(s){try{const o=await fetch(`${ss}/api/posts/${s}/comments/count`);return o.ok?(await o.json()).count||0:(console.warn(`Error fetching comment count for post ${s}: ${o.status}`),0)}catch(o){return console.warn(`Failed to fetch comment count for post ${s}:`,o),0}}function Pi({communityId:s,postType:o="all",maxPosts:l,compact:u=!1}){const[c,m]=x.useState([]),[h,p]=x.useState(!0),[g,y]=x.useState(null),{token:j}=lt();if(x.useEffect(()=>{async function w(){try{p(!0);let S;if(s)S=await fg(s,j);else{const R={};o==="trending"?R.sort="trending":o==="all"?R.sort="new":o==="following"&&(R.following="true"),S=await gg(null,j),o==="trending"&&S.length>0?S.sort((U,T)=>(T.votes||0)-(U.votes||0)):o==="all"&&S.length>0&&S.sort((U,T)=>new Date(T.created_at).getTime()-new Date(U.created_at).getTime())}const M=S.map(R=>({id:R.id,title:R.title||"Untitled Post",content:R.content||"",username:R.username||"Unknown User",timestamp:R.created_at||new Date().toISOString(),comments:R.comments_count||0,votes:R.votes_count||R.vote_count||0,community_id:R.community_id||null,community_name:R.community_name||R.community||null})),D=await Promise.all(M.map(async R=>{if(R.comments>0)return R;try{const U=await wg(R.id);return{...R,comments:U}}catch{return R}}));m(D)}catch(S){console.error("Error fetching posts:",S),S instanceof Error?y(S.message):y("An unknown error occurred")}finally{p(!1)}}w()},[s,j,o]),h)return n.jsx("div",{children:"Loading posts..."});if(g)return n.jsxs("div",{children:["Error loading posts: ",g]});if(c.length===0)return n.jsxs("div",{className:"text-center py-8",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-600",children:"No posts found"}),n.jsx("p",{className:"text-gray-500 mt-2",children:s?"Be the first to create a post in this community!":"No posts available. Try creating a new post or joining communities."})]});const b=l?c.slice(0,l):c;return n.jsx("div",{className:`${u?"space-y-1":"space-y-4"}`,children:b.map(w=>n.jsx(ug,{post:w,communityId:s,compact:u},w.id))})}const At="http://localhost:3001";async function jl(s){const o=s?`${At}/api/communities?search=${encodeURIComponent(s)}`:`${At}/api/communities`,l=await fetch(o);if(!l.ok)throw new Error("Failed to fetch communities");return await l.json()}async function Bi(s){const o=await fetch(`${At}/api/communities/${s}`);if(!o.ok){if(o.status===404)return null;throw new Error("Failed to fetch community")}return await o.json()}async function jg(s,o){const l={"Content-Type":"application/json"};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${At}/api/communities`,{method:"POST",headers:l,body:JSON.stringify(s)});if(!u.ok){const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to create community")}return await u.json()}async function bg(s,o,l){const u={"Content-Type":"application/json"},c=await fetch(`${At}/api/communities/${s}`,{method:"PUT",headers:u,body:JSON.stringify(o)});if(!c.ok){if(c.status===404)return null;const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to update community")}return await c.json()}async function Nf(s){const o=await fetch(`${At}/api/users/${s}/communities`);if(!o.ok)throw new Error("Failed to fetch user communities");return await o.json()}async function Ng(s,o){const l={},u=await fetch(`${At}/api/communities/${s}/settings`,{headers:l});if(!u.ok){if(u.status===404)return null;const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to fetch community settings")}return await u.json()}async function ji(s,o,l){const u={"Content-Type":"application/json"};l&&(u.Authorization=`Bearer ${l}`);const c=await fetch(`${At}/api/communities/${s}/settings`,{method:"PUT",headers:u,body:JSON.stringify(o)});if(!c.ok){if(c.status===404)return null;const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to update community settings")}return await c.json()}async function bl(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${At}/api/communities/${s}/members`,{headers:l});if(!u.ok){const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to fetch community members")}return await u.json()}async function kg(s,o,l,u){const c={"Content-Type":"application/json"};u&&(c.Authorization=`Bearer ${u}`);const m=await fetch(`${At}/api/communities/${s}/members/${o}`,{method:"PUT",headers:c,body:JSON.stringify({role:l})});if(!m.ok){if(m.status===404)return null;const h=await m.json().catch(()=>({}));throw new Error(h.error||"Failed to update community member role")}return await m.json()}const Sg=kg;async function Cg(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${At}/api/communities/${s}/join-requests`,{headers:l});if(!u.ok){const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to fetch join requests")}return await u.json()}async function Eg(s,o,l){const u={"Content-Type":"application/json"};l&&(u.Authorization=`Bearer ${l}`);const c=await fetch(`${At}/api/communities/${s}/join-requests/${o}/approve`,{method:"POST",headers:u});if(!c.ok){const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to approve join request")}return await c.json()}async function Pg(s,o,l){const u={"Content-Type":"application/json"};l&&(u.Authorization=`Bearer ${l}`);const c=await fetch(`${At}/api/communities/${s}/join-requests/${o}/reject`,{method:"POST",headers:u});if(!c.ok){const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to reject join request")}return await c.json()}function kf({onClose:s,communityId:o,onSuccess:l}){const[u,c]=x.useState(o?"community":"profile"),[m,h]=x.useState(o||""),[p,g]=x.useState(""),[y,j]=x.useState(""),[b,w]=x.useState([]),[S,M]=x.useState(!0),[D,R]=x.useState(!1),[U,T]=x.useState(null),{user:O,isAuthenticated:q,token:Q}=lt(),te=mr();x.useEffect(()=>{q||te("/login",{state:{from:window.location.pathname}})},[q,te]),x.useEffect(()=>{async function A(){if(!(!q||!O))try{M(!0),console.log("Fetching communities user is a member of...");const K=await Nf(O.id);console.log("User communities:",K),Array.isArray(K)?w(K):(console.error("Invalid communities data:",K),T("Failed to load your communities - invalid data format"))}catch(K){console.error("Failed to fetch communities:",K),T("Failed to load your communities")}finally{M(!1)}}A()},[q,O,Q]);const E=async A=>{if(A.preventDefault(),!q){T("You must be logged in to create a post");return}if(u==="community"&&!m){T("Please select a community");return}if(!p.trim()){T("Post title is required");return}if(!y.trim()){T("Post content is required");return}R(!0),T(null);try{const K={title:p,content:y,communityId:u==="community"?m:null,profile_post:u==="profile"};console.log("Creating post with data:",K);const Z=await hg(K,Q);console.log("New post created:",Z),l&&l(Z.id),s()}catch(K){console.error("Failed to create post:",K),T(K instanceof Error?K.message:"Failed to create post")}finally{R(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h2",{className:"text-lg font-medium",children:"Create Post"}),n.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:n.jsx(h0,{className:"w-5 h-5"})})]}),U&&n.jsx("div",{className:"mx-4 mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:U}),n.jsxs("form",{onSubmit:E,className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("button",{type:"button",onClick:()=>c("community"),className:`px-4 py-2 wireframe-border ${u==="community"?"bg-gray-100":""}`,children:"Community"}),n.jsx("button",{type:"button",onClick:()=>c("profile"),className:`px-4 py-2 wireframe-border ${u==="profile"?"bg-gray-100":""}`,children:"Profile"})]}),u==="community"&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"community",className:"block text-sm font-medium text-gray-700 mb-1",children:"Community"}),n.jsxs("select",{id:"community",value:m,onChange:A=>h(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md",required:!0,disabled:D||S,children:[n.jsx("option",{value:"",children:"Select a community"}),b.map(A=>n.jsxs("option",{value:A.id,children:["r/",A.name]},A.id))]}),S&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Loading your communities..."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n.jsx("input",{id:"title",type:"text",value:p,onChange:A=>g(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Post title",required:!0,disabled:D})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),n.jsx("textarea",{id:"content",value:y,onChange:A=>j(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md",rows:4,placeholder:"What's on your mind?",required:!0,disabled:D})]}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[n.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700",disabled:D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:D,children:D?"Posting...":"Post"})]})]})]})})}function _g(){const[s,o]=x.useState(!1),[l,u]=x.useState([]),[c,m]=x.useState(!0),[h,p]=x.useState("trending"),[g,y]=x.useState("card"),{isAuthenticated:j,user:b}=lt();return x.useEffect(()=>{(async()=>{try{m(!0);const S=await jl();u(S.slice(0,3))}catch(S){console.error("Failed to fetch trending communities:",S)}finally{m(!1)}})()},[]),n.jsxs("div",{className:"w-full max-w-[98%] xl:max-w-[1800px] mx-auto px-2 font-mono bg-gray-50",children:[j&&n.jsx("div",{className:"w-full bg-black text-white shadow-md sticky top-0 z-30",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsxs("div",{className:"font-bold uppercase",children:["Welcome, ",n.jsx("span",{className:"text-teal-400",children:b==null?void 0:b.username}),"!"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[n.jsx(_e,{to:"/profile",className:"px-2 py-1 text-xs bg-gray-800 hover:bg-gray-700 rounded-sm transition-colors uppercase",children:"Profile"}),n.jsx(_e,{to:"/settings",className:"px-2 py-1 text-xs bg-gray-800 hover:bg-gray-700 rounded-sm transition-colors uppercase",children:"Settings"})]}),n.jsxs("button",{onClick:()=>o(!0),className:"md:hidden px-3 py-1 bg-teal-500 text-white text-xs uppercase tracking-wider rounded-sm hover:bg-teal-400 transition-colors flex items-center",children:[n.jsx("span",{className:"mr-1",children:"+"})," Post"]})]})]})}),!j&&n.jsxs("div",{className:"bg-black text-white p-6 my-4 relative transform -rotate-1 shadow-lg",children:[n.jsxs("div",{className:"absolute top-0 right-0 bg-white text-black px-4 py-1 text-xl uppercase tracking-widest transform rotate-3 shadow-md",children:[n.jsx("span",{className:"text-teal-500",children:"WEL"}),n.jsx("span",{className:"text-pink-500",children:"COME"})]}),n.jsxs("h1",{className:"text-3xl font-bold mb-3 uppercase tracking-tight",children:[n.jsx("span",{className:"text-teal-400",children:"Join"})," communities. ",n.jsx("span",{className:"text-pink-400",children:"Share"})," ideas. Be ",n.jsx("span",{className:"text-purple-400",children:"yourself"}),"."]}),n.jsx("p",{className:"text-white text-lg ml-6 border-l-4 border-teal-400 pl-4",children:"Rumfor is where communities thrive. Find your people."})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-6 mt-4",children:[n.jsxs("div",{className:"w-full lg:w-72 flex-shrink-0 order-1 md:order-1",children:[j&&n.jsxs("div",{className:"space-y-4 mb-4",children:[n.jsxs("div",{className:"bg-white shadow-md border-l-4 border-teal-400 p-4 transform -rotate-1 skew-y-0.5 relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-teal-400 via-white to-transparent"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_e,{to:"/profile/posts",className:"block text-sm font-medium hover:text-teal-600 flex items-center p-2 hover:bg-gray-50 hover:translate-x-1 transition-all rounded-sm transform hover:-rotate-0.5",children:[n.jsx("span",{className:"w-3 h-3 rounded-full bg-teal-400 mr-2"})," Your Posts"]}),n.jsxs(_e,{to:"/profile/comments",className:"block text-sm font-medium hover:text-pink-600 flex items-center p-2 hover:bg-gray-50 hover:translate-x-1 transition-all rounded-sm transform hover:rotate-0.5",children:[n.jsx("span",{className:"w-3 h-3 rounded-full bg-pink-400 mr-2"})," Your Comments"]}),n.jsxs(_e,{to:"/profile/votes",className:"block text-sm font-medium hover:text-purple-600 flex items-center p-2 hover:bg-gray-50 hover:translate-x-1 transition-all rounded-sm transform hover:-rotate-0.5",children:[n.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-400 mr-2"})," Your Votes"]}),n.jsx(_e,{to:"/profile",className:"block text-xs text-teal-600 font-medium hover:underline mt-2 pl-5 transform hover:translate-x-1 transition-all",children:"View full profile →"})]})]}),n.jsxs("div",{className:"bg-white shadow-md border-l-4 border-pink-400 p-4 transform rotate-1 skew-y-0.5 relative",children:[n.jsx("div",{className:"absolute top-0 right-0 w-full h-1 bg-gradient-to-l from-pink-400 via-white to-transparent"}),n.jsxs("div",{className:"space-y-2",children:[[1,2,3].map(w=>n.jsxs(_e,{to:`/community/${w}`,className:"block text-sm font-medium hover:text-pink-600 flex items-center p-2 hover:bg-gray-50 hover:translate-x-1 transition-all rounded-sm",children:[n.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white mr-2 flex-shrink-0 shadow transform hover:scale-110 transition-transform",style:{backgroundColor:w%3===0?"#2dd4bf":w%3===1?"#f472b6":"#a78bfa"},children:n.jsx("span",{className:"text-xs font-bold",children:String.fromCharCode(64+w)})}),n.jsxs("span",{className:"truncate",children:["Sample Community ",w]})]},w)),n.jsx(_e,{to:"/communities",className:"block text-xs text-pink-600 font-medium hover:underline mt-2 pl-5 transform hover:translate-x-1 transition-all",children:"View all your communities →"})]})]})]}),n.jsxs("div",{className:"bg-white shadow-md border-l-4 border-teal-400 p-4 transform -rotate-1.5 mb-4 relative",children:[n.jsx("div",{className:"absolute top-0 left-8 right-8 h-1 bg-gradient-to-r from-transparent via-teal-400 to-transparent"}),n.jsxs("div",{className:"space-y-2",children:[l.slice(0,5).map((w,S)=>n.jsxs(_e,{to:`/community/${w.id}`,className:"block text-sm font-medium hover:text-teal-600 flex items-center p-2 hover:bg-gray-50 hover:translate-x-1 transition-all rounded-sm transform hover:rotate-0.5",children:[n.jsx("span",{className:"w-3 h-3 rounded-full bg-teal-400 mr-2 transform hover:scale-125 transition-transform"}),w.name]},`new-community-${w.id}`)),c&&n.jsx("div",{className:"text-sm text-gray-500 pl-5",children:"Loading communities..."}),!c&&l.length===0&&n.jsx("div",{className:"text-sm text-gray-500 pl-5",children:"No communities found"}),n.jsx(_e,{to:"/communities?sort=new",className:"block text-xs text-teal-600 font-medium hover:underline mt-1 pl-5 transform hover:translate-x-1 transition-all",children:"See more new communities →"})]})]}),n.jsxs("div",{className:"bg-white shadow-md border-l-4 border-pink-400 p-4 transform rotate-1 mb-4 relative",children:[n.jsx("div",{className:"absolute top-0 left-8 right-8 h-1 bg-gradient-to-r from-transparent via-pink-400 to-transparent"}),n.jsxs("div",{className:"space-y-2",children:[l.slice(0,5).map((w,S)=>n.jsxs(_e,{to:`/community/${w.id}`,className:"block text-sm font-medium hover:text-pink-600 flex items-center p-2 hover:bg-gray-50 hover:translate-x-1 transition-all rounded-sm transform hover:-rotate-0.5",children:[n.jsx("span",{className:"w-3 h-3 rounded-full bg-pink-400 mr-2 transform hover:scale-125 transition-transform"}),w.name]},`trending-community-${w.id}`)),c&&n.jsx("div",{className:"text-sm text-gray-500 pl-5",children:"Loading communities..."}),!c&&l.length===0&&n.jsx("div",{className:"text-sm text-gray-500 pl-5",children:"No communities found"}),n.jsx(_e,{to:"/communities?sort=trending",className:"block text-xs text-pink-600 font-medium hover:underline mt-1 pl-5 transform hover:translate-x-1 transition-all",children:"See more trending communities →"})]})]}),n.jsxs("div",{className:"bg-white shadow-md border-l-4 border-purple-400 p-4 transform -rotate-1 mb-4 relative",children:[n.jsx("div",{className:"absolute top-0 left-8 right-8 h-1 bg-gradient-to-r from-transparent via-purple-400 to-transparent"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"transform scale-90 origin-top-left overflow-hidden -mt-1 -ml-2",children:n.jsx(Pi,{communityId:null,postType:"trending",maxPosts:5,compact:!0})}),n.jsx("button",{onClick:()=>p("trending"),className:"block text-xs text-purple-600 font-medium hover:underline mt-1 pl-5 transform hover:translate-x-1 transition-all",children:"See more trending posts →"})]})]})]}),n.jsxs("div",{className:"flex-grow order-3 lg:order-2",children:[n.jsxs("div",{className:"bg-white shadow-sm rounded-sm mb-4 p-4 transform rotate-0.5 overflow-hidden",children:[n.jsx("div",{className:"flex justify-end mb-3",children:n.jsx(_e,{to:"/communities",className:"text-xs text-teal-600 hover:underline",children:"View All →"})}),n.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2 -mx-1 px-1",children:c?n.jsx("div",{className:"flex-grow text-center py-8 text-sm bg-gray-50",children:"Loading..."}):l.map((w,S)=>n.jsxs(_e,{to:`/community/${w.id}`,className:`flex-shrink-0 w-48 bg-white border hover:shadow-md transition-shadow rounded-sm overflow-hidden flex flex-col ${S%3===0?"border-t-2 border-teal-400":S%3===1?"border-t-2 border-pink-400":"border-t-2 border-purple-400"}`,children:[n.jsxs("div",{className:"p-3 flex items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white mr-2",style:{backgroundColor:S%3===0?"#2dd4bf":S%3===1?"#f472b6":"#a78bfa"},children:n.jsx("span",{className:"text-xs font-bold",children:w.name.substring(0,2).toUpperCase()})}),n.jsxs("div",{className:"flex-grow",children:[n.jsx("div",{className:"font-bold text-sm",children:w.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:[S*42+12," members"]})]})]}),n.jsx("div",{className:"p-2 bg-gray-50 text-xs border-t text-gray-700",children:n.jsx("p",{className:"line-clamp-2",children:w.description})})]},w.id))})]}),n.jsxs("div",{className:"flex items-center justify-between mb-4 relative overflow-hidden bg-white shadow-sm rounded-t transform -rotate-0.5",children:[n.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-400"}),n.jsxs("div",{className:"flex items-center",children:[n.jsxs("button",{className:`px-5 py-3 text-sm font-bold uppercase tracking-wider transition-all relative overflow-hidden ${h==="trending"?"text-white transform -skew-x-2":"text-gray-500 hover:text-gray-700 hover:-translate-y-0.5"}`,onClick:()=>p("trending"),children:[h==="trending"&&n.jsx("div",{className:"absolute inset-0 bg-teal-500 -z-10 transform skew-x-12"}),n.jsx("span",{className:"relative z-10",children:"Trending Posts"}),h==="trending"&&n.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 rounded-full bg-white"})]}),n.jsxs("button",{className:`px-5 py-3 text-sm font-bold uppercase tracking-wider transition-all relative overflow-hidden ${h==="all"?"text-white transform skew-x-2":"text-gray-500 hover:text-gray-700 hover:-translate-y-0.5"}`,onClick:()=>p("all"),children:[h==="all"&&n.jsx("div",{className:"absolute inset-0 bg-pink-500 -z-10 transform -skew-x-12"}),n.jsx("span",{className:"relative z-10",children:"Latest Posts"}),h==="all"&&n.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 rounded-full bg-white"})]}),j&&n.jsxs("button",{className:`px-5 py-3 text-sm font-bold uppercase tracking-wider transition-all relative overflow-hidden ${h==="following"?"text-white transform -skew-x-2":"text-gray-500 hover:text-gray-700 hover:-translate-y-0.5"}`,onClick:()=>p("following"),children:[h==="following"&&n.jsx("div",{className:"absolute inset-0 bg-purple-500 -z-10 transform skew-x-12"}),n.jsx("span",{className:"relative z-10",children:"Following"}),h==="following"&&n.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 rounded-full bg-white"})]})]}),n.jsxs("div",{className:"flex items-center text-xs p-3 relative z-10",children:[h==="trending"&&n.jsxs("select",{className:"bg-gray-100 border-none rounded py-1 px-2 text-xs",children:[n.jsx("option",{children:"Hot"}),n.jsx("option",{children:"Top Today"}),n.jsx("option",{children:"Top This Week"}),n.jsx("option",{children:"Top This Month"})]}),h==="all"&&n.jsxs("select",{className:"bg-gray-100 border-none rounded py-1 px-2 text-xs",children:[n.jsx("option",{children:"New"}),n.jsx("option",{children:"Rising"}),n.jsx("option",{children:"Controversial"})]}),h==="following"&&n.jsxs("select",{className:"bg-gray-100 border-none rounded py-1 px-2 text-xs",children:[n.jsx("option",{children:"Recent"}),n.jsx("option",{children:"Top"})]})]})]}),n.jsxs("div",{className:"bg-white shadow-sm rounded-sm p-4 mb-4 transform -rotate-0.5",children:[n.jsxs("div",{className:"mb-4 text-xs text-gray-500 italic border-l-2 pl-2",children:[h==="trending"&&n.jsx("p",{children:"Popular posts from all communities, sorted by votes and engagement"}),h==="all"&&n.jsx("p",{children:"Latest posts from all communities in chronological order"}),h==="following"&&n.jsx("p",{children:"Recent posts from communities you follow"})]}),n.jsx("div",{className:g==="compact"?"space-y-1":"space-y-4",children:n.jsx(Pi,{communityId:null,postType:h})})]})]}),n.jsxs("div",{className:"w-full lg:w-72 flex-shrink-0 order-2 lg:order-3 mb-4 lg:mb-0",children:[j&&n.jsx("div",{className:"mb-4 space-y-2",children:n.jsxs("button",{onClick:()=>o(!0),className:"w-full px-3 py-2 bg-black text-white text-sm font-bold uppercase shadow hover:bg-gray-900 transition-colors flex items-center justify-center transform -rotate-0.5 border-b-2 border-teal-400",children:[n.jsx("span",{className:"mr-1",children:"+"})," Create Post"]})}),j&&n.jsx("div",{className:"bg-black text-white p-4 transform -rotate-1 skew-y-1 shadow-md mb-4 relative border-l-4 border-pink-400",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_e,{to:"/bookmarks",className:"w-full text-left p-2 text-sm rounded-sm bg-gray-900 hover:bg-gray-800 hover:translate-x-1 transition-all flex items-center transform hover:rotate-0.5",children:[n.jsx("span",{className:"w-3 h-3 rounded-full bg-pink-400 mr-2 animate-pulse"}),"Bookmarked Posts"]}),n.jsxs(_e,{to:"/notifications",className:"w-full text-left p-2 text-sm rounded-sm bg-gray-900 hover:bg-gray-800 hover:translate-x-1 transition-all flex items-center transform hover:-rotate-0.5",children:[n.jsx("span",{className:"w-3 h-3 rounded-full bg-teal-400 mr-2 animate-pulse"}),"Notifications"]}),n.jsxs("button",{className:"w-full text-left p-2 text-sm rounded-sm bg-gray-900 hover:bg-gray-800 hover:translate-x-1 transition-all flex items-center transform hover:rotate-0.5",onClick:()=>{alert("Theme preference would be toggled here")},children:[n.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-400 mr-2 animate-pulse"}),"Toggle Theme"]})]})}),n.jsxs("div",{className:"bg-black text-white p-4 transform rotate-0.5 skew-x-1 shadow-md mb-4 relative overflow-hidden border-r-4 border-purple-400",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500"}),n.jsxs("p",{className:"text-sm pl-2 relative z-10",children:[n.jsx("span",{className:"text-teal-400 font-bold",children:"RUMFOR"})," is a community platform where you can join communities, share posts, and connect with others."]}),n.jsx("div",{className:"absolute -bottom-8 -right-8 w-16 h-16 bg-gray-900 rounded-full opacity-30"})]})]})]}),s&&n.jsx(kf,{onClose:()=>o(!1)})]})}function Rg({onClose:s,onSuccess:o}){const[l,u]=x.useState(""),[c,m]=x.useState(""),[h,p]=x.useState("public"),[g,y]=x.useState(!1),[j,b]=x.useState(null),{isAuthenticated:w,token:S,user:M}=lt(),D=mr();x.useEffect(()=>{w||D("/login",{state:{from:window.location.pathname}})},[w,D]);const R=async U=>{if(U.preventDefault(),!w){b("You must be logged in to create a community");return}if(!l.trim()){b("Community name is required");return}y(!0),b(null);try{const T=await jg({name:l,description:c,privacy:h,creator_id:M==null?void 0:M.id},S);o&&o(T.id),s()}catch(T){console.error("Failed to create community:",T),b("Failed to create community. Please try again.")}finally{y(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Community"}),j&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:j}),n.jsxs("form",{className:"space-y-4",onSubmit:R,children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),n.jsx("input",{id:"name",type:"text",placeholder:"Community name",value:l,onChange:U=>u(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:g})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{id:"description",placeholder:"What is this community about?",rows:4,value:c,onChange:U=>m(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:g})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Privacy"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsxs("label",{className:"inline-flex items-center",children:[n.jsx("input",{type:"radio",name:"privacy",value:"public",checked:h==="public",onChange:()=>p("public"),disabled:g,className:"mr-2"}),"Public"]}),n.jsxs("label",{className:"inline-flex items-center",children:[n.jsx("input",{type:"radio",name:"privacy",value:"private",checked:h==="private",onChange:()=>p("private"),disabled:g,className:"mr-2"}),"Private"]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700",disabled:g,children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:g,children:g?"Creating...":"Create Community"})]})]})]})})}function Lg(){const[s,o]=x.useState([]),[l,u]=x.useState([]),[c,m]=x.useState(null),[h,p]=x.useState(!0),[g,y]=x.useState(null),j=mr();x.useEffect(()=>{async function w(){try{p(!0);const S=await jl();if(S.length===0)return;const M=[...S].sort((R,U)=>new Date(U.created_at).getTime()-new Date(R.created_at).getTime());o(M.slice(0,3)),u(S.slice(0,3));const D=Math.floor(Math.random()*S.length);m(S[D])}catch(S){console.error("Error fetching community data:",S),y("Failed to load communities")}finally{p(!1)}}w()},[]);const b=()=>{c&&j(`/community/${c.id}`)};return n.jsxs("div",{className:"bg-black text-white p-4",children:[n.jsx("h2",{className:"font-bold uppercase tracking-tight text-xl relative inline-block mb-4",children:n.jsx("span",{className:"text-teal-400",children:"DISCOVER"})}),n.jsxs("div",{className:"space-y-6 mt-6",children:[n.jsxs("div",{className:"bg-gray-900 p-4 border-l-2 border-teal-400",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 mb-2 pb-1",children:[n.jsx("h3",{className:"text-xs uppercase font-medium tracking-wide text-teal-400",children:"NEW"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Communities"})]}),h?n.jsx("div",{className:"animate-pulse text-xs",children:"Loading..."}):g?n.jsx("div",{className:"text-xs text-red-400",children:"Error loading communities"}):s.length>0?n.jsx("ul",{className:"space-y-1",children:s.map(w=>n.jsx("li",{className:"rounded hover:bg-gray-800 p-1 transition-colors",children:n.jsxs(_e,{to:`/community/${w.id}`,className:"block",children:[n.jsx("span",{className:"font-medium text-sm",children:w.name}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:w.description})]})},w.id))}):n.jsx("div",{className:"text-xs text-gray-400",children:"No communities found"})]}),n.jsxs("div",{className:"bg-gray-900 p-4 border-l-2 border-pink-400",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 mb-2 pb-1",children:[n.jsx("h3",{className:"text-xs uppercase font-medium tracking-wide text-pink-400",children:"POPULAR"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Communities"})]}),h?n.jsx("div",{className:"animate-pulse text-xs",children:"Loading..."}):g?n.jsx("div",{className:"text-xs text-red-400",children:"Error loading communities"}):l.length>0?n.jsx("ul",{className:"space-y-1",children:l.map(w=>n.jsx("li",{className:"rounded hover:bg-gray-800 p-1 transition-colors",children:n.jsxs(_e,{to:`/community/${w.id}`,className:"block",children:[n.jsx("span",{className:"font-medium text-sm",children:w.name}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:w.description})]})},w.id))}):n.jsx("div",{className:"text-xs text-gray-400",children:"No communities found"})]}),n.jsxs("div",{className:"bg-gray-900 p-4 border-l-2 border-purple-400 cursor-pointer hover:bg-gray-800 transition-colors",onClick:b,children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 mb-2 pb-1",children:[n.jsx("h3",{className:"text-xs uppercase font-medium tracking-wide text-purple-400",children:"RANDOM"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Community"})]}),h?n.jsx("div",{className:"animate-pulse text-xs",children:"Loading..."}):g?n.jsx("div",{className:"text-xs text-red-400",children:"Error loading communities"}):c?n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-medium",children:c.name}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:c.description}),n.jsx("button",{className:"mt-2 text-xs text-purple-400 hover:text-purple-300",children:"Click to visit →"})]}):n.jsx("div",{className:"text-xs text-gray-400",children:"No communities found"})]})]})]})}const Nl="http://localhost:3001";async function Mg(s,o){const l={"Content-Type":"application/json",Authorization:o?`Bearer ${o}`:""};try{console.log(`Joining community ${s}...`);const u=await fetch(`${Nl}/api/communities/${s}/members`,{method:"POST",headers:l});if(!u.ok){let c="Failed to join community";try{c=(await u.json()).error||c}catch(m){console.warn("Could not parse error response:",m)}throw console.error(`Join community failed with status ${u.status}: ${c}`),new Error(c)}return console.log("Successfully joined community"),await u.json()}catch(u){throw console.error("Error in joinCommunity:",u),u}}async function Dg(s,o,l){if(!l)throw new Error("Authentication token required to leave a community");const u={"Content-Type":"application/json",Authorization:`Bearer ${l}`};try{console.log(`Leaving community ${s}...`);let c=o;if(!c)try{const p=l.split(".");if(p.length===3){const g=JSON.parse(atob(p[1]));c=g.id||g.userId||g.sub}}catch(p){console.warn("Could not extract user ID from token",p)}if(c){const p=`${Nl}/api/communities/${s}/members/${c}`;console.log(`Using user-specific endpoint: ${p}`);const g=await fetch(p,{method:"DELETE",headers:u});if(g.ok)return console.log("Successfully left community via user-specific endpoint"),!0;console.log(`User-specific endpoint failed with status ${g.status}, trying generic endpoint`)}const m=`${Nl}/api/communities/${s}/members`;console.log(`Using generic endpoint: ${m}`);const h=await fetch(m,{method:"DELETE",headers:u});if(!h.ok){let p="Failed to leave community";try{p=(await h.json()).error||p}catch(g){console.warn("Could not parse error response:",g)}if(console.error(`Leave community failed with status ${h.status}: ${p}`),h.status===404){if(await Vi(s,l,c))throw console.log("User is still a member, endpoint may not exist"),new Error("The API endpoint for leaving communities doesn't seem to be available");return console.log("User is not a member of this community - success"),!0}throw new Error(p)}return console.log("Successfully left community"),!0}catch(c){throw console.error("Error in leaveCommunity:",c),c}}async function Vi(s,o,l){if(!o)return console.log("Missing token for membership check"),null;if(!l)return console.log("Missing userId for membership check"),null;const u={"Content-Type":"application/json",Authorization:`Bearer ${o}`};try{console.log(`Checking membership status for user ${l} in community ${s}...`);const c=await fetch(`${Nl}/api/communities/${s}/members`,{method:"GET",headers:u});if(!c.ok)return console.error(`Error getting community members: ${c.status}`),null;const m=await c.json();console.log(`Got ${m.length} community members`);const h=m.find(p=>p.user_id===l);return h?(console.log(`User ${l} is a member of community ${s}`),h):(console.log(`User ${l} is not a member of community ${s}`),null)}catch(c){return console.error("Error getting community member status:",c),null}}async function Tg(s,o){try{console.log(`Fetching community about data for ${s} with fallback method`);const l=await Bi(s);if(!l)return console.log("Community not found"),null;let u=[],c=0;try{u=await bl(s,o),c=u.length,console.log(`Found ${c} members`)}catch(y){console.warn("Could not fetch members, using fallback count",y),c=Math.floor(Math.random()*100)+20}const m=u.filter(y=>y.role==="moderator"||y.role==="admin").map(y=>({community_id:y.community_id,user_id:y.user_id,role:y.role,username:y.username||`User ${y.user_id.substring(0,8)}`,joined_at:typeof y.joined_at=="string"?y.joined_at:y.joined_at.toISOString()}));console.log(`Found ${m.length} moderators`);const h=Math.floor(Math.random()*200)+10,g=new Date(l.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return{...l,moderators:m,memberCount:c,postCount:h,creationDateFormatted:g}}catch(l){return console.error("Error in fallback getCommunityAbout:",l),{id:s,name:"Community",description:"Information temporarily unavailable. Please try again later.",privacy:"public",created_at:new Date().toISOString(),moderators:[],memberCount:0,postCount:0,creationDateFormatted:"Unknown"}}}const _i=({communityId:s,className:o="",variant:l="primary",onJoin:u,onLeave:c,showLeaveButton:m=!0})=>{const{token:h,isAuthenticated:p,user:g}=lt(),[y,j]=x.useState(!1),[b,w]=x.useState(!1),[S,M]=x.useState(!1),[D,R]=x.useState(null);x.useEffect(()=>{p&&h&&g?U():(j(!1),M(!0))},[s,p,h,g]),x.useEffect(()=>{p&&h&&g&&S&&U()},[s,p,h,g]);const U=async()=>{if(!p||!h||!g){j(!1),M(!0);return}R(null);try{console.log(`Checking membership for user ${g.id} in community ${s}`);const E=await Vi(s,h,g.id);console.log("Membership check returned:",E),j(!!E)}catch(E){console.error("Error checking membership:",E),j(!1)}M(!0)},T=async()=>{if(!p||!h){alert("Please log in to join communities");return}w(!0),R(null),j(!0);try{await Mg(s,h),console.log("Successfully joined community"),await U(),u&&u()}catch(E){console.error("Failed to join community:",E);const A=E instanceof Error?E.message:"Failed to join community. Please try again.";await U(),y||(R(A),j(!1))}finally{w(!1)}},O=async()=>{if(!(!p||!h)&&confirm("Are you sure you want to leave this community?")){w(!0),R(null),j(!1);try{await Dg(s,void 0,h),console.log("Successfully left community"),await U(),c&&c()}catch(E){console.error("Failed to leave community:",E);const A=E instanceof Error?E.message:"Failed to leave community. Please try again.";await U(),y&&R(A)}finally{w(!1)}}},q=()=>{const E="transition-all duration-200 font-bold flex items-center justify-center";return S?p?y&&m?l==="compact"?`${E} bg-red-500 hover:bg-red-600 text-white py-1 px-2 text-xs rounded`:l==="sidebar"?`${E} w-full bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded focus:ring-2 focus:ring-red-500 focus:ring-opacity-50`:`${E} bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded`:l==="compact"?`${E} bg-teal-500 hover:bg-teal-600 text-white py-1 px-2 text-xs rounded`:l==="sidebar"?`${E} w-full bg-teal-500 hover:bg-teal-600 text-white font-medium py-2 px-4 rounded focus:ring-2 focus:ring-teal-500 focus:ring-opacity-50`:`${E} bg-teal-500 hover:bg-teal-600 text-white py-2 px-4 rounded`:l==="compact"?`${E} bg-gray-200 hover:bg-gray-300 text-gray-700 py-1 px-2 text-xs rounded`:`${E} bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded`:`${E} bg-gray-300 text-gray-600 cursor-wait opacity-70 py-1 px-3 rounded`},Q=()=>S?p?b?y?"Leaving...":"Joining...":y&&m?"Leave":"Join":"Join":"Loading...",te=()=>{if(!(!S||b)){if(!p){alert("Please log in to join communities");return}y&&m?O():y||T()}};return n.jsxs("div",{className:"inline-block",children:[n.jsx("button",{className:`${q()} ${o}`,onClick:te,disabled:b||!S,title:D||"",children:Q()}),D&&n.jsx("div",{className:"text-red-500 text-xs mt-1",children:D})]})},$g=({community:s,index:o,isExpanded:l,communityColor:u,communitySearchTerm:c,toggleCommunityExpansion:m,updateCommunitySearchTerm:h,viewMode:p,communityPosts:g,loadingPosts:y,postErrors:j,fetchCommunityPosts:b})=>n.jsx("div",{children:p==="compact"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"w-full bg-white shadow-sm hover:shadow-md transition-shadow border-l-4 rounded-sm overflow-hidden flex flex-col",style:{borderLeftColor:u},children:[n.jsxs("div",{className:"flex items-center",children:[n.jsxs(_e,{to:`/community/${s.id}`,className:"flex-grow flex items-center",children:[n.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white ml-2",style:{backgroundColor:u},children:n.jsx("span",{className:"text-xs font-bold",children:s.name.substring(0,2).toUpperCase()})}),n.jsx("div",{className:"flex-grow p-2 pl-3",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"font-bold text-sm hover:text-teal-600 transition-colors",children:s.name}),s.privacy==="private"&&n.jsx("span",{className:"ml-2 text-xs bg-gray-100 px-1 py-0.5 text-pink-600 font-medium rounded-full",children:"P"}),n.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),n.jsxs("span",{className:"text-xs text-gray-500",children:[n.jsx("span",{className:"font-medium",children:o*42+12})," members"]})]})})]}),n.jsx("div",{className:"flex items-center space-x-2 pr-2",children:n.jsx(_i,{communityId:s.id,variant:"compact",className:"px-2 py-0.5 text-white text-xs uppercase tracking-wider rounded-sm bg-black hover:bg-gray-800 transition-colors",onJoin:()=>{}})})]}),n.jsx("button",{className:"w-full h-1 bg-gray-300 hover:bg-gray-400 cursor-pointer",onClick:()=>m(s.id)})]}),l&&n.jsxs("div",{className:"mt-1 mb-1 ml-10 mr-2 p-3 bg-gray-50 rounded border border-gray-200",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.description}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:`Search in ${s.name}...`,value:c,onChange:w=>h(s.id,w.target.value),className:"w-full p-2 text-sm bg-white border border-gray-200 rounded focus:outline-none focus:border-teal-400"}),n.jsx("button",{className:"absolute right-0 top-0 h-full px-3 text-gray-600 hover:text-teal-600",children:"⌕"})]}),c.trim().length>0&&n.jsxs("div",{className:"mt-2 bg-white border border-gray-200 rounded",children:[n.jsxs("div",{className:"p-2 border-b border-gray-100 flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium",children:"Search Results"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Max 10 results"})]}),Array.from({length:Math.min(c.length+1,10)}).map((w,S)=>n.jsx("div",{className:"py-2 px-2 border-b border-gray-100 last:border-0",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 mr-2 flex-shrink-0",style:{backgroundColor:u}}),n.jsxs("div",{children:[n.jsxs("h5",{className:"text-sm font-medium",children:[c," result #",S+1]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Posted by User",S+100," • ",S+1," days ago"]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-700",children:['Post containing search term "',c,'"']})]})]})},S)),c.length>0&&c.length<1&&n.jsxs("div",{className:"p-3 text-center text-xs text-gray-500",children:['No results found for "',c,'"']}),n.jsx("div",{className:"p-2 bg-gray-50 text-center",children:n.jsx(_e,{to:`/community/${s.id}?search=${encodeURIComponent(c)}`,className:"text-xs text-teal-600 hover:underline",children:"View all results →"})})]})]}),n.jsxs("div",{className:"flex items-center gap-3 text-xs mb-2",children:[n.jsxs("span",{className:"text-gray-500",children:[n.jsx("span",{className:"font-medium",children:o*17+8})," posts"]}),n.jsxs("span",{className:"text-gray-500",children:["Created: ",n.jsx("span",{className:"font-medium",children:s.created_at?new Date(s.created_at).toLocaleDateString():"recently"})]})]}),n.jsx(_e,{to:`/community/${s.id}`,className:"text-xs text-teal-600 hover:underline",children:"View full community →"})]})]}):n.jsxs("div",{className:"w-full bg-white shadow-sm hover:shadow-md transition-shadow border-l-4 rounded-sm overflow-hidden flex flex-col",style:{borderLeftColor:u},children:[n.jsx("div",{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(_e,{to:`/community/${s.id}`,className:"flex items-center flex-grow",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white mr-3",style:{backgroundColor:u},children:n.jsx("span",{className:"text-sm font-bold",children:s.name.substring(0,2).toUpperCase()})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"font-bold text-base hover:text-teal-600 transition-colors",children:s.name}),s.privacy==="private"&&n.jsx("span",{className:"ml-2 text-xs bg-gray-100 px-2 py-0.5 text-pink-600 font-medium rounded-full",children:"PRIVATE"})]}),n.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mt-1",children:s.description}),n.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs",children:[n.jsxs("span",{className:"text-gray-500",children:[n.jsx("span",{className:"font-medium",children:o*42+12})," members"]}),n.jsxs("span",{className:"text-gray-500",children:[n.jsx("span",{className:"font-medium",children:o*17+8})," posts"]}),n.jsxs("span",{className:"text-gray-500",children:["Created: ",n.jsx("span",{className:"font-medium",children:s.created_at?new Date(s.created_at).toLocaleDateString():"recently"})]})]})]})]}),n.jsx("div",{children:n.jsx(_i,{communityId:s.id,variant:"compact",className:"bg-black hover:bg-gray-800 text-white text-xs uppercase tracking-wider rounded-sm",onJoin:()=>{}})})]})}),n.jsx("button",{className:"w-full h-6 bg-gray-100 hover:bg-gray-100 cursor-pointer",onClick:()=>m(s.id),children:n.jsx("span",{className:"text-xxs text-gray-400",children:l?"Collapse":"Expand"})}),l&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:`Search in ${s.name}...`,value:c,onChange:w=>h(s.id,w.target.value),className:"w-full p-2 text-sm bg-gray-50 border border-gray-200 rounded focus:outline-none focus:border-teal-400"}),n.jsx("button",{className:"absolute right-0 top-0 h-full px-3 text-gray-600 hover:text-teal-600",children:"⌕"})]}),c.trim().length>0&&n.jsxs("div",{className:"mt-2 bg-white border border-gray-200 rounded",children:[n.jsxs("div",{className:"p-2 border-b border-gray-100 flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium",children:"Search Results"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Max 10 results"})]}),Array.from({length:Math.min(c.length+1,10)}).map((w,S)=>n.jsx("div",{className:"py-2 px-2 border-b border-gray-100 last:border-0",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 mr-2 flex-shrink-0",style:{backgroundColor:u}}),n.jsxs("div",{children:[n.jsxs("h5",{className:"text-sm font-medium",children:[c," result #",S+1]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Posted by User",S+100," • ",S+1," days ago"]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-700",children:['Post containing search term "',c,'"']})]})]})},S)),c.length>0&&c.length<1&&n.jsxs("div",{className:"p-3 text-center text-xs text-gray-500",children:['No results found for "',c,'"']}),n.jsx("div",{className:"p-2 bg-gray-50 text-center",children:n.jsx(_e,{to:`/community/${s.id}?search=${encodeURIComponent(c)}`,className:"text-xs text-teal-600 hover:underline",children:"View all results →"})})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Recent Posts"}),n.jsx(_e,{to:`/community/${s.id}`,className:"text-xs text-teal-600 hover:underline",children:"View All"})]}),y&&n.jsx("div",{className:"text-center py-4",children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-teal-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("div",{className:"w-2 h-2 bg-pink-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}}),n.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"Loading posts..."})]})}),j&&n.jsxs("div",{className:"text-center py-3",children:[n.jsx("p",{className:"text-xs text-red-500",children:j}),n.jsx("button",{onClick:()=>b(s.id),className:"text-xs text-teal-600 mt-1 hover:underline",children:"Try again"})]}),!y&&g&&g.length>0&&g.slice(0,3).map(w=>n.jsx("div",{className:"py-2 border-b border-gray-100 last:border-0",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 mr-2 flex-shrink-0",style:{backgroundColor:u}}),n.jsxs("div",{children:[n.jsx(_e,{to:`/post/${w.id}`,children:n.jsx("h5",{className:"text-sm font-medium hover:text-teal-600",children:w.title})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Posted by ",w.username||"User"," · ",new Date(w.created_at).toLocaleString()]}),n.jsxs("p",{className:"text-xs mt-1 line-clamp-2",children:[w.content.substring(0,100),w.content.length>100?"...":""]})]})]})},w.id)),!y&&(!g||g.length===0)&&!j&&n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"No posts in this community yet."}),n.jsx(_e,{to:`/community/${s.id}`,className:"text-xs text-teal-600 mt-1 hover:underline block",children:"Be the first to post"})]})]})]})]})});function Fg(){const[s,o]=x.useState(!1),[l,u]=x.useState([]),[c,m]=x.useState([]),[h,p]=x.useState(!0),[g,y]=x.useState(null),[j,b]=x.useState(!1),[w,S]=x.useState(""),[M,D]=x.useState(null),[R,U]=x.useState({}),[T,O]=x.useState("trending"),[q,Q]=x.useState("all"),[te,E]=x.useState("list"),[A,K]=x.useState({}),[Z,Ce]=x.useState({}),[je,Fe]=x.useState({}),[Ne,Ee]=x.useState([]),[De,Re]=x.useState(!1),J=mr(),{isAuthenticated:me,token:ee,user:P}=lt(),I=async re=>{const ce=M!==re;D(ce?re:null),ce&&!A[re]&&await ye(re)},ye=async re=>{if(!Z[re]){Ce(ce=>({...ce,[re]:!0})),Fe(ce=>({...ce,[re]:null}));try{const ce=await Ei(re,ee);K(Le=>({...Le,[re]:ce}))}catch(ce){console.error(`Error fetching posts for community ${re}:`,ce),Fe(Le=>({...Le,[re]:ce instanceof Error?ce.message:"Failed to load posts"}))}finally{Ce(ce=>({...ce,[re]:!1}))}}},ke=(re,ce)=>{U(Le=>({...Le,[re]:ce}))},be=re=>{O(re);let ce=[...c];switch(re){case"new":ce=ce.sort((Le,Ge)=>new Date(Ge.created_at).getTime()-new Date(Le.created_at).getTime());break;case"popular":ce=ce.sort((Le,Ge)=>{const Ze=parseInt(Le.id)||0;return(parseInt(Ge.id)||0)*42+12-(Ze*42+12)});break;case"active":ce=ce.sort((Le,Ge)=>{const Ze=parseInt(Le.id)||0;return(parseInt(Ge.id)||0)*17+8-(Ze*17+8)});break;default:ce=ce.sort((Le,Ge)=>{const Ze=new Date(Le.created_at).getTime(),Dt=new Date(Ge.created_at).getTime(),Pr=parseInt(Le.id)||0,nr=parseInt(Ge.id)||0;return Dt+nr-(Ze+Pr)})}B(ce)},we=re=>{Q(re),B([...c])},B=re=>{let ce=re;q!=="all"&&(ce=ce.filter(Le=>q==="private"?Le.privacy==="private":Le.privacy!=="private")),u(ce)},ue=async()=>{p(!0),y(null);try{const re=await jl();m(re);let ce=[...re];switch(T){case"new":ce.sort((Le,Ge)=>new Date(Ge.created_at).getTime()-new Date(Le.created_at).getTime());break;case"popular":ce.sort((Le,Ge)=>{const Ze=parseInt(Le.id)||0;return(parseInt(Ge.id)||0)*42+12-(Ze*42+12)});break;case"active":ce.sort((Le,Ge)=>{const Ze=parseInt(Le.id)||0;return(parseInt(Ge.id)||0)*17+8-(Ze*17+8)});break;default:ce.sort((Le,Ge)=>{const Ze=new Date(Le.created_at).getTime(),Dt=new Date(Ge.created_at).getTime(),Pr=parseInt(Le.id)||0,nr=parseInt(Ge.id)||0;return Dt+nr-(Ze+Pr)})}q!=="all"&&(ce=ce.filter(Le=>q==="private"?Le.privacy==="private":Le.privacy!=="private")),u(ce)}catch(re){console.error("Failed to fetch communities:",re),y("Failed to load communities")}finally{p(!1)}},Te=async()=>{if(!me||!ee||!P){Ee([]);return}Re(!0);try{const re=await Nf(P.id);Ee(re)}catch(re){console.error("Failed to fetch user communities:",re)}finally{Re(!1)}};x.useEffect(()=>{ue()},[]),x.useEffect(()=>{Te()},[me,ee,P]);const ut=re=>{ue(),J(`/community/${re}`)},Nt=async re=>{if(re.preventDefault(),!!w.trim())try{b(!0);const ce=await jl(w);u(ce)}catch(ce){ce instanceof Error?y(ce.message):y("An unexpected error occurred")}finally{b(!1)}};return n.jsxs("div",{className:"w-full font-mono bg-gray-50",children:[n.jsxs("div",{className:"w-full bg-black text-white py-2 px-4 flex items-center justify-between sticky top-0 z-20 shadow-md",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx("span",{className:"text-gray-400",children:"Sort:"}),n.jsxs("select",{className:"bg-gray-800 text-white border-none rounded px-2 py-1 text-xs cursor-pointer",value:T,onChange:re=>be(re.target.value),children:[n.jsx("option",{value:"trending",children:"Trending"}),n.jsx("option",{value:"new",children:"Newest"}),n.jsx("option",{value:"popular",children:"Most Popular"}),n.jsx("option",{value:"active",children:"Most Active"})]})]}),n.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Filter:"}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("button",{className:`px-2 py-1 rounded text-xs transition-colors ${q==="all"?"bg-teal-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,onClick:()=>we("all"),children:"All"}),n.jsx("button",{className:`px-2 py-1 rounded text-xs transition-colors ${q==="public"?"bg-teal-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,onClick:()=>we("public"),children:"Public"}),n.jsx("button",{className:`px-2 py-1 rounded text-xs transition-colors ${q==="private"?"bg-teal-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,onClick:()=>we("private"),children:"Private"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsxs("div",{className:"hidden md:flex items-center mr-2 border-r border-gray-700 pr-3",children:[n.jsx("span",{className:"text-gray-400 text-xs mr-1",children:"View:"}),n.jsxs("div",{className:"flex",children:[n.jsx("button",{className:`px-2 py-1 rounded-l text-xs flex items-center justify-center transition-colors border-r border-gray-700 ${te==="list"?"bg-teal-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,title:"List view",onClick:()=>E("list"),children:n.jsx("span",{children:"List"})}),n.jsx("button",{className:`px-2 py-1 rounded-r text-xs flex items-center justify-center transition-colors ${te==="compact"?"bg-teal-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,title:"Compact view",onClick:()=>E("compact"),children:n.jsx("span",{children:"Compact"})})]})]}),n.jsxs("button",{className:"bg-gray-800 hover:bg-gray-700 px-3 py-1 rounded text-xs transition-colors flex items-center",onClick:()=>ue(),children:[n.jsx("span",{className:"mr-1",children:"↻"})," Refresh"]})]})]}),n.jsxs("div",{className:"flex w-full",children:[n.jsx("div",{className:"hidden md:block w-64 xl:w-72 flex-shrink-0 border-r border-gray-200 h-screen overflow-y-auto custom-scrollbar sticky top-10",children:n.jsxs("div",{className:"p-4",children:[n.jsx("form",{onSubmit:Nt,className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Search communities...",value:w,onChange:re=>S(re.target.value),className:"w-full p-2 text-sm bg-white text-black border-2 border-teal-400 rounded focus:outline-none focus:ring-2 focus:ring-teal-500",disabled:j}),n.jsx("button",{type:"submit",className:"absolute right-0 top-0 bottom-0 px-3 bg-teal-400 text-black font-bold text-sm uppercase tracking-wide hover:bg-teal-300 transition-colors rounded-r",disabled:j||!w.trim(),children:j?"...":"Go"})]})}),n.jsxs("div",{className:"bg-gray-100 p-3 mb-4 border-l-2 border-teal-400",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-bold text-sm uppercase",children:"Your Communities"}),n.jsx("button",{className:"text-xs font-medium text-teal-600 hover:text-teal-800",onClick:()=>alert("This will show all your communities"),children:"See All"})]}),me?n.jsx("div",{className:"max-h-32 overflow-y-auto custom-scrollbar",children:De?n.jsx("div",{className:"py-2 text-center",children:n.jsxs("div",{className:"inline-flex items-center space-x-1",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-teal-400 rounded-full animate-pulse"}),n.jsx("div",{className:"w-1.5 h-1.5 bg-teal-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),n.jsx("div",{className:"w-1.5 h-1.5 bg-teal-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}}),n.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"Loading..."})]})}):Ne.length>0?Ne.map((re,ce)=>n.jsxs(_e,{to:`/community/${re.id}`,className:"flex items-center py-1.5 border-b border-gray-200 last:border-0 hover:bg-gray-50",children:[n.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs mr-2",style:{backgroundColor:ce%3===0?"#2dd4bf":ce%3===1?"#f472b6":"#a78bfa"},children:re.name.substring(0,1).toUpperCase()}),n.jsx("span",{className:"text-sm hover:text-teal-600 truncate",children:re.name})]},re.id)):n.jsxs("div",{className:"py-2 text-center",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"You haven't joined any communities yet."}),n.jsx("p",{className:"text-xs text-teal-600 mt-1",children:"Join communities to see them here!"})]})}):n.jsx("div",{className:"text-xs text-gray-500 italic",children:"Sign in to see your communities"})]}),n.jsxs("button",{onClick:()=>o(!0),className:"w-full px-4 py-2.5 bg-black text-white text-sm font-bold uppercase hover:bg-gray-800 transition-colors mb-4 rounded-sm flex items-center justify-center shadow",children:[n.jsx("span",{className:"mr-2",children:"+"})," Create Community"]}),n.jsx(Lg,{})]})}),n.jsxs("div",{className:"flex-grow min-h-screen",children:[n.jsx("div",{className:"md:hidden w-full p-4 flex justify-end",children:n.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-black text-white text-sm font-bold uppercase rounded-sm shadow-md flex items-center",children:[n.jsx("span",{className:"mr-1",children:"+"})," Create"]})}),n.jsx("form",{onSubmit:Nt,className:"md:hidden mx-4 mt-4 mb-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"text",placeholder:"Search communities...",value:w,onChange:re=>S(re.target.value),className:"flex-1 p-2 text-sm bg-gray-800 text-white border-2 border-teal-400 focus:outline-none focus:ring-1 focus:ring-teal-400",disabled:j}),n.jsx("button",{type:"submit",className:"px-3 py-2 bg-teal-400 text-black font-bold text-xs uppercase tracking-wider hover:bg-teal-300",disabled:j||!w.trim(),children:j?"...":"Search"})]})}),g&&n.jsxs("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 p-3 mx-4 mt-4 text-sm",children:[n.jsx("span",{className:"font-bold",children:"ERROR:"})," ",g]}),(h||j)&&n.jsx("div",{className:"bg-gray-100 p-4 m-4 rounded shadow-inner",children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-teal-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("div",{className:"w-2 h-2 bg-pink-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}}),n.jsx("span",{className:"ml-2 text-sm text-gray-600",children:j?"Searching communities...":"Loading communities..."})]})}),!h&&!j&&n.jsx("div",{className:"mx-4 my-4",children:l.length===0?n.jsxs("div",{className:"text-center py-12 bg-white border border-gray-200 rounded shadow-md",children:[n.jsx("span",{className:"text-xl uppercase font-bold tracking-wider text-gray-700",children:"No Communities Found"}),n.jsx("p",{className:"mt-2 text-gray-500",children:"Try creating a new community or adjusting your search."})]}):n.jsx("div",{className:"flex flex-col space-y-2",children:l.map((re,ce)=>{const Le=M===re.id,Ge=R[re.id]||"",Ze=ce%3===0?"#2dd4bf":ce%3===1?"#f472b6":"#a78bfa";return n.jsx($g,{community:re,index:ce,isExpanded:Le,communityColor:Ze,communitySearchTerm:Ge,toggleCommunityExpansion:I,updateCommunitySearchTerm:ke,viewMode:te,communityPosts:A[re.id]||[],loadingPosts:Z[re.id]||!1,postErrors:je[re.id]||null,fetchCommunityPosts:ye},re.id)})})})]})]}),s&&n.jsx(Rg,{onClose:()=>o(!1),onSuccess:ut})]})}function zg({communityId:s}){const[o,l]=x.useState(null),[u,c]=x.useState(!0),[m,h]=x.useState(null),[p,g]=x.useState(!1),[y,j]=x.useState(!1),{user:b,token:w,isAuthenticated:S}=lt(),M=D=>{const R=D.id.split("").reduce((O,q)=>O+q.charCodeAt(0),0),U=10+R%990,T=5+R%195;return{memberCount:U,postCount:T}};return x.useEffect(()=>{async function D(){try{c(!0);const R=await mg(s,w);if(R){const U=M(R);l({...R,memberCount:U.memberCount,postCount:U.postCount}),b&&g(!0)}else h("Community not found")}catch(R){console.error("Error fetching community:",R),h(R.message||"Failed to fetch community")}finally{c(!1)}}s&&D()},[s,b,w]),u?n.jsxs("div",{className:"animate-pulse bg-gray-200 p-8 rounded-md text-center",children:[n.jsx("div",{className:"h-6 bg-gray-300 w-1/3 mx-auto mb-4 rounded"}),n.jsx("div",{className:"h-4 bg-gray-300 w-2/3 mx-auto rounded"})]}):m||!o?n.jsxs("div",{className:"text-center p-8 bg-red-50 text-red-500 rounded-md",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Error"}),n.jsx("p",{children:m||"Community not found"})]}):n.jsx("div",{className:"bg-white p-6 rounded-md shadow mb-6",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:o.name}),n.jsx("p",{className:"text-gray-600 mt-2",children:o.description}),n.jsxs("div",{className:"flex mt-4 text-sm text-gray-500 space-x-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:o.memberCount})," members"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:o.postCount})," posts"]}),n.jsxs("div",{children:["Created ",new Date(o.created_at).toLocaleDateString()]})]})]}),n.jsx(_i,{communityId:o.id,className:"px-4 py-2 rounded-md",onJoin:()=>g(!0),onLeave:()=>g(!1)})]})})}function Og({communityId:s}){const[o,l]=x.useState([]),[u,c]=x.useState(!0),[m,h]=x.useState(null);return x.useEffect(()=>{async function p(){try{c(!0);const g=await dg(s);l(g||[])}catch(g){console.error("Error fetching community rules:",g),l([]),g instanceof Error?h(g.message):h("Unknown error")}finally{c(!1)}}s&&p()},[s]),u?n.jsxs("div",{className:"bg-white rounded-md shadow p-4 animate-pulse",children:[n.jsx("h3",{className:"text-lg font-medium h-5 bg-gray-200 rounded w-1/3 mb-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/6"})]})]}):o.length===0?n.jsxs("div",{className:"bg-white rounded-md shadow p-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Community Rules"}),n.jsx("p",{className:"text-gray-500 mt-2",children:"No rules have been set for this community yet."})]}):n.jsxs("div",{className:"bg-white rounded-md shadow p-4",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Community Rules"}),n.jsx("ol",{className:"mt-3 space-y-3 list-decimal list-inside",children:o.map(p=>n.jsxs("li",{className:"text-gray-700",children:[n.jsx("span",{className:"font-medium",children:p.title}),p.description&&n.jsx("p",{className:"text-gray-600 ml-6 mt-1 text-sm",children:p.description})]},p.id))})]})}function Ug({communityId:s}){const[o,l]=x.useState(null),[u,c]=x.useState(!0),[m,h]=x.useState(null);return x.useEffect(()=>{async function p(){try{c(!0);const g=await Tg(s);g?l(g):h("Community not found")}catch(g){console.error("Error fetching community data:",g),g instanceof Error?h(g.message):h("An unexpected error occurred")}finally{c(!1)}}s&&p()},[s]),u?n.jsxs("div",{className:"card p-4",children:[n.jsx("h2",{className:"font-medium mb-2",children:"About"}),n.jsx("div",{className:"text-sm text-gray-600",children:n.jsx("p",{children:"Loading community information..."})})]}):m?n.jsxs("div",{className:"card p-4",children:[n.jsx("h2",{className:"font-medium mb-2",children:"About"}),n.jsx("div",{className:"text-sm text-red-600",children:n.jsxs("p",{children:["Error: ",m]})})]}):o?n.jsxs("div",{className:"card p-4",children:[n.jsx("h2",{className:"font-medium mb-2",children:"About"}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[n.jsxs("p",{children:["Created: ",o.creationDateFormatted]}),n.jsxs("p",{children:["Members: ",o.memberCount]}),n.jsxs("p",{children:["Posts: ",o.postCount]}),o.moderators&&o.moderators.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Moderators:"}),n.jsx("ul",{className:"list-disc list-inside ml-2",children:o.moderators.map(p=>n.jsx("li",{className:"text-blue-600 font-medium",children:p.username||`User ${p.user_id.substring(0,8)}`},p.user_id))})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Description:"}),n.jsx("p",{children:o.description})]}),n.jsxs("p",{children:["Privacy: ",o.privacy==="public"?"Public":"Private"]})]})]}):n.jsxs("div",{className:"card p-4",children:[n.jsx("h2",{className:"font-medium mb-2",children:"About"}),n.jsx("div",{className:"text-sm text-gray-600",children:n.jsx("p",{children:"Community not found"})})]})}function Ag({communityId:s}){const{user:o,token:l}=lt(),[u,c]=x.useState(null),[m,h]=x.useState(null),[p,g]=x.useState(!0),[y,j]=x.useState(null),[b,w]=x.useState(!1),[S,M]=x.useState(!1);x.useEffect(()=>{async function O(){try{g(!0);const[q,Q]=await Promise.all([Ng(s),Bi(s)]);if(c(q),h(Q),o&&l&&o.id)try{const te=await Vi(s,l,o.id);te?(M(te.role==="moderator"||te.role==="admin"),console.log(`User is ${te.role} of community ${s}`)):(console.log(`User is not a member of community ${s}`),M(!1))}catch(te){console.error("Error checking moderator status:",te)}}catch(q){console.error("Error fetching community settings:",q),q instanceof Error?j(q.message):j("An unexpected error occurred")}finally{g(!1)}}s&&O()},[s,o,l]),x.useEffect(()=>{!u&&m&&c({community_id:m.id,allow_post_images:!0,allow_post_links:!0,join_method:"auto_approve",require_post_approval:!1,restricted_words:null,custom_theme_color:null,custom_banner_url:null,minimum_account_age_days:0,minimum_karma_required:0,updated_at:new Date}),u&&!m&&h({id:s,name:"Community",description:"No description available",privacy:"public"})},[u,m,s]);const D=async()=>{if(m)try{w(!0);const O=m.privacy==="public"?"private":"public",q=await bg(s,{privacy:O});h(q)}catch(O){O instanceof Error?j(O.message):j("Failed to update privacy setting")}finally{w(!1)}},R=async()=>{if(u)try{w(!0);const O=await ji(s,{allow_post_images:!u.allow_post_images});c(O)}catch(O){O instanceof Error?j(O.message):j("Failed to update settings")}finally{w(!1)}},U=async()=>{if(u)try{w(!0);const O=await ji(s,{allow_post_links:!u.allow_post_links});c(O)}catch(O){O instanceof Error?j(O.message):j("Failed to update settings")}finally{w(!1)}};if(p)return n.jsxs("div",{className:"card p-4",children:[n.jsx("h2",{className:"font-medium mb-2",children:"Community Settings"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading settings..."})]});if(!u&&!m)return n.jsxs("div",{className:"card p-4",children:[n.jsx("h2",{className:"font-medium mb-2",children:"Community Settings"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Settings not available"})]});const T=async O=>{if(!u)return;const q=O.target.value;try{w(!0);const Q=await ji(s,{join_method:q},l);c(Q)}catch(Q){Q instanceof Error?j(Q.message):j("Failed to update join method")}finally{w(!1)}};return!u||!m?n.jsxs("div",{className:"card p-4",children:[n.jsx("h2",{className:"font-medium mb-2",children:"Community Settings"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading settings..."})]}):n.jsxs("div",{className:"card p-4",children:[n.jsx("h2",{className:"font-medium mb-2",children:"Community Settings"}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-3",children:[n.jsx("div",{className:"mt-2",children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:m.privacy==="public",onChange:D,disabled:b,className:"mr-2"}),"Public Community"]})}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:u.allow_post_images,onChange:R,disabled:b,className:"mr-2"}),"Allow Post Images"]})}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:u.allow_post_links,onChange:U,disabled:b,className:"mr-2"}),"Allow Post Links"]})}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block mb-2 font-medium",children:"Join Method:"}),n.jsxs("select",{value:u.join_method,onChange:T,disabled:b,className:"w-full p-2 border border-gray-300 rounded",children:[n.jsx("option",{value:"auto_approve",children:"Auto Approve (anyone can join)"}),n.jsx("option",{value:"requires_approval",children:"Requires Approval (moderator must approve joins)"}),n.jsx("option",{value:"invite_only",children:"Invite Only (no join requests)"})]})]}),b&&n.jsx("p",{className:"text-blue-600 italic",children:"Saving changes..."}),S&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[n.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Moderator Controls"}),n.jsx(_e,{to:`/community/${s}/moderation`,className:"inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Moderation Dashboard"})]})]})]})}function Ig(s){const{activity_type_name:o,action_name:l,entity_type:u,entity_details:c,created_at:m}=s;let h=u||"unknown",p="";c&&(u==="post"&&c.title?p=c.title:u==="comment"&&c.content?p=c.content.substring(0,30)+(c.content.length>30?"...":""):u==="community"&&c.name?p=c.name:u==="user"&&c.username&&(p=c.username));const g=new Date(m).toLocaleString();return p?`${o} ${l.toLowerCase()} - ${h}: "${p}" (${g})`:`${o} ${l.toLowerCase()} - ${h} (${g})`}const Wi=({userId:s,communityId:o,postId:l,limit:u=20,showFilters:c=!1})=>{const{token:m}=lt(),[h,p]=x.useState([]),[g,y]=x.useState(!0),[j,b]=x.useState(null),[w,S]=x.useState(0),[M,D]=x.useState(!0),[R,U]=x.useState(""),[T,O]=x.useState(""),[q,Q]=x.useState("");x.useEffect(()=>{te()},[s,o,l,w,R,T,q]);const te=async()=>{y(!0),b(null);try{let A=[];o?A=await wi("community",o,m):s?A=await wi("user",s,m):l&&(A=await wi("post",l,m)),p(A),D(A.length===u)}catch(A){console.error("Error fetching activities:",A),b(A.message)}finally{y(!1)}},E=()=>{S(A=>A+u)};return g&&h.length===0?n.jsx("div",{className:"text-center py-4",children:"Loading activities..."}):j&&h.length===0?n.jsxs("div",{className:"text-center text-red-500 py-4",children:["Error loading activities: ",j]}):h.length===0?n.jsx("div",{className:"text-center py-4",children:"No activities found."}):n.jsxs("div",{className:"activity-history mt-4",children:[c&&n.jsxs("div",{className:"filters mb-4 flex gap-2 flex-wrap",children:[n.jsxs("select",{value:R,onChange:A=>U(A.target.value),className:"px-3 py-2 border rounded",children:[n.jsx("option",{value:"",children:"All Activity Types"}),n.jsx("option",{value:"POST",children:"Posts"}),n.jsx("option",{value:"COMMENT",children:"Comments"}),n.jsx("option",{value:"VOTE",children:"Votes"}),n.jsx("option",{value:"COMMUNITY",children:"Communities"})]}),n.jsxs("select",{value:T,onChange:A=>O(A.target.value),className:"px-3 py-2 border rounded",children:[n.jsx("option",{value:"",children:"All Actions"}),n.jsx("option",{value:"CREATE",children:"Create"}),n.jsx("option",{value:"UPDATE",children:"Update"}),n.jsx("option",{value:"DELETE",children:"Delete"}),n.jsx("option",{value:"UPVOTE",children:"Upvote"}),n.jsx("option",{value:"DOWNVOTE",children:"Downvote"}),n.jsx("option",{value:"JOIN",children:"Join"}),n.jsx("option",{value:"LEAVE",children:"Leave"})]}),n.jsxs("select",{value:q,onChange:A=>Q(A.target.value),className:"px-3 py-2 border rounded",children:[n.jsx("option",{value:"",children:"All Entities"}),n.jsx("option",{value:"post",children:"Posts"}),n.jsx("option",{value:"comment",children:"Comments"}),n.jsx("option",{value:"community",children:"Communities"}),n.jsx("option",{value:"user",children:"Users"})]})]}),n.jsx("ul",{className:"divide-y",children:h.map(A=>n.jsx("li",{className:"py-2",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{children:[n.jsx("strong",{children:A.username||"User"})," "," ",Ig(A)]}),n.jsx("div",{className:"text-gray-500 text-sm",children:new Date(A.created_at).toLocaleString()})]})},A.id))}),M&&n.jsx("button",{onClick:E,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:g,children:g?"Loading...":"Load More"})]})};function Bg({communityId:s}){const[o,l]=x.useState(null),[u,c]=x.useState(!1),[m,h]=x.useState(null);return x.useEffect(()=>{async function p(){try{c(!0);const g=await bl(s);l(g);const y=g.filter(j=>j.role==="moderator"||j.role==="admin");console.log("Raw members data:",g),console.log("Moderator data:",y)}catch(g){console.error("Error fetching data:",g),h("Failed to fetch data")}finally{c(!1)}}p()},[s]),n.jsxs("div",{className:"bg-black text-white p-4 max-w-lg rounded-lg",children:[n.jsx("h3",{className:"text-xl font-bold mb-2",children:"Moderator Debug"}),u&&n.jsx("p",{children:"Loading..."}),m&&n.jsx("p",{className:"text-red-500",children:m}),o&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mt-2",children:"Raw Member Data Structure"}),n.jsx("pre",{className:"text-xs bg-gray-900 p-2 rounded overflow-auto max-h-40 mt-1",children:JSON.stringify(o[0]||{},null,2)}),n.jsx("h4",{className:"text-lg font-semibold mt-4",children:"Moderators"}),n.jsx("ul",{className:"mt-1",children:o.filter(p=>p.role==="moderator"||p.role==="admin").map((p,g)=>n.jsxs("li",{className:"border-b border-gray-700 py-1",children:[n.jsx("span",{className:"text-blue-400",children:"ID:"})," ",p.user_id,n.jsx("br",{}),n.jsx("span",{className:"text-blue-400",children:"Username:"})," ",p.username||"Not available",n.jsx("br",{}),n.jsx("span",{className:"text-blue-400",children:"Role:"})," ",p.role]},g))})]})]})}function Vg(){const{id:s}=Sl(),[o,l]=x.useState(!1),{isAuthenticated:u}=lt(),c=()=>{window.location.reload()};return n.jsxs("div",{className:"w-full max-w-[98%] xl:max-w-[1800px] mx-auto px-2 py-8 font-mono",children:[n.jsx(zg,{communityId:s||""}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 mt-2",children:[n.jsxs("div",{className:"lg:col-span-3",children:[u&&n.jsxs("button",{onClick:()=>l(!0),className:"w-full p-6 bg-black text-white mb-8 hover:bg-gray-900 flex items-center justify-center transform hover:skew-y-1 transition-transform shadow-lg relative overflow-hidden group",children:[n.jsxs("span",{className:"font-bold text-xl uppercase tracking-widest relative z-10",children:["+ CREATE ",n.jsx("span",{className:"text-teal-400",children:"POST"})]}),n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500 transform translate-x-0 group-hover:translate-y-1 transition-transform"})]}),n.jsxs("div",{className:"bg-gray-100 p-8 mb-8 relative transform -rotate-0.5 shadow-lg",children:[n.jsxs("div",{className:"absolute -top-6 left-8 bg-black text-white px-4 py-1 transform rotate-2 shadow-md",children:[n.jsx("span",{className:"text-purple-400",children:"COMMUNITY"})," POSTS"]}),n.jsx(Pi,{communityId:s})]})]}),n.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[n.jsxs("div",{className:"bg-gray-100 p-6 transform rotate-0.5 shadow-md",children:[n.jsxs("h2",{className:"font-bold mb-4 uppercase tracking-tight text-xl relative inline-block",children:["About",n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-teal-400"})]}),n.jsx(Ug,{communityId:s||""})]}),n.jsxs("div",{className:"bg-gray-100 p-6 transform -rotate-0.5 shadow-md",children:[n.jsxs("h2",{className:"font-bold mb-4 uppercase tracking-tight text-xl relative inline-block",children:["Rules",n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-pink-400"})]}),n.jsx(Og,{communityId:s||""})]}),n.jsxs("div",{className:"bg-gray-100 p-6 transform rotate-0.5 shadow-md",children:[n.jsxs("h2",{className:"font-bold mb-4 uppercase tracking-tight text-xl relative inline-block",children:["Settings",n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-purple-400"})]}),n.jsx(Ag,{communityId:s||""})]}),n.jsxs("div",{className:"bg-gray-100 p-6 transform -rotate-0.5 shadow-md",children:[n.jsxs("h2",{className:"font-bold mb-4 uppercase tracking-tight text-xl relative inline-block",children:["Activity",n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-yellow-400"})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:n.jsx(Wi,{communityId:s||"",limit:10})})]}),n.jsx(Bg,{communityId:s||""})]})]}),o&&n.jsx(kf,{onClose:()=>l(!1),communityId:s,onSuccess:c})]})}function Wg({username:s,userData:o,isCurrentUser:l=!1,onEditProfile:u}){const c=s||"anonymous";return n.jsxs("div",{className:"bg-black text-white p-6 transform rotate-0.5 shadow-md",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-none transform -rotate-3 shadow-md border-2 border-teal-400 relative overflow-hidden",children:n.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-600",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold uppercase",children:c}),n.jsx("p",{className:"text-sm text-gray-400",children:"Member since 2023"})]})]}),l&&u&&n.jsx("button",{onClick:u,className:"px-3 py-2 bg-gray-900 text-white uppercase tracking-wider hover:bg-gray-800 transition-transform transform hover:translate-x-1 border-l-2 border-teal-400 shadow-md text-sm",children:"Edit Profile"})]}),n.jsx("div",{className:"mt-6 bg-gray-900 p-4 border-l-2 border-pink-400",children:n.jsx("p",{className:"text-gray-300",children:(o==null?void 0:o.bio)||"No bio yet"})}),n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Posts"}),n.jsx("span",{className:"text-teal-400 font-bold",children:(o==null?void 0:o.post_count)||"-"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Comments"}),n.jsx("span",{className:"text-pink-400 font-bold",children:(o==null?void 0:o.comment_count)||"-"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Communities"}),n.jsx("span",{className:"text-purple-400 font-bold",children:(o==null?void 0:o.communities_joined)||"-"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Upvotes"}),n.jsx("span",{className:"text-teal-400 font-bold",children:(o==null?void 0:o.upvotes_received)||"-"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-400",children:"Downvotes"}),n.jsx("span",{className:"text-pink-400 font-bold",children:(o==null?void 0:o.downvotes_received)||"-"})]})]})]})}function qd({username:s,posts:o=[]}){return n.jsx("div",{className:"space-y-6",children:o.length===0?n.jsxs("div",{className:"text-center py-12 bg-black text-white",children:[n.jsx("span",{className:"text-2xl uppercase font-bold tracking-wider",children:"EMPTY"}),n.jsx("p",{className:"mt-4 text-gray-300",children:"No posts yet."})]}):o.map((l,u)=>n.jsxs("div",{className:`bg-white p-6 shadow-md transform relative ${u%2===0?"rotate-0.5":"-rotate-0.5"}`,children:[n.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${u%3===0?"bg-teal-400":u%3===1?"bg-pink-400":"bg-purple-400"}`}),n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-xl",children:l.title||"Untitled Post"}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 mt-1",children:[n.jsxs("span",{children:["Posted ",l.timestamp||l.created_at||"recently"]}),l.community&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"•"}),n.jsxs("span",{children:["in r/",l.community]})]})]})]})}),n.jsx("p",{className:"mt-4 text-gray-800",children:l.content}),n.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{className:"text-pink-500",children:"♥"}),n.jsxs("span",{children:[l.likes||0," likes"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{className:"text-teal-500",children:"💬"}),n.jsxs("span",{children:[l.comments||0," comments"]})]})]})]},l.id))})}function Hg({onEditProfile:s}){const{logout:o}=lt(),l=()=>{o()};return n.jsx("div",{className:"bg-black text-white p-6 transform -rotate-0.5 shadow-md",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("button",{className:"w-full px-4 py-3 bg-gray-900 text-white uppercase tracking-wider hover:bg-gray-800 transition-transform transform hover:translate-x-1 border-l-2 border-teal-400 shadow-md relative overflow-hidden group",onClick:s,children:[n.jsx("span",{className:"relative z-10",children:"Edit Profile"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500 group-hover:w-full transition-all duration-300"})]}),n.jsxs("button",{className:"w-full px-4 py-3 bg-gray-900 text-white uppercase tracking-wider hover:bg-gray-800 transition-transform transform hover:translate-x-1 border-l-2 border-pink-400 shadow-md relative overflow-hidden group",children:[n.jsx("span",{className:"relative z-10",children:"Settings"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500 group-hover:w-full transition-all duration-300"})]}),n.jsxs("button",{className:"w-full px-4 py-3 bg-gray-900 text-white uppercase tracking-wider hover:bg-gray-800 transition-transform transform hover:translate-x-1 border-l-2 border-purple-400 shadow-md relative overflow-hidden group",onClick:l,children:[n.jsx("span",{className:"relative z-10",children:"Logout"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500 group-hover:w-full transition-all duration-300"})]})]})})}const Qg="http://localhost:3001";async function Jg(s,o){const l={"Content-Type":"application/json"};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${Qg}/api/users/profile`,{method:"PUT",headers:l,body:JSON.stringify(s)});if(!u.ok){const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to update profile")}return await u.json()}function Yg({onClose:s,onSuccess:o}){const{user:l,token:u}=lt(),[c,m]=x.useState((l==null?void 0:l.username)||""),[h,p]=x.useState((l==null?void 0:l.email)||""),[g,y]=x.useState((l==null?void 0:l.bio)||""),[j,b]=x.useState(!1),[w,S]=x.useState(null),M=async D=>{if(D.preventDefault(),!c.trim()){S("Username is required");return}if(!h.trim()){S("Email is required");return}try{b(!0),S(null),await Jg({username:c,email:h,bio:g.trim()||void 0},u),o()}catch(R){console.error("Failed to update profile:",R),S(R instanceof Error?R.message:"Failed to update profile")}finally{b(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md transform rotate-0.5 shadow-lg",children:[n.jsx("div",{className:"bg-black text-white p-4",children:n.jsxs("h2",{className:"text-xl font-bold uppercase tracking-tight relative inline-block",children:[n.jsx("span",{className:"text-teal-400",children:"EDIT"})," PROFILE",n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500"})]})}),n.jsxs("form",{onSubmit:M,className:"p-6 space-y-4",children:[w&&n.jsxs("div",{className:"bg-black text-white p-3 transform -rotate-0.5 shadow-md",children:[n.jsx("span",{className:"text-pink-400 font-bold uppercase",children:"ERROR:"})," ",w]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"username",className:"block text-sm font-bold uppercase tracking-wider text-gray-700 mb-1",children:"Username"}),n.jsx("input",{id:"username",type:"text",value:c,onChange:D=>m(D.target.value),className:"w-full p-3 bg-gray-100 border-l-2 border-teal-400 focus:outline-none",disabled:j})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-bold uppercase tracking-wider text-gray-700 mb-1",children:"Email"}),n.jsx("input",{id:"email",type:"email",value:h,onChange:D=>p(D.target.value),className:"w-full p-3 bg-gray-100 border-l-2 border-pink-400 focus:outline-none",disabled:j})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"bio",className:"block text-sm font-bold uppercase tracking-wider text-gray-700 mb-1",children:"Bio"}),n.jsx("textarea",{id:"bio",value:g,onChange:D=>y(D.target.value),className:"w-full p-3 bg-gray-100 border-l-2 border-purple-400 focus:outline-none",rows:4,placeholder:"Tell us about yourself...",disabled:j})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-300 text-gray-700 uppercase tracking-wider hover:bg-gray-400",disabled:j,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"px-4 py-2 bg-black text-white uppercase tracking-wider hover:bg-gray-800 relative overflow-hidden group",disabled:j,children:[n.jsx("span",{className:"relative z-10",children:j?"Saving...":"Save"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500 group-hover:w-full transition-all duration-300"})]})]})]})]})})}function Kd({isUser:s}){const{username:o}=Sl(),{user:l,token:u}=lt(),[c,m]=x.useState("profile"),[h,p]=x.useState([]),[g,y]=x.useState([]),[j,b]=x.useState(!0),[w,S]=x.useState(null),[M,D]=x.useState(l),[R,U]=x.useState(!1);return x.useEffect(()=>{(async()=>{b(!0),S(null);try{if(s&&l){D(l);const O=await Ei(null,u);p(O)}else if(o)try{const Q=(await(await fetch("http://localhost:3001/api/users")).json()).find(A=>A.username===o);if(!Q)throw new Error("User not found");D(Q);const E=(await Ei(null,u)).filter(A=>A.userId===Q.id);p(E)}catch(O){console.error("Failed to fetch user data:",O),S("User not found")}}catch(O){console.error("Failed to fetch posts:",O),S("Failed to load posts")}finally{b(!1)}})()},[s,l,o,u]),n.jsx("div",{className:"w-full font-mono",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[n.jsxs("div",{className:"w-full md:w-[300px] flex-shrink-0",children:[n.jsx(Wg,{username:(M==null?void 0:M.username)||"",userData:M,isCurrentUser:s,onEditProfile:()=>U(!0)}),s&&n.jsx("div",{className:"mt-6",children:n.jsx(Hg,{onEditProfile:()=>U(!0)})}),R&&n.jsx(Yg,{onClose:()=>U(!1),onSuccess:()=>{U(!1),l&&D(l)}}),n.jsxs("div",{className:"mt-6 bg-black text-white p-6 transform -rotate-0.5 shadow-md",children:[n.jsxs("h2",{className:"font-bold uppercase tracking-tight text-xl relative inline-block mb-4",children:[n.jsx("span",{className:"text-teal-400",children:"COMMUNITIES"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-teal-400"})]}),n.jsx("div",{className:"text-center py-4 text-gray-400",children:n.jsx("p",{children:"No communities yet"})})]})]}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("div",{className:"flex mb-6",children:[n.jsx("button",{className:`flex-1 py-3 px-4 uppercase font-bold tracking-wider ${c==="profile"?"bg-black text-white border-b-2 border-teal-400":"bg-gray-200 text-gray-700"}`,onClick:()=>m("profile"),children:"Profile Posts"}),n.jsx("button",{className:`flex-1 py-3 px-4 uppercase font-bold tracking-wider ${c==="community"?"bg-black text-white border-b-2 border-pink-400":"bg-gray-200 text-gray-700"}`,onClick:()=>m("community"),children:"Community Posts"}),n.jsx("button",{className:`flex-1 py-3 px-4 uppercase font-bold tracking-wider ${c==="activity"?"bg-black text-white border-b-2 border-purple-400":"bg-gray-200 text-gray-700"}`,onClick:()=>m("activity"),children:"Activity"})]}),c==="profile"?n.jsx(n.Fragment,{children:j?n.jsx("div",{className:"text-center py-12 text-2xl uppercase tracking-widest animate-pulse",children:"Loading posts..."}):w?n.jsxs("div",{className:"bg-black text-white p-4 mb-6",children:[n.jsx("span",{className:"text-pink-400 font-bold uppercase",children:"ERROR:"})," ",w]}):h.length===0?n.jsxs("div",{className:"text-center py-12 bg-black text-white",children:[n.jsx("span",{className:"text-2xl uppercase font-bold tracking-wider",children:"EMPTY"}),n.jsx("p",{className:"mt-4 text-gray-300",children:"No profile posts yet."})]}):n.jsx(qd,{username:(M==null?void 0:M.username)||"",posts:h})}):c==="community"?n.jsx(n.Fragment,{children:j?n.jsx("div",{className:"text-center py-12 text-2xl uppercase tracking-widest animate-pulse",children:"Loading posts..."}):w?n.jsxs("div",{className:"bg-black text-white p-4 mb-6",children:[n.jsx("span",{className:"text-pink-400 font-bold uppercase",children:"ERROR:"})," ",w]}):g.length===0?n.jsxs("div",{className:"text-center py-12 bg-black text-white",children:[n.jsx("span",{className:"text-2xl uppercase font-bold tracking-wider",children:"EMPTY"}),n.jsx("p",{className:"mt-4 text-gray-300",children:"No community posts yet."})]}):n.jsx(qd,{username:(M==null?void 0:M.username)||"",posts:g})}):n.jsx(Wi,{userId:M==null?void 0:M.id,showFilters:!0})]})]})})}function qg(){const[s,o]=x.useState(""),[l,u]=x.useState(""),[c,m]=x.useState(null),{login:h,loading:p,error:g}=lt(),y=mr(),j=async b=>{if(b.preventDefault(),m(null),!s.trim()){m("Username is required");return}if(!l){m("Password is required");return}try{await h(s,l),y("/")}catch(w){console.error("Login failed:",w)}};return n.jsxs("div",{className:"w-full font-mono",children:[n.jsxs("div",{className:"w-full bg-black text-white py-6 px-4 mb-6 transform -rotate-0.5 shadow-md flex items-end justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-4xl font-bold uppercase tracking-tight relative inline-block",children:[n.jsx("span",{className:"text-teal-400",children:"LOG"}),n.jsx("span",{children:"IN"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-teal-400 via-pink-400 to-purple-500"})]}),n.jsx("p",{className:"text-gray-300 mt-2 ml-6 border-l-2 border-pink-400 pl-4",children:"Enter your credentials to access your account"})]}),n.jsxs("div",{className:"hidden md:block relative w-20 h-20",children:[n.jsx("div",{className:"absolute -top-2 -right-2 w-10 h-10 bg-teal-400 rounded-full opacity-50"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-pink-400 rounded-full opacity-40"})]})]}),n.jsxs("div",{className:"max-w-sm mx-auto",children:[(c||g)&&n.jsxs("div",{className:"bg-black text-white p-3 mb-4 transform rotate-0.5 shadow-md",children:[n.jsx("span",{className:"text-pink-400 font-bold uppercase",children:"ERROR:"})," ",c||g]}),n.jsxs("div",{className:"bg-black text-white p-6 shadow-lg rounded-sm border-t-2 border-teal-400",children:[n.jsxs("form",{className:"space-y-4",onSubmit:j,children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"username",className:"block text-sm font-bold uppercase tracking-wider text-teal-400 mb-1",children:"Username"}),n.jsx("input",{id:"username",type:"text",value:s,onChange:b=>o(b.target.value),placeholder:"Enter your username",className:"w-full p-3 bg-gray-900 text-white border-l-2 border-teal-400 focus:outline-none focus:ring-1 focus:ring-teal-400 placeholder-gray-500 transition-all",disabled:p})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-bold uppercase tracking-wider text-pink-400 mb-1",children:"Password"}),n.jsx("input",{id:"password",type:"password",value:l,onChange:b=>u(b.target.value),placeholder:"Enter your password",className:"w-full p-3 bg-gray-900 text-white border-l-2 border-pink-400 focus:outline-none focus:ring-1 focus:ring-pink-400 placeholder-gray-500 transition-all",disabled:p})]}),n.jsx("div",{className:"pt-2",children:n.jsx("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-teal-600 to-teal-500 text-white uppercase tracking-wider transform hover:translate-y-[-2px] transition-all shadow-md relative overflow-hidden group font-bold",disabled:p,children:p?"LOGGING IN...":"LOGIN"})})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs("p",{className:"text-gray-400 text-sm",children:["Don't have an account?"," ",n.jsxs(_e,{to:"/register",className:"text-teal-400 hover:text-teal-300 font-bold uppercase inline-flex items-center group",children:["Register here",n.jsx("span",{className:"ml-1 transform translate-x-0 group-hover:translate-x-1 transition-transform",children:"→"})]})]})})]}),n.jsxs("div",{className:"mt-4 bg-gray-900 p-3 border-l-4 border-pink-400 text-white text-xs text-center transform rotate-0.5",children:[n.jsx("span",{className:"uppercase font-bold text-pink-400",children:"TIP:"})," ",n.jsx("span",{className:"text-gray-300",children:"Need an account to get started? Register to join our community!"})]})]})]})}function Kg(){const[s,o]=x.useState(""),[l,u]=x.useState(""),[c,m]=x.useState(""),[h,p]=x.useState(""),[g,y]=x.useState(null),[j,b]=x.useState(""),{register:w,loading:S,error:M}=lt(),D=mr(),R=T=>{if(!T){b("");return}const O=/[A-Z]/.test(T),q=/[a-z]/.test(T),Q=/[0-9]/.test(T),te=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(T),E=T.length>=8,A=[O,q,Q,te,E].filter(Boolean).length;A<2?b("weak"):A<4?b("medium"):b("strong")},U=async T=>{if(T.preventDefault(),y(null),!s.trim()){y("Username is required");return}if(!l.trim()){y("Email is required");return}if(!c){y("Password is required");return}if(c!==h){y("Passwords do not match");return}const O=/[A-Z]/.test(c),q=/[a-z]/.test(c),Q=/[0-9]/.test(c),te=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(c);if(!(c.length>=8)||!O||!q||!Q||!te){y("Password must be at least 8 characters and include uppercase, lowercase, number, and special character");return}try{console.debug("Register form data:",{username:s,email:l,password:c,confirmPassword:h}),await w(s,l,c),D("/")}catch(A){console.error("Registration failed:",A)}};return n.jsxs("div",{className:"w-full font-mono",children:[n.jsxs("div",{className:"w-full bg-black text-white py-6 px-4 mb-6 transform rotate-0.5 shadow-md flex items-end justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-4xl font-bold uppercase tracking-tight relative inline-block",children:[n.jsx("span",{className:"text-pink-400",children:"REG"}),n.jsx("span",{children:"IS"}),n.jsx("span",{className:"text-teal-400",children:"TER"}),n.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-teal-400 to-purple-500"})]}),n.jsx("p",{className:"text-gray-300 mt-2 ml-6 border-l-2 border-teal-400 pl-4",children:"Create a new account to join the community"})]}),n.jsxs("div",{className:"hidden md:block relative w-20 h-20",children:[n.jsx("div",{className:"absolute -top-2 -right-2 w-12 h-12 bg-pink-400 rounded-full opacity-40"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-teal-400 rounded-full opacity-50"})]})]}),n.jsxs("div",{className:"max-w-sm mx-auto",children:[(g||M)&&n.jsxs("div",{className:"bg-black text-white p-3 mb-4 transform -rotate-0.5 shadow-md",children:[n.jsx("span",{className:"text-pink-400 font-bold uppercase",children:"ERROR:"})," ",g||M]}),n.jsxs("div",{className:"bg-black text-white p-6 shadow-lg rounded-sm border-t-2 border-pink-400",children:[n.jsxs("form",{className:"space-y-4",onSubmit:U,children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"username",className:"block text-sm font-bold uppercase tracking-wider text-teal-400 mb-1",children:"Username"}),n.jsx("input",{id:"username",type:"text",value:s,onChange:T=>o(T.target.value),placeholder:"Choose a username",className:"w-full p-3 bg-gray-900 text-white border-l-2 border-teal-400 focus:outline-none focus:ring-1 focus:ring-teal-400 placeholder-gray-500 transition-all",disabled:S})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-bold uppercase tracking-wider text-pink-400 mb-1",children:"Email"}),n.jsx("input",{id:"email",type:"email",value:l,onChange:T=>u(T.target.value),placeholder:"Enter your email",className:"w-full p-3 bg-gray-900 text-white border-l-2 border-pink-400 focus:outline-none focus:ring-1 focus:ring-pink-400 placeholder-gray-500 transition-all",disabled:S})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-bold uppercase tracking-wider text-purple-400 mb-1",children:"Password"}),n.jsx("input",{id:"password",type:"password",value:c,onChange:T=>{m(T.target.value),R(T.target.value)},placeholder:"Create a password",className:"w-full p-3 bg-gray-900 text-white border-l-2 border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400 placeholder-gray-500 transition-all",disabled:S}),j&&n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-xs mr-2 text-gray-300",children:"Strength:"}),n.jsx("div",{className:"h-1.5 flex-grow rounded-sm overflow-hidden",children:n.jsx("div",{className:`h-full ${j==="weak"?"w-1/3 bg-red-500":j==="medium"?"w-2/3 bg-yellow-500":"w-full bg-green-500"} transition-all duration-300`})})]})})]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-bold uppercase tracking-wider text-teal-400 mb-1",children:"Confirm Password"}),n.jsx("input",{id:"confirmPassword",type:"password",value:h,onChange:T=>p(T.target.value),placeholder:"Confirm your password",className:"w-full p-3 bg-gray-900 text-white border-l-2 border-teal-400 focus:outline-none focus:ring-1 focus:ring-teal-400 placeholder-gray-500 transition-all",disabled:S})]}),n.jsx("div",{className:"pt-2",children:n.jsx("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-pink-600 to-pink-500 text-white uppercase tracking-wider transform hover:translate-y-[-2px] transition-all shadow-md relative overflow-hidden font-bold",disabled:S,children:S?"REGISTERING...":"REGISTER"})})]}),n.jsx("div",{className:"mt-5 text-center",children:n.jsxs("p",{className:"text-gray-400 text-sm",children:["Already have an account?"," ",n.jsxs(_e,{to:"/login",className:"text-pink-400 hover:text-pink-300 font-bold uppercase inline-flex items-center group",children:["Login here",n.jsx("span",{className:"ml-1 transform translate-x-0 group-hover:translate-x-1 transition-transform",children:"→"})]})]})})]}),n.jsx("div",{className:"mt-4 px-4",children:n.jsxs("p",{className:"text-xs text-gray-500 bg-gray-100 p-3 rounded-sm",children:[n.jsx("span",{className:"text-pink-500 font-bold",children:"Note:"})," Password must be at least 8 characters and include uppercase, lowercase, number, and special character for security."]})})]})]})}function Xg({postId:s}){const[o,l]=x.useState(null),[u,c]=x.useState(!0),[m,h]=x.useState(null),[p,g]=x.useState(0),[y,j]=x.useState(!1),[b,w]=x.useState(0),{user:S,token:M}=lt();x.useEffect(()=>{s&&(async()=>{try{c(!0);const O=await bf(s,M);l(O),w(O.votes||0),h(null)}catch(O){console.error("Error fetching post:",O),h("Failed to load post")}finally{c(!1)}})()},[s,M]),x.useEffect(()=>{(async()=>{if(!(!S||!M||!s))try{const O=await g0(s,M);g(O.value)}catch(O){console.error("Error fetching user vote:",O)}})()},[s,S,M]);const D=async T=>{if(!S||!M){alert("Please log in to vote");return}if(!y)try{j(!0);let O=T;p===T&&(O=0);const q=O-p;g(O),w(Q=>Q+q),await wf(s,O,M)}catch(O){console.error("Error voting:",O),g(p),w(b),alert("Failed to vote. Please try again.")}finally{j(!1)}};if(u)return n.jsxs("div",{className:"bg-white p-6 shadow-md mb-6 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]});if(m)return n.jsx("div",{className:"bg-white p-6 border-l-4 border-red-500 shadow-md mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"font-medium",children:m})]})});if(!o)return n.jsxs("div",{className:"bg-white p-6 border-l-4 border-yellow-500 shadow-md mb-6",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-6 h-6 text-yellow-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),n.jsx("span",{className:"font-medium",children:"Post not found"})]}),n.jsx("p",{className:"mt-2 text-gray-600",children:"This post doesn't exist or has been deleted."})]});const R=o.timestamp||o.created_at,U=R?Ui(new Date(R),{addSuffix:!0}):"unknown time";return n.jsxs("div",{className:"bg-white p-6 shadow-md mb-6 border-l-4 border-teal-400 transform hover:scale-[1.005] transition-transform",children:[n.jsxs("div",{className:"flex",children:[n.jsxs("div",{className:"flex flex-col items-center mr-4",children:[n.jsx("button",{className:`p-1 rounded transition-colors ${p===1?"text-teal-600":"text-gray-400 hover:text-teal-600"}`,onClick:()=>D(1),disabled:y,children:n.jsx(ns,{className:"w-6 h-6"})}),n.jsx("span",{className:`font-medium my-1 ${b>0?"text-teal-600":b<0?"text-pink-600":"text-gray-700"}`,children:b}),n.jsx("button",{className:`p-1 rounded transition-colors transform rotate-180 ${p===-1?"text-pink-600":"text-gray-400 hover:text-pink-600"}`,onClick:()=>D(-1),disabled:y,children:n.jsx(ns,{className:"w-6 h-6"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"mb-2 text-sm text-gray-500",children:[o.community_name||o.community?n.jsxs(_e,{to:`/community/${o.community_id}`,className:"font-medium text-teal-600 hover:underline",children:["r/",o.community_name||o.community]}):n.jsxs("span",{className:"font-medium",children:["Posted by ",o.username||"Anonymous"]}),n.jsx("span",{className:"mx-1",children:"·"}),n.jsx("span",{children:U})]}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:o.title}),n.jsx("div",{className:"text-gray-800 mb-4 whitespace-pre-line",children:o.content}),o.tags&&o.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:o.tags.map(T=>n.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:T},T))})]})]}),n.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-100 flex space-x-6",children:[n.jsxs("button",{className:"flex items-center text-gray-500 hover:text-teal-600 transition-colors",children:[n.jsx(c0,{className:"w-5 h-5 mr-1"}),n.jsx("span",{children:"Comments"})]}),n.jsxs("button",{className:"flex items-center text-gray-500 hover:text-pink-600 transition-colors",children:[n.jsx(vf,{className:"w-5 h-5 mr-1"}),n.jsx("span",{children:"Share"})]}),n.jsxs("button",{className:"flex items-center text-gray-500 hover:text-purple-600 transition-colors",children:[n.jsx(i0,{className:"w-5 h-5 mr-1"}),n.jsx("span",{children:"Save"})]})]})]})}function Sf({comment:s,onReply:o,level:l=0}){const[u,c]=x.useState(!1),[m,h]=x.useState(""),[p,g]=x.useState(!1),[y,j]=x.useState(s.content),[b,w]=x.useState(!1),[S,M]=x.useState(0),[D,R]=x.useState(!1),[U,T]=x.useState(s.votes||0),O=x.useContext(Cl),q=O==null?void 0:O.user,Q=O==null?void 0:O.token,te=q&&q.id===s.user_id,E=6;x.useEffect(()=>{(async()=>{if(!(!q||!Q||!s.id))try{const De=await x0(s.id,Q);M(De.value)}catch(De){console.error("Error fetching user vote:",De)}})()},[s.id,q,Q]);const A=async Ee=>{if(!q||!Q){alert("Please log in to vote");return}if(!D)try{R(!0);let De=Ee;S===Ee&&(De=0);const Re=De-S;M(De),T(J=>J+Re),await p0(s.id,De,Q)}catch(De){console.error("Error voting:",De),M(S),T(s.votes||0),alert("Failed to vote. Please try again.")}finally{R(!1)}},K=async Ee=>{if(Ee.preventDefault(),!m.trim()||!q)return;await o(s.id,m)&&(h(""),c(!1))},Z=async Ee=>{if(Ee.preventDefault(),!(!y.trim()||!te))try{await yg(s.id,y,Q),s.content=y,g(!1)}catch(De){console.error("Error updating comment:",De)}},Ce=async()=>{if(te)try{w(!0),await vg(s.id,Q),s.content="[deleted]",w(!1)}catch(Ee){console.error("Error deleting comment:",Ee),w(!1)}},je=()=>l===0?"":`ml-${Math.min(l,6)*4}`,Fe=["teal","pink","purple","teal","pink","purple"],Ne=Fe[l%Fe.length];return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`bg-white p-4 rounded-sm shadow-sm border-l-2 border-${Ne}-400 ${je()} mb-3 hover:shadow-md transition-shadow`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsxs("div",{className:"flex flex-col items-center mr-2",children:[n.jsx("button",{className:`p-1 transition-colors ${S===1?`text-${Ne}-600`:`text-gray-400 hover:text-${Ne}-600`}`,onClick:()=>A(1),disabled:D,children:n.jsx(ns,{className:"w-4 h-4"})}),n.jsx("span",{className:`text-xs font-medium ${U>0?`text-${Ne}-600`:U<0?"text-pink-600":"text-gray-700"}`,children:U}),n.jsx("button",{className:`p-1 transition-colors transform rotate-180 ${S===-1?"text-pink-600":"text-gray-400 hover:text-pink-600"}`,onClick:()=>A(-1),disabled:D,children:n.jsx(ns,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[p?n.jsxs("form",{onSubmit:Z,className:"w-full",children:[n.jsx("textarea",{className:`w-full p-2 border border-gray-200 rounded focus:border-${Ne}-400 focus:outline-none transition-colors`,value:y,onChange:Ee=>j(Ee.target.value),rows:3}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{type:"submit",className:`px-3 py-1 text-sm bg-${Ne}-600 text-white rounded hover:bg-${Ne}-700 transition-colors`,children:"Save"}),n.jsx("button",{type:"button",className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",onClick:()=>g(!1),children:"Cancel"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:`font-medium text-${Ne}-600`,children:s.username}),n.jsx("span",{className:"text-xs text-gray-500",children:s.timestamp})]}),n.jsx("p",{className:"text-gray-800 break-words",children:s.content}),n.jsxs("div",{className:"flex gap-4 mt-2 text-xs",children:[q&&l<E&&n.jsxs("button",{className:`flex items-center text-gray-500 hover:text-${Ne}-600 transition-colors`,onClick:()=>c(!u),children:[n.jsx(d0,{className:"w-3 h-3 mr-1"}),"Reply"]}),te&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"flex items-center text-gray-500 hover:text-teal-600 transition-colors",onClick:()=>g(!0),children:[n.jsx(f0,{className:"w-3 h-3 mr-1"}),"Edit"]}),n.jsxs("button",{className:"flex items-center text-gray-500 hover:text-pink-600 transition-colors",onClick:Ce,disabled:b,children:[n.jsx(m0,{className:"w-3 h-3 mr-1"}),b?"Deleting...":"Delete"]})]})]})]}),u&&n.jsxs("form",{onSubmit:K,className:"mt-3",children:[n.jsx("textarea",{className:`w-full p-2 border border-gray-200 rounded focus:border-${Ne}-400 focus:outline-none transition-colors`,placeholder:"Write a reply...",value:m,onChange:Ee=>h(Ee.target.value),rows:3}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx("button",{type:"submit",className:`px-3 py-1 text-sm bg-${Ne}-600 text-white rounded hover:bg-${Ne}-700 transition-colors`,disabled:!m.trim(),children:"Reply"}),n.jsx("button",{type:"button",className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",onClick:()=>{c(!1),h("")},children:"Cancel"})]})]})]})]})}),s.replies&&s.replies.length>0&&n.jsx("div",{className:`ml-4 pl-2 ${l<1?"border-l border-gray-200":""}`,children:s.replies.map(Ee=>n.jsx(Sf,{comment:Ee,onReply:o,level:l+1},Ee.id))})]})}function Gg({postId:s}){const[o,l]=x.useState([]),[u,c]=x.useState(!0),[m,h]=x.useState(null),[p,g]=x.useState(""),[y,j]=x.useState(!1),[b,w]=x.useState("new"),S=x.useContext(Cl),M=S==null?void 0:S.user,D=S==null?void 0:S.token;x.useEffect(()=>{s?(async()=>{try{c(!0),console.log("Fetching comments for post:",s);const te=await xg(s,!0);console.log("Comments data:",te),l(te||[]),h(null)}catch(te){console.error("Error fetching comments:",te),h("Failed to load comments"),l([])}finally{c(!1)}})():(c(!1),l([]))},[s]);const R=async Q=>{if(Q.preventDefault(),!p.trim()||!M){M||h("You must be logged in to comment");return}h(null);try{j(!0),console.log("Submitting comment for post:",s),console.log("Comment text:",p),console.log("User:",M.username);const te=await Yd(s,{content:p},D);console.log("Comment submission successful, response:",te),l(E=>[...E,{...te,username:M.username,replies:[]}]),g(""),h("Comment posted successfully!"),setTimeout(()=>h(null),3e3)}catch(te){console.error("Error posting comment:",te),te instanceof Error?h(`Failed to post comment: ${te.message}`):h("Failed to post comment. Please try again.")}finally{j(!1)}},U=async(Q,te)=>{if(!(!te.trim()||!M))try{const E=await Yd(s,{content:te,parentCommentId:Q},D);return l(A=>{const K=JSON.parse(JSON.stringify(A)),Z=Ce=>{for(let je=0;je<Ce.length;je++){if(Ce[je].id===Q)return Ce[je].replies||(Ce[je].replies=[]),Ce[je].replies.push({...E,username:M.username,replies:[]}),!0;if(Ce[je].replies&&Ce[je].replies.length>0&&Z(Ce[je].replies))return!0}return!1};return Z(K),K}),!0}catch(E){return console.error("Error posting reply:",E),E instanceof Error?h(`Failed to post reply: ${E.message}`):h("Failed to post reply. Please try again."),setTimeout(()=>h(null),3e3),!1}},T=Q=>({...Q,timestamp:Q.created_at?Ui(new Date(Q.created_at),{addSuffix:!0}):"",votes:Q.votes||0,replies:Q.replies?Q.replies.map(T):[]}),q=[...o.map(T)].sort((Q,te)=>b==="top"?(te.votes||0)-(Q.votes||0):b==="old"?new Date(Q.created_at).getTime()-new Date(te.created_at).getTime():new Date(te.created_at).getTime()-new Date(Q.created_at).getTime());return u?n.jsxs("div",{className:"bg-white p-6 shadow-md mb-6 border-l-4 border-teal-400",children:[n.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/4 mb-4"}),n.jsx("div",{className:"h-32 bg-gray-100 rounded mb-4"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"h-24 bg-gray-100 rounded"}),n.jsx("div",{className:"h-24 bg-gray-100 rounded ml-8"}),n.jsx("div",{className:"h-24 bg-gray-100 rounded"})]})]}):n.jsxs("div",{className:"bg-white p-6 shadow-md mb-6 border-l-4 border-teal-400",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-xl font-semibold",children:["Comments (",o.length,")"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"Sort by:"}),n.jsxs("select",{className:"border border-gray-300 rounded px-2 py-1 text-sm",value:b,onChange:Q=>w(Q.target.value),children:[n.jsx("option",{value:"new",children:"New"}),n.jsx("option",{value:"top",children:"Top"}),n.jsx("option",{value:"old",children:"Old"})]})]})]}),m&&n.jsx("div",{className:`mb-4 p-3 rounded text-sm ${m.includes("success")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:m}),n.jsxs("div",{className:"mb-6 border-2 border-gray-100 rounded-md p-3 transition-all hover:border-teal-100",children:[n.jsxs("h3",{className:"text-sm font-medium mb-2",children:["Comment as ",M?M.username:"guest"]}),n.jsxs("form",{onSubmit:R,children:[n.jsx("textarea",{className:"w-full p-3 border border-gray-200 rounded focus:border-teal-400 focus:outline-none transition-colors",rows:4,placeholder:M?"What are your thoughts?":"Please sign in to comment",value:p,onChange:Q=>g(Q.target.value),disabled:!M||y}),n.jsx("div",{className:"flex justify-end mt-2",children:n.jsx("button",{type:"submit",className:"px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700 disabled:bg-gray-400 transition-colors",disabled:!M||!p.trim()||y,children:y?"Posting...":"Comment"})})]})]}),n.jsx("div",{className:"space-y-4",children:q.length>0?q.map(Q=>n.jsx(Sf,{comment:Q,onReply:U,level:0},Q.id)):n.jsx("div",{className:"bg-gray-50 p-6 text-center rounded border border-gray-100",children:n.jsx("p",{className:"text-gray-500",children:"No comments yet. Be the first to comment!"})})})]})}function Zg(){const{postId:s}=Sl(),[o,l]=x.useState(null),[u,c]=x.useState(!0),[m,h]=x.useState(null),{token:p}=lt();return x.useEffect(()=>{(async()=>{if(s)try{c(!0);const y=await bf(s,p);l(y),h(null)}catch(y){console.error("Error fetching post details:",y),h("Failed to load post details")}finally{c(!1)}})()},[s,p]),u?n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:n.jsxs("div",{className:"animate-pulse bg-white p-6 shadow-md mb-6",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})}):m?n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:n.jsx("div",{className:"bg-white p-6 border-l-4 border-red-500 shadow-md mb-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("svg",{className:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("span",{className:"font-medium",children:m})]})})}):n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"lg:col-span-3",children:[n.jsx(Xg,{postId:s||""}),n.jsx(Gg,{postId:s||""})]}),n.jsxs("div",{className:"hidden lg:block",children:[o&&o.community_id&&n.jsxs("div",{className:"bg-white p-4 shadow-md mb-4 border-l-4 border-teal-400",children:[n.jsx("h3",{className:"font-bold text-lg mb-2",children:"About This Community"}),n.jsx(_e,{to:`/community/${o.community_id}`,className:"block font-medium text-teal-600 hover:underline",children:o.community_name||"View Community"}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:o.community_description||"Join the discussion in this community."})]}),n.jsxs("div",{className:"bg-white p-4 shadow-md mb-4 border-l-4 border-pink-400",children:[n.jsx("h3",{className:"font-bold text-lg mb-2",children:"Community Rules"}),n.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-600",children:[n.jsx("li",{className:"mb-1",children:"Be respectful to others"}),n.jsx("li",{className:"mb-1",children:"No spam or self-promotion"}),n.jsx("li",{className:"mb-1",children:"Stay on topic"})]})]}),n.jsxs("div",{className:"bg-white p-4 shadow-md border-l-4 border-purple-400",children:[n.jsx("h3",{className:"font-bold text-lg mb-2",children:"Post Activity"}),n.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:n.jsx(Wi,{postId:s||"",limit:5})})]})]})]})})}const sn="http://localhost:3001";async function ex(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${sn}/api/moderation/communities/${s}/settings`,{headers:l});if(!u.ok){const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to fetch community settings")}return await u.json()}async function tx(s,o,l){const u={"Content-Type":"application/json"};l&&(u.Authorization=`Bearer ${l}`);const c=await fetch(`${sn}/api/moderation/communities/${s}/settings`,{method:"PUT",headers:u,body:JSON.stringify(o)});if(!c.ok){const m=await c.json().catch(()=>({}));throw new Error(m.error||"Failed to update community settings")}return await c.json()}async function rx(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${sn}/api/moderation/communities/${s}/mod-queue`,{headers:l});if(!u.ok){const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to fetch moderation queue")}return await u.json()}async function Xd(s,o,l,u){const c={"Content-Type":"application/json"};u&&(c.Authorization=`Bearer ${u}`);const m=await fetch(`${sn}/api/moderation/posts/${s}/moderate`,{method:"POST",headers:c,body:JSON.stringify({action:o,reason:l})});if(!m.ok){const h=await m.json().catch(()=>({}));throw new Error(h.error||"Failed to moderate post")}return await m.json()}async function nx(s,o=50,l=0,u){const c={};u&&(c.Authorization=`Bearer ${u}`);const m=await fetch(`${sn}/api/moderation/communities/${s}/logs?limit=${o}&offset=${l}`,{headers:c});if(!m.ok){const h=await m.json().catch(()=>({}));throw new Error(h.error||"Failed to fetch moderation logs")}return await m.json()}async function bi(s,o){const l={};o&&(l.Authorization=`Bearer ${o}`);const u=await fetch(`${sn}/api/moderation/communities/${s}/banned-users`,{headers:l});if(!u.ok){const c=await u.json().catch(()=>({}));throw new Error(c.error||"Failed to fetch banned users")}return await u.json()}async function sx(s,o,l,u,c){const m={"Content-Type":"application/json"};c&&(m.Authorization=`Bearer ${c}`);const h=await fetch(`${sn}/api/moderation/communities/${s}/ban/${o}`,{method:"POST",headers:m,body:JSON.stringify({reason:l,duration:u})});if(!h.ok){const p=await h.json().catch(()=>({}));throw new Error(p.error||"Failed to ban user")}return await h.json()}async function ax(s,o,l,u){const c={"Content-Type":"application/json"};u&&(c.Authorization=`Bearer ${u}`);const m=await fetch(`${sn}/api/moderation/communities/${s}/unban/${o}`,{method:"POST",headers:c,body:JSON.stringify({reason:l})});if(!m.ok){const h=await m.json().catch(()=>({}));throw new Error(h.error||"Failed to unban user")}}const lx=({communityId:s})=>{const{token:o}=lt();mr();const[l,u]=x.useState("settings"),[c,m]=x.useState(null),[h,p]=x.useState([]),[g,y]=x.useState([]),[j,b]=x.useState([]),[w,S]=x.useState([]),[M,D]=x.useState(!0),[R,U]=x.useState(null),[T,O]=x.useState({}),[q,Q]=x.useState(!1),[te,E]=x.useState(""),[A,K]=x.useState(""),[Z,Ce]=x.useState("permanent"),[je,Fe]=x.useState(""),[Ne,Ee]=x.useState(null);x.useEffect(()=>{o&&De()},[s,l,o]);const De=async()=>{if(o){D(!0),U(null);try{if(l==="settings"){const B=await ex(s,o);m(B),O({})}else if(l==="members"){const B=await bl(s,o);p(B)}else if(l==="queue"){const B=await rx(s,o);y(B)}else if(l==="logs"){const B=await nx(s,100,0,o);b(B)}else if(l==="banned"){const B=await bi(s,o);S(B)}}catch(B){console.error("Error loading data:",B),U("Failed to load data. Please try again.")}finally{D(!1)}}},Re=B=>{const{name:ue,value:Te,type:ut}=B.target;if(ut==="checkbox"){const Nt=B.target.checked;O(re=>({...re,[ue]:Nt}))}else O(ue==="minimum_account_age_days"||ue==="minimum_karma_required"?Nt=>({...Nt,[ue]:parseInt(Te,10)}):Nt=>({...Nt,[ue]:Te}))},J=async()=>{if(o){D(!0),U(null);try{const B=await tx(s,T,o);m(B),O({}),alert("Settings saved successfully!")}catch(B){console.error("Error saving settings:",B),U("Failed to save settings. Please try again.")}finally{D(!1)}}},me=async(B,ue)=>{if(o){D(!0),U(null);try{await Sg(s,B,ue,o);const Te=await bl(s,o);p(Te)}catch(Te){console.error("Error updating role:",Te),U("Failed to update role. Please try again.")}finally{D(!1)}}},ee=async B=>{if(o){D(!0),U(null);try{await Xd(B,"approve",void 0,o),y(ue=>ue.filter(Te=>Te.id!==B))}catch(ue){console.error("Error approving post:",ue),U("Failed to approve post. Please try again.")}finally{D(!1)}}},P=B=>{Ee(B)},I=async()=>{if(!(!o||!Ne)){D(!0),U(null);try{await Xd(Ne,"reject",je,o),y(B=>B.filter(ue=>ue.id!==Ne)),Fe(""),Ee(null)}catch(B){console.error("Error rejecting post:",B),U("Failed to reject post. Please try again.")}finally{D(!1)}}},ye=B=>{E(B),Q(!0)},ke=async()=>{if(!(!o||!te)){D(!0),U(null);try{const B=Z==="permanent"?void 0:parseInt(Z,10);await sx(s,te,A,B,o);const ue=await bi(s,o);S(ue),Q(!1),E(""),K(""),Ce("permanent")}catch(B){console.error("Error banning user:",B),U("Failed to ban user. Please try again.")}finally{D(!1)}}},be=async B=>{if(o&&confirm("Are you sure you want to unban this user?")){D(!0),U(null);try{await ax(s,B,void 0,o);const ue=await bi(s,o);S(ue)}catch(ue){console.error("Error unbanning user:",ue),U("Failed to unban user. Please try again.")}finally{D(!1)}}},we=B=>new Date(B).toLocaleString();return n.jsxs("div",{className:"p-4 bg-white rounded-lg shadow",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Moderator Dashboard"}),R&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:R}),n.jsxs("div",{className:"flex mb-4 border-b",children:[n.jsx("button",{className:`px-4 py-2 ${l==="settings"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>u("settings"),children:"Settings"}),n.jsx("button",{className:`px-4 py-2 ${l==="members"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>u("members"),children:"Members"}),n.jsx("button",{className:`px-4 py-2 ${l==="queue"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>u("queue"),children:"Post Queue"}),n.jsx("button",{className:`px-4 py-2 ${l==="logs"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>u("logs"),children:"Logs"}),n.jsx("button",{className:`px-4 py-2 ${l==="banned"?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"}`,onClick:()=>u("banned"),children:"Banned Users"})]}),M?n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):n.jsxs("div",{className:"mt-4",children:[l==="settings"&&c&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Community Settings"}),n.jsxs("div",{className:"grid grid-cols-1 gap-4 max-w-2xl",children:[n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",name:"allow_post_images",checked:T.allow_post_images!==void 0?T.allow_post_images:c.allow_post_images,onChange:Re,className:"mr-2"}),n.jsx("span",{children:"Allow images in posts"})]})}),n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",name:"allow_post_links",checked:T.allow_post_links!==void 0?T.allow_post_links:c.allow_post_links,onChange:Re,className:"mr-2"}),n.jsx("span",{children:"Allow links in posts"})]})}),n.jsx("div",{className:"mb-4",children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",name:"require_post_approval",checked:T.require_post_approval!==void 0?T.require_post_approval:c.require_post_approval,onChange:Re,className:"mr-2"}),n.jsx("span",{children:"Require moderator approval for posts"})]})}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-1",children:"Restricted words (comma separated)"}),n.jsx("textarea",{name:"restricted_words",value:T.restricted_words!==void 0?T.restricted_words||"":c.restricted_words||"",onChange:Re,className:"w-full p-2 border rounded",rows:3})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-1",children:"Custom theme color"}),n.jsx("input",{type:"text",name:"custom_theme_color",value:T.custom_theme_color!==void 0?T.custom_theme_color||"":c.custom_theme_color||"",onChange:Re,placeholder:"#FF0000",className:"w-full p-2 border rounded"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-1",children:"Custom banner URL"}),n.jsx("input",{type:"text",name:"custom_banner_url",value:T.custom_banner_url!==void 0?T.custom_banner_url||"":c.custom_banner_url||"",onChange:Re,placeholder:"https://example.com/banner.jpg",className:"w-full p-2 border rounded"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-1",children:"Minimum account age (days)"}),n.jsx("input",{type:"number",name:"minimum_account_age_days",value:T.minimum_account_age_days!==void 0?T.minimum_account_age_days:c.minimum_account_age_days,onChange:Re,min:"0",className:"w-full p-2 border rounded"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-1",children:"Minimum karma required"}),n.jsx("input",{type:"number",name:"minimum_karma_required",value:T.minimum_karma_required!==void 0?T.minimum_karma_required:c.minimum_karma_required,onChange:Re,min:"0",className:"w-full p-2 border rounded"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",onClick:J,children:"Save Settings"})})]})]}),l==="members"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Community Members"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full bg-white",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Username"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Role"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Joined"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Actions"})]})}),n.jsx("tbody",{children:h.map(B=>n.jsxs("tr",{children:[n.jsx("td",{className:"py-2 px-4 border-b",children:B.username}),n.jsx("td",{className:"py-2 px-4 border-b",children:n.jsxs("select",{value:B.role,onChange:ue=>me(B.user_id,ue.target.value),className:"p-1 border rounded",children:[n.jsx("option",{value:"member",children:"Member"}),n.jsx("option",{value:"moderator",children:"Moderator"}),n.jsx("option",{value:"admin",children:"Admin"})]})}),n.jsx("td",{className:"py-2 px-4 border-b",children:we(B.joined_at)}),n.jsx("td",{className:"py-2 px-4 border-b",children:n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>ye(B.user_id),children:"Ban"})})]},B.user_id))})]})})]}),l==="queue"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Post Approval Queue"}),g.length===0?n.jsx("p",{children:"No posts awaiting approval."}):n.jsx("div",{className:"space-y-4",children:g.map(B=>n.jsxs("div",{className:"border rounded p-4",children:[n.jsx("h4",{className:"text-lg font-medium",children:B.title}),n.jsxs("p",{className:"text-sm text-gray-500",children:["By ",B.author_username," • ",we(B.created_at)]}),n.jsx("div",{className:"my-2 p-2 bg-gray-50 rounded",children:B.content}),n.jsxs("div",{className:"flex mt-2 space-x-2",children:[n.jsx("button",{className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded",onClick:()=>ee(B.id),children:"Approve"}),n.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",onClick:()=>P(B.id),children:"Reject"})]}),Ne===B.id&&n.jsxs("div",{className:"mt-3 p-3 border rounded",children:[n.jsx("label",{className:"block mb-1",children:"Rejection reason (optional)"}),n.jsx("textarea",{value:je,onChange:ue=>Fe(ue.target.value),className:"w-full p-2 border rounded mb-2",rows:2}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",onClick:I,children:"Confirm Rejection"}),n.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-3 py-1 rounded",onClick:()=>Ee(null),children:"Cancel"})]})]})]},B.id))})]}),l==="logs"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Moderation Logs"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full bg-white",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Action"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Moderator"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Target"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Reason"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Date"})]})}),n.jsx("tbody",{children:j.map(B=>n.jsxs("tr",{children:[n.jsx("td",{className:"py-2 px-4 border-b",children:B.action_type.replace(/_/g," ")}),n.jsx("td",{className:"py-2 px-4 border-b",children:B.moderator_username}),n.jsxs("td",{className:"py-2 px-4 border-b",children:[B.target_type," ",B.target_id?`#${B.target_id.substring(0,8)}`:""]}),n.jsx("td",{className:"py-2 px-4 border-b",children:B.reason||"-"}),n.jsx("td",{className:"py-2 px-4 border-b",children:we(B.created_at)})]},B.id))})]})})]}),l==="banned"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Banned Users"}),w.length===0?n.jsx("p",{children:"No banned users."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full bg-white",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Username"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Banned By"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Reason"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Expires"}),n.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Actions"})]})}),n.jsx("tbody",{children:w.map(B=>n.jsxs("tr",{children:[n.jsx("td",{className:"py-2 px-4 border-b",children:B.banned_username}),n.jsx("td",{className:"py-2 px-4 border-b",children:B.moderator_username}),n.jsx("td",{className:"py-2 px-4 border-b",children:B.reason||"-"}),n.jsx("td",{className:"py-2 px-4 border-b",children:B.ban_expires_at?we(B.ban_expires_at):"Permanent"}),n.jsx("td",{className:"py-2 px-4 border-b",children:n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:()=>be(B.user_id),children:"Unban"})})]},B.user_id))})]})})]})]}),q&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",children:"Ban User"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-1",children:"Ban reason (optional)"}),n.jsx("textarea",{value:A,onChange:B=>K(B.target.value),className:"w-full p-2 border rounded",rows:3})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-1",children:"Ban duration"}),n.jsxs("select",{value:Z,onChange:B=>Ce(B.target.value),className:"w-full p-2 border rounded",children:[n.jsx("option",{value:"permanent",children:"Permanent"}),n.jsx("option",{value:"1",children:"1 day"}),n.jsx("option",{value:"3",children:"3 days"}),n.jsx("option",{value:"7",children:"7 days"}),n.jsx("option",{value:"14",children:"14 days"}),n.jsx("option",{value:"30",children:"30 days"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-3 py-2 rounded",onClick:()=>Q(!1),children:"Cancel"}),n.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded",onClick:ke,children:"Ban User"})]})]})})]})},ox=()=>{const{communityId:s}=Sl(),{user:o,token:l}=lt(),u=mr(),[c]=r0(),m=c.get("tab")||"dashboard",[h,p]=x.useState(!0),[g,y]=x.useState(null),[j,b]=x.useState(!1),[w,S]=x.useState(null),[M,D]=x.useState([]),[R,U]=x.useState(!1),[T,O]=x.useState({});x.useEffect(()=>{if(!o||!l){u("/login",{state:{from:`/community/${s}/moderation`}});return}q(),Q(),m==="join-requests"&&te()},[s,o,l,m]);const q=async()=>{if(!(!s||!o||!l)){p(!0),y(null);try{const K=await fetch(`http://localhost:3001/api/communities/${s}/members/${o.id}`,{headers:{Authorization:`Bearer ${l}`}});if(K.ok){const Z=await K.json();b(Z.role==="moderator"||Z.role==="admin")}else b(!1)}catch(K){console.error("Error checking moderator status:",K),y("Failed to check moderator status."),b(!1)}finally{p(!1)}}},Q=async()=>{if(s)try{const K=await Bi(s);S(K)}catch(K){console.error("Error loading community:",K),y("Failed to load community information.")}},te=async()=>{if(!(!s||!l))try{U(!0);const K=await Cg(s,l);D(K)}catch(K){console.error("Error loading join requests:",K)}finally{U(!1)}},E=async K=>{if(!(!s||!l))try{O(Z=>({...Z,[K]:!0})),await Eg(s,K,l),D(Z=>Z.filter(Ce=>Ce.id!==K))}catch(Z){console.error("Error approving join request:",Z),alert("Failed to approve join request")}finally{O(Z=>({...Z,[K]:!1}))}},A=async K=>{if(!(!s||!l))try{O(Z=>({...Z,[K]:!0})),await Pg(s,K,l),D(Z=>Z.filter(Ce=>Ce.id!==K))}catch(Z){console.error("Error rejecting join request:",Z),alert("Failed to reject join request")}finally{O(Z=>({...Z,[K]:!1}))}};return h?n.jsx("div",{className:"container mx-auto p-4",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})})}):g?n.jsx("div",{className:"container mx-auto p-4",children:n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:g})}):j?n.jsxs("div",{className:"container mx-auto p-4",children:[w&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Moderating r/",w.name]}),n.jsx("button",{className:"text-blue-500 hover:text-blue-700 mb-4",onClick:()=>u(`/community/${s}`),children:"Return to Community"}),n.jsxs("div",{className:"flex border-b mb-6",children:[n.jsx("button",{className:`px-4 py-2 font-medium ${m==="dashboard"?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"}`,onClick:()=>u(`/community/${s}/moderation?tab=dashboard`),children:"Dashboard"}),n.jsx("button",{className:`px-4 py-2 font-medium ${m==="queue"?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"}`,onClick:()=>u(`/community/${s}/moderation?tab=queue`),children:"Content Queue"}),n.jsx("button",{className:`px-4 py-2 font-medium ${m==="join-requests"?"border-b-2 border-blue-500 text-blue-500":"text-gray-500"}`,onClick:()=>{u(`/community/${s}/moderation?tab=join-requests`),te()},children:"Join Requests"})]})]}),m==="join-requests"?n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pending Join Requests"}),R?n.jsx("p",{className:"text-gray-600",children:"Loading join requests..."}):M.length===0?n.jsx("p",{className:"text-gray-600",children:"No pending join requests"}):n.jsx("div",{className:"space-y-4",children:M.map(K=>n.jsx("div",{className:"bg-white shadow rounded-lg p-4 border-l-4 border-blue-500",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:K.username||`User ${K.user_id.substring(0,8)}...`}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Requested ",new Date(K.requested_at).toLocaleString()]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{className:`px-4 py-1 rounded bg-green-500 text-white hover:bg-green-600 ${T[K.id]?"opacity-50 cursor-not-allowed":""}`,onClick:()=>E(K.id),disabled:T[K.id],children:T[K.id]?"Processing...":"Approve"}),n.jsx("button",{className:`px-4 py-1 rounded bg-red-500 text-white hover:bg-red-600 ${T[K.id]?"opacity-50 cursor-not-allowed":""}`,onClick:()=>A(K.id),disabled:T[K.id],children:T[K.id]?"Processing...":"Reject"})]})]})},K.id))})]}):s&&n.jsx(lx,{communityId:s})]}):n.jsxs("div",{className:"container mx-auto p-4",children:[n.jsx("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:"You do not have permission to access the moderation dashboard for this community."}),n.jsx("div",{className:"mt-4",children:n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:()=>u(`/community/${s}`),children:"Return to Community"})})]})},ix=Ip([{path:"/",element:n.jsx(a0,{}),children:[{index:!0,element:n.jsx(_g,{})},{path:"communities",element:n.jsx(Fg,{})},{path:"community/:id",element:n.jsx(Vg,{})},{path:"community/:communityId/moderation",element:n.jsx(ox,{})},{path:"profile",element:n.jsx(Kd,{isUser:!0})},{path:"profile/:username",element:n.jsx(Kd,{isUser:!1})},{path:"login",element:n.jsx(qg,{})},{path:"register",element:n.jsx(Kg,{})},{path:"post/:postId",element:n.jsx(Zg,{})}]}]);gh.createRoot(document.getElementById("root")).render(n.jsx(x.StrictMode,{children:n.jsx(Kp,{router:ix})}));
